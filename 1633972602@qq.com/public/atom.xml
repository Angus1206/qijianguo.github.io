<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Angusの博客</title>
  
  <subtitle>学习</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://qijianguo.com/"/>
  <updated>2019-04-17T07:44:55.571Z</updated>
  <id>https://qijianguo.com/</id>
  
  <author>
    <name>Angus</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>EditText监听事件</title>
    <link href="https://qijianguo.com/Android/2019/04/17/EditText%E7%9B%91%E5%90%AC%E4%BA%8B%E4%BB%B6.html"/>
    <id>https://qijianguo.com/Android/2019/04/17/EditText监听事件.html</id>
    <published>2019-04-17T06:18:44.299Z</published>
    <updated>2019-04-17T07:44:55.571Z</updated>
    
    <content type="html"><![CDATA[<ul><li><p>源码</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">  /**</span><br><span class="line">    * Adds a TextWatcher to the list of those whose methods are called</span><br><span class="line">    * whenever this TextView&apos;s text changes.</span><br><span class="line">    * &lt;p&gt;</span><br><span class="line">    * In 1.0, the &#123;@link TextWatcher#afterTextChanged&#125; method was erroneously</span><br><span class="line">    * not called after &#123;@link #setText&#125; calls.  Now, doing &#123;@link #setText&#125;</span><br><span class="line">    * if there are any text changed listeners forces the buffer type to</span><br><span class="line">    * Editable if it would not otherwise be and does call this method.</span><br><span class="line">    */</span><br><span class="line">public void addTextChangedListener(TextWatcher watcher) &#123;</span><br><span class="line">     if (mListeners == null) &#123;</span><br><span class="line">          mListeners = new ArrayList&lt;TextWatcher&gt;();</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     mListeners.add(watcher);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure></li><li><p>示例: </p></li></ul><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> EditText editText;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">void</span> <span class="title">initView</span><span class="params">()</span></span>&#123;</span><br><span class="line">editText = (editText)findViewById(R.id.edit_text);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">void</span> <span class="title">initEvents</span><span class="params">()</span> </span>&#123;</span><br><span class="line">editText.addTextChangedListener(<span class="keyword">new</span> TextWatcher() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">beforeTextChanged</span><span class="params">(CharSequence s, <span class="keyword">int</span> start, <span class="keyword">int</span> count, <span class="keyword">int</span> after)</span> </span>&#123;</span><br><span class="line">                Log.i(TAG, <span class="string">"beforeTextChanged: 输入过程中执行该方法"</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">onTextChanged</span><span class="params">(CharSequence s, <span class="keyword">int</span> start, <span class="keyword">int</span> before, <span class="keyword">int</span> count)</span> </span>&#123;</span><br><span class="line">                Log.i(TAG, <span class="string">"onTextChanged: 输入前确认执行该方法"</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">afterTextChanged</span><span class="params">(Editable s)</span> </span>&#123;</span><br><span class="line">Log.i(TAG, <span class="string">"afterTextChanged: 输入结束执行该方法"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ul&gt;
&lt;li&gt;&lt;p&gt;源码&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/s
      
    
    </summary>
    
      <category term="Android" scheme="https://qijianguo.com/categories/Android/"/>
    
    
      <category term="android,EditText" scheme="https://qijianguo.com/tags/android-EditText/"/>
    
  </entry>
  
  <entry>
    <title>Linux中部署Maven项目, 自定义setting.xml文件</title>
    <link href="https://qijianguo.com/Linux/2019/04/17/Linux%E4%B8%AD%E9%83%A8%E7%BD%B2Maven%E9%A1%B9%E7%9B%AE,%20%E8%87%AA%E5%AE%9A%E4%B9%89setting.xml%E6%96%87%E4%BB%B6.html"/>
    <id>https://qijianguo.com/Linux/2019/04/17/Linux中部署Maven项目, 自定义setting.xml文件.html</id>
    <published>2019-04-17T06:18:44.291Z</published>
    <updated>2019-04-17T07:46:09.322Z</updated>
    
    <content type="html"><![CDATA[<ul><li>查看Linux中maven地址<blockquote><p>[root@iZbp1cj4z3w66bw25x346qZ Portal]# mvn -v<br>Apache Maven 3.3.1 (cab6659f9874fa96462afef40fcf6bc033d58c1c; 2015-03-14T04:10:27+08:00)<br>Maven home: <strong><em>/usr/local/maven</em></strong><br>Java version: 1.8.0_131, vendor: Oracle Corporation<br>Java home: /usr/java/jdk1.8.0_131/jre<br>Default locale: en_US, platform encoding: UTF-8<br>OS name: “linux”, version: “2.6.32-642.13.1.el6.x86_64”, arch: “amd64”, family: “unix”</p><p>[root@iZbp1cj4z3w66bw25x346qZ Portal]# cd  /usr/local/maven<br>drwxr-xr-x 2 root root  4096 Apr 26  2017 logging<br>-rw-r–r– 1 root root 16404 Jul 26 16:52 settings_custom.xml<br>-rw-r–r– 1 root root 16177 Apr 26  2017 settings.xml</p></blockquote></li></ul><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/maven/conf/settings.<span class="keyword">xml</span>      <span class="title">-- 默认的setting</span>文件</span><br><span class="line"></span><br><span class="line">/usr/local/maven/conf/settings_custom.<span class="keyword">xml</span>    <span class="title">-- 自定义的setting</span>文件</span><br></pre></td></tr></table></figure><ul><li>启动项目, 在脚本中指定自己的setting.xml文件<blockquote><p>settings /usr/local/maven/conf/settings_custom.xml</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mvn clean compile <span class="string">exec:</span>java --settings <span class="regexp">/usr/</span>local<span class="regexp">/maven/</span>conf/</span><br><span class="line">settings_custom.xml -Plocal-config &gt; <span class="regexp">/dev/</span><span class="literal">null</span> <span class="number">2</span>&gt;&amp;<span class="number">1</span> &amp;</span><br></pre></td></tr></table></figure></blockquote></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ul&gt;
&lt;li&gt;查看Linux中maven地址&lt;blockquote&gt;
&lt;p&gt;[root@iZbp1cj4z3w66bw25x346qZ Portal]# mvn -v&lt;br&gt;Apache Maven 3.3.1 (cab6659f9874fa96462afef40fcf6bc
      
    
    </summary>
    
      <category term="Linux" scheme="https://qijianguo.com/categories/Linux/"/>
    
    
      <category term="linux" scheme="https://qijianguo.com/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>SpringBoot定时任务Schedule使用</title>
    <link href="https://qijianguo.com/Java/2019/04/17/SpringBoot%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1Schedule%E4%BD%BF%E7%94%A8.html"/>
    <id>https://qijianguo.com/Java/2019/04/17/SpringBoot定时任务Schedule使用.html</id>
    <published>2019-04-17T06:18:44.289Z</published>
    <updated>2019-04-17T07:47:01.345Z</updated>
    
    <content type="html"><![CDATA[<p>在开发中很多时候会用到定时任务, 以前用自定义类继承<strong><em>TimerTask</em></strong></p><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomTask</span> <span class="keyword"><span class="keyword">extends</span> <span class="type">TimerTask</span></span></span>&#123;</span><br><span class="line">@Override</span><br><span class="line"><span class="keyword">public</span> void run() &#123;</span><br><span class="line"><span class="comment">// 执行业务代码</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> void main(<span class="keyword">String</span>[] args) &#123;</span><br><span class="line"><span class="comment">// 调用</span></span><br><span class="line">Timer timer= <span class="keyword">new</span> <span class="type">Timer</span>();</span><br><span class="line">Calendar calendar= Calendar.getInstance(); <span class="comment">// 设置定时时间, 当然还有其他方式</span></span><br><span class="line">calendar.<span class="keyword">set</span>(Calendar.MINUTE, <span class="number">0</span>);</span><br><span class="line">calendar.<span class="keyword">set</span>(Calendar.SECOND, <span class="number">0</span>);</span><br><span class="line">calendar.<span class="keyword">set</span>(Calendar.MILLISECOND, <span class="number">0</span>);</span><br><span class="line">calendar.scheduleAtFixedRate(<span class="keyword">new</span> <span class="type">CustomTask</span>(),</span><br><span class="line">timer.getTime(), <span class="number">1000</span> * <span class="number">60</span> * <span class="number">10</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="https://blog.csdn.net/xieyuooo/article/details/8607220" target="_blank" rel="noopener">Timer和TimerTask详解:https://blog.csdn.net/xieyuooo/article/details/8607220</a></p><p>下面进入正题, SpringBoot中优雅使用定时任务</p><ul><li><p>添加支持<br>在SpringBoot的启动类①中添加注解 <strong><em>@EnableScheduling</em></strong></p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@SpringBootApplication</span></span><br><span class="line"><span class="variable">@EnableScheduling</span>  <span class="comment">// ①</span></span><br><span class="line">public class Application &#123;</span><br><span class="line">    <span class="selector-tag">public</span> <span class="selector-tag">static</span> <span class="selector-tag">void</span> <span class="selector-tag">main</span>(String[] args) &#123;</span><br><span class="line">        <span class="selector-tag">SpringApplication</span><span class="selector-class">.run</span>(Application.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>使用定时任务</p></li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 检查小时均值报警</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> @Scheduled(cron = <span class="string">"0 1 * * * *"</span>)</span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">overproofAlert</span><span class="params">()</span> </span>&#123;</span><br><span class="line"> <span class="built_in">log</span>.info(<span class="string">"-----开始执行定时任务-----"</span>);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>通过上面这一个注解   <strong><em>@Scheduled(cron = “0 1 </em> <em> </em> <em>“)</em></strong> 这样就可以开启定时任务了, 惊不惊喜！</p><p>Cron表达式说明 <a href="https://www.cnblogs.com/liuyitian/p/4108391.html" target="_blank" rel="noopener">详细说明</a></p><blockquote><p>Cron是字符串表达式, 并由’域’和空格组成。</p></blockquote><p>模版: <em>Seconds</em> <em>Minutes</em> <em>Hours</em> <em>DayOfMonth</em> <em>Month</em> <em>DayOfWeek</em> <em>Year</em></p><blockquote><p>Year可选<br>各<br>Sencods</p></blockquote><hr><p>这样创建的定时任务是同步的，即顺序执行。 这会遇到一个问题，当某个任务中断后会阻塞掉后面的任务， 导致其他任务‘失效’。所以配置异步是非常有必要的, 步骤如下:</p><ul><li><p>添加Config</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableAsync</span> <span class="comment">// ① 添加注解</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AsyncConfig</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Executor <span class="title">taskExecutor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        ThreadPoolTaskExecutor executor = <span class="keyword">new</span> ThreadPoolTaskExecutor();</span><br><span class="line">        executor.setCorePoolSize(<span class="number">10</span>);  </span><br><span class="line">        executor.setMaxPoolSize(<span class="number">200</span>);</span><br><span class="line">        executor.setQueueCapacity(<span class="number">10</span>);</span><br><span class="line">        executor.initialize();</span><br><span class="line">        <span class="keyword">return</span> executor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>在定时方法上添加 <strong><em>@Async</em></strong> 注解</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@Scheduled</span>(cron = <span class="string">"0 0/1 * * * *"</span>)</span><br><span class="line"><span class="variable">@Async</span>   <span class="comment">// ② </span></span><br><span class="line">public void oneMinuteTask() &#123;</span><br><span class="line"><span class="selector-tag">log</span><span class="selector-class">.info</span>(<span class="string">"-----开始执行定时任务-----"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="大功告成"><a href="#大功告成" class="headerlink" title="大功告成 !"></a>大功告成 !</h4>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;在开发中很多时候会用到定时任务, 以前用自定义类继承&lt;strong&gt;&lt;em&gt;TimerTask&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight haxe&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span
      
    
    </summary>
    
      <category term="Java" scheme="https://qijianguo.com/categories/Java/"/>
    
    
      <category term="java, schedule" scheme="https://qijianguo.com/tags/java-schedule/"/>
    
  </entry>
  
  <entry>
    <title>Cordova生成安卓源码无法运行</title>
    <link href="https://qijianguo.com/Android/2019/04/17/Cordova%E7%94%9F%E6%88%90%E5%AE%89%E5%8D%93%E6%BA%90%E7%A0%81%E6%97%A0%E6%B3%95%E8%BF%90%E8%A1%8C.html"/>
    <id>https://qijianguo.com/Android/2019/04/17/Cordova生成安卓源码无法运行.html</id>
    <published>2019-04-17T06:18:44.286Z</published>
    <updated>2019-04-17T07:44:51.850Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>说明: cordova编译生成的android源码在Android Studio中运行, 无法找到<br><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Gradle <span class="string">'android'</span> project refresh failed</span><br><span class="line"><span class="symbol">Error:</span>No <span class="keyword">installed </span><span class="keyword">build </span>tools found. <span class="keyword">Install </span>the <span class="keyword">Android </span><span class="keyword">build </span>tools version <span class="number">19</span>.<span class="number">1</span>.<span class="number">0</span> <span class="keyword">or </span>higher.</span><br></pre></td></tr></table></figure></p></blockquote><p>解决方式一:</p><ol><li>全局搜索  availableBuildToolsVersions = getAvailableBuildTools()<br><img src="https://img-blog.csdn.net/20180921102547408?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="修改前的照片"><br>修改为<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">availableBuildToolsVersions  = ['<span class="number">21.0</span><span class="number">.0</span>','<span class="number">20.0</span><span class="number">.0</span>','<span class="number">19.1</span><span class="number">.0</span>','<span class="number">19.0</span><span class="number">.3</span>'] as String[]</span><br></pre></td></tr></table></figure></li></ol><p><img src="https://img-blog.csdn.net/20180921102905659?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="修改后的源码截图"><br>分析:</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">String doFindLatestInstalledBuildTools(String minBuildToolsVersion) &#123;</span><br><span class="line">    <span class="keyword">def</span> availableBuildToolsVersions</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> 获得可用的 build-tools</span></span><br><span class="line">        availableBuildToolsVersions  = getAvailableBuildTools()</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">        <span class="keyword">println</span> <span class="string">"An exception occurred while trying to find the Android build tools."</span></span><br><span class="line">        <span class="keyword">throw</span> e</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (availableBuildToolsVersions.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">def</span> highestBuildToolsVersion = availableBuildToolsVersions[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">if</span> (compareVersions(highestBuildToolsVersion, minBuildToolsVersion) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(</span><br><span class="line">                <span class="string">"No usable Android build tools found. Highest installed version is "</span> +</span><br><span class="line">                highestBuildToolsVersion + <span class="string">"; minimum version required is "</span> +</span><br><span class="line">                minBuildToolsVersion + <span class="string">"."</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        highestBuildToolsVersion</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// TODO 上面报错正是这抛出的异常, 为什么会走这呢, 因为没找到build-tools的版本</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(</span><br><span class="line">            <span class="string">"No installed build tools found. Install the Android build tools version "</span> +</span><br><span class="line">            minBuildToolsVersion + <span class="string">" or higher."</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取可用的build-tool</span></span><br><span class="line"><span class="comment"> * @return</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">String[] getAvailableBuildTools() &#123;</span><br><span class="line">    <span class="keyword">def</span> buildToolsDir = <span class="keyword">new</span> <span class="keyword">File</span>(getAndroidSdkDir(), <span class="string">"build-tools"</span>)</span><br><span class="line">    buildToolsDir.list()</span><br><span class="line">        .<span class="keyword">findAll</span> &#123; it ==~ <span class="regexp">/[0-9.]+/</span> &#125; </span><br><span class="line">        .<span class="keyword">sort</span> &#123; a, b -&gt; compareVersions(b, a) &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取SDK位置</span></span><br><span class="line"><span class="comment"> * @return</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">String getAndroidSdkDir() &#123;</span><br><span class="line">    <span class="keyword">def</span> rootDir = <span class="keyword">project</span>.rootDir</span><br><span class="line">    <span class="keyword">def</span> androidSdkDir = <span class="keyword">null</span></span><br><span class="line">    String envVar = System.getenv(<span class="string">"ANDROID_HOME"</span>)</span><br><span class="line">    <span class="keyword">def</span> localProperties = <span class="keyword">new</span> <span class="keyword">File</span>(rootDir, <span class="string">'local.properties'</span>)</span><br><span class="line">    String systemProperty = System.getProperty(<span class="string">"android.home"</span>)</span><br><span class="line">    <span class="keyword">if</span> (envVar != <span class="keyword">null</span>) &#123;</span><br><span class="line">        androidSdkDir = envVar</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (localProperties.exists()) &#123;</span><br><span class="line">        Properties properties = <span class="keyword">new</span> Properties()</span><br><span class="line">        localProperties.withInputStream &#123; instr -&gt;</span><br><span class="line">            properties.load(instr)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">def</span> sdkDirProp = properties.getProperty(<span class="string">'sdk.dir'</span>)</span><br><span class="line">        <span class="keyword">if</span> (sdkDirProp != <span class="keyword">null</span>) &#123;</span><br><span class="line">            androidSdkDir = sdkDirProp</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            sdkDirProp = properties.getProperty(<span class="string">'android.dir'</span>)</span><br><span class="line">            <span class="keyword">if</span> (sdkDirProp != <span class="keyword">null</span>) &#123;</span><br><span class="line">                androidSdkDir = (<span class="keyword">new</span> <span class="keyword">File</span>(rootDir, sdkDirProp)).getAbsolutePath()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (androidSdkDir == <span class="keyword">null</span> &amp;&amp; systemProperty != <span class="keyword">null</span>) &#123;</span><br><span class="line">        androidSdkDir = systemProperty</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (androidSdkDir == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(</span><br><span class="line">            <span class="string">"Unable to determine Android SDK directory."</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    androidSdkDir</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;说明: cordova编译生成的android源码在Android Studio中运行, 无法找到&lt;br&gt;&lt;figure class=&quot;highlight mipsasm&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;s
      
    
    </summary>
    
      <category term="Android" scheme="https://qijianguo.com/categories/Android/"/>
    
    
      <category term="android" scheme="https://qijianguo.com/tags/android/"/>
    
  </entry>
  
  <entry>
    <title>数字格式化工具类     持续更新</title>
    <link href="https://qijianguo.com/Java/2019/04/17/%E6%95%B0%E5%AD%97%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%B7%A5%E5%85%B7%E7%B1%BB%20%20%20%20%20%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0.html"/>
    <id>https://qijianguo.com/Java/2019/04/17/数字格式化工具类     持续更新.html</id>
    <published>2019-04-17T06:18:44.281Z</published>
    <updated>2019-04-17T07:33:53.958Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight zephir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 数字格式化工具类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NumberUtils</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 格式化为指定位小数的数字,返回未使用科学计数法表示的具有指定位数的字符串。</span></span><br><span class="line"><span class="comment"> * 该方法舍入模式：向“最接近的”数字舍入，如果与两个相邻数字的距离相等，则为向上舍入的舍入模式。</span></span><br><span class="line"><span class="comment"> * &lt;pre&gt;</span></span><br><span class="line"><span class="comment"> * "3.1415926", 1--&gt; 3.1</span></span><br><span class="line"><span class="comment"> * "3.1415926", 3--&gt; 3.142</span></span><br><span class="line"><span class="comment"> * "3.1415926", 4--&gt; 3.1416</span></span><br><span class="line"><span class="comment"> * "3.1415926", 6--&gt; 3.141593</span></span><br><span class="line"><span class="comment"> * "1234567891234567.1415926", 3--&gt; 1234567891234567.142</span></span><br><span class="line"><span class="comment"> * &lt;/pre&gt;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> //String类型的数字对象</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> precision  小数精确度总位数,如2表示两位小数</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> 返回数字格式化后的字符串表示形式(注意返回的字符串未使用科学计数法)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> String keepPrecision(String number, <span class="keyword">int</span> precision) &#123;</span><br><span class="line">BigDecimal bg = <span class="keyword">new</span> BigDecimal(number);</span><br><span class="line"><span class="keyword">return</span> bg.setScale(precision, BigDecimal.ROUND_HALF_UP).toPlainString();</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 格式化为指定位小数的数字,返回未使用科学计数法表示的具有指定位数的字符串。&lt;br&gt;</span></span><br><span class="line"><span class="comment"> * 该方法舍入模式：向“最接近的”数字舍入，如果与两个相邻数字的距离相等，则为向上舍入的舍入模式。&lt;br&gt;</span></span><br><span class="line"><span class="comment"> * 如果给定的数字没有小数，则转换之后将以0填充；例如：int 123  1 --&gt; 123.0&lt;br&gt;</span></span><br><span class="line"><span class="comment"> * &lt;b&gt;注意：&lt;/b&gt;如果精度要求比较精确请使用 keepPrecision(String number, int precision)方法</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> //String类型的数字对象</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> precision  小数精确度总位数,如2表示两位小数</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> 返回数字格式化后的字符串表示形式(注意返回的字符串未使用科学计数法)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> String keepPrecision(Number number, <span class="keyword">int</span> precision) &#123;</span><br><span class="line"><span class="keyword">return</span> keepPrecision(String.valueOf(number), precision);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 对double类型的数值保留指定位数的小数。&lt;br&gt;</span></span><br><span class="line"><span class="comment"> * 该方法舍入模式：向“最接近的”数字舍入，如果与两个相邻数字的距离相等，则为向上舍入的舍入模式。&lt;br&gt;</span></span><br><span class="line"><span class="comment"> * &lt;b&gt;注意：&lt;/b&gt;如果精度要求比较精确请使用 keepPrecision(String number, int precision)方法</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> number  要保留小数的数字</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> precision 小数位数</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> double 如果数值较大，则使用科学计数法表示</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> keepPrecision(<span class="keyword">double</span> number, <span class="keyword">int</span> precision) &#123;</span><br><span class="line">BigDecimal bg = <span class="keyword">new</span> BigDecimal(number);</span><br><span class="line"><span class="keyword">return</span> bg.setScale(precision, BigDecimal.ROUND_HALF_UP).doubleValue();</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 对float类型的数值保留指定位数的小数。&lt;br&gt;</span></span><br><span class="line"><span class="comment"> * 该方法舍入模式：向“最接近的”数字舍入，如果与两个相邻数字的距离相等，则为向上舍入的舍入模式。&lt;br&gt;</span></span><br><span class="line"><span class="comment"> * &lt;b&gt;注意：&lt;/b&gt;如果精度要求比较精确请使用 keepPrecision(String number, int precision)方法</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> number  要保留小数的数字</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> precision 小数位数</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> float 如果数值较大，则使用科学计数法表示</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">float</span> keepPrecision(<span class="keyword">float</span> number, <span class="keyword">int</span> precision) &#123;</span><br><span class="line">BigDecimal bg = <span class="keyword">new</span> BigDecimal(number);</span><br><span class="line"><span class="keyword">return</span> bg.setScale(precision, BigDecimal.ROUND_HALF_UP).floatValue();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取 ±number 的随机数。&lt;br&gt;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> number  要保留小数的数字</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> float 如果数值较大，则使用科学计数法表示</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">float</span> getRandomNum(<span class="keyword">int</span> number) &#123;</span><br><span class="line">Random random = <span class="keyword">new</span> Random();</span><br><span class="line"><span class="comment">//return num /2 + random.nextFloat() * num * -1;</span></span><br><span class="line"><span class="keyword">int</span> randomNum = (random.nextInt(number)) * (random.nextInt(<span class="number">2</span>) == <span class="number">0</span> ? <span class="number">-1</span> : <span class="number">1</span>);</span><br><span class="line">String rd = randomNum + <span class="string">"."</span> + random.nextInt(<span class="number">10</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">Float</span>.parseFloat(rd);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 去掉小数点后多余的0。&lt;br&gt;</span></span><br><span class="line"><span class="comment"> * 例如: 1.0 则返回 1。&lt;br&gt;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> number  要处理的数字</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> double </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> rvZeroAndDot(<span class="keyword">double</span> number)&#123;</span><br><span class="line">String s = String.valueOf(number);</span><br><span class="line"><span class="keyword">if</span> (s.isEmpty()) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(s.indexOf(<span class="string">"."</span>) &gt; <span class="number">0</span>)&#123;</span><br><span class="line">s = s.replaceAll(<span class="string">"0+?$"</span>, <span class="string">""</span>);<span class="comment">//去掉多余的0</span></span><br><span class="line">s = s.replaceAll(<span class="string">"[.]$"</span>, <span class="string">""</span>);<span class="comment">//如最后一位是.则去掉</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">Double</span>.parseDouble(s);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 数字格式化工具类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NumberUtils</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 格式化为指定位小数的数字,返回未使用科学计数法表示的具有指定位数的字符串。</span></span><br><span class="line"><span class="comment"> * 该方法舍入模式：向“最接近的”数字舍入，如果与两个相邻数字的距离相等，则为向上舍入的舍入模式。</span></span><br><span class="line"><span class="comment"> * &lt;pre&gt;</span></span><br><span class="line"><span class="comment"> * "3.1415926", 1--&gt; 3.1</span></span><br><span class="line"><span class="comment"> * "3.1415926", 3--&gt; 3.142</span></span><br><span class="line"><span class="comment"> * "3.1415926", 4--&gt; 3.1416</span></span><br><span class="line"><span class="comment"> * "3.1415926", 6--&gt; 3.141593</span></span><br><span class="line"><span class="comment"> * "1234567891234567.1415926", 3--&gt; 1234567891234567.142</span></span><br><span class="line"><span class="comment"> * &lt;/pre&gt;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> //String类型的数字对象</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> precision  小数精确度总位数,如2表示两位小数</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> 返回数字格式化后的字符串表示形式(注意返回的字符串未使用科学计数法)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> String keepPrecision(String number, <span class="keyword">int</span> precision) &#123;</span><br><span class="line">BigDecimal bg = <span class="keyword">new</span> BigDecimal(number);</span><br><span class="line"><span class="keyword">return</span> bg.setScale(precision, BigDecimal.ROUND_HALF_UP).toPlainString();</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 格式化为指定位小数的数字,返回未使用科学计数法表示的具有指定位数的字符串。&lt;br&gt;</span></span><br><span class="line"><span class="comment"> * 该方法舍入模式：向“最接近的”数字舍入，如果与两个相邻数字的距离相等，则为向上舍入的舍入模式。&lt;br&gt;</span></span><br><span class="line"><span class="comment"> * 如果给定的数字没有小数，则转换之后将以0填充；例如：int 123  1 --&gt; 123.0&lt;br&gt;</span></span><br><span class="line"><span class="comment"> * &lt;b&gt;注意：&lt;/b&gt;如果精度要求比较精确请使用 keepPrecision(String number, int precision)方法</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> //String类型的数字对象</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> precision  小数精确度总位数,如2表示两位小数</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> 返回数字格式化后的字符串表示形式(注意返回的字符串未使用科学计数法)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> String keepPrecision(Number number, <span class="keyword">int</span> precision) &#123;</span><br><span class="line"><span class="keyword">return</span> keepPrecision(String.valueOf(number), precision);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 对double类型的数值保留指定位数的小数。&lt;br&gt;</span></span><br><span class="line"><span class="comment"> * 该方法舍入模式：向“最接近的”数字舍入，如果与两个相邻数字的距离相等，则为向上舍入的舍入模式。&lt;br&gt;</span></span><br><span class="line"><span class="comment"> * &lt;b&gt;注意：&lt;/b&gt;如果精度要求比较精确请使用 keepPrecision(String number, int precision)方法</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> number  要保留小数的数字</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> precision 小数位数</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> double 如果数值较大，则使用科学计数法表示</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> keepPrecision(<span class="keyword">double</span> number, <span class="keyword">int</span> precision) &#123;</span><br><span class="line">BigDecimal bg = <span class="keyword">new</span> BigDecimal(number);</span><br><span class="line"><span class="keyword">return</span> bg.setScale(precision, BigDecimal.ROUND_HALF_UP).doubleValue();</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 对float类型的数值保留指定位数的小数。&lt;br&gt;</span></span><br><span class="line"><span class="comment"> * 该方法舍入模式：向“最接近的”数字舍入，如果与两个相邻数字的距离相等，则为向上舍入的舍入模式。&lt;br&gt;</span></span><br><span class="line"><span class="comment"> * &lt;b&gt;注意：&lt;/b&gt;如果精度要求比较精确请使用 keepPrecision(String number, int precision)方法</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> number  要保留小数的数字</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> precision 小数位数</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> float 如果数值较大，则使用科学计数法表示</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">float</span> keepPrecision(<span class="keyword">float</span> number, <span class="keyword">int</span> precision) &#123;</span><br><span class="line">BigDecimal bg = <span class="keyword">new</span> BigDecimal(number);</span><br><span class="line"><span class="keyword">return</span> bg.setScale(precision, BigDecimal.ROUND_HALF_UP).floatValue();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取 ±number 的随机数。&lt;br&gt;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> number  要保留小数的数字</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> float 如果数值较大，则使用科学计数法表示</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">float</span> getRandomNum(<span class="keyword">int</span> number) &#123;</span><br><span class="line">Random random = <span class="keyword">new</span> Random();</span><br><span class="line"><span class="comment">//return num /2 + random.nextFloat() * num * -1;</span></span><br><span class="line"><span class="keyword">int</span> randomNum = (random.nextInt(number)) * (random.nextInt(<span class="number">2</span>) == <span class="number">0</span> ? <span class="number">-1</span> : <span class="number">1</span>);</span><br><span class="line">String rd = randomNum + <span class="string">"."</span> + random.nextInt(<span class="number">10</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">Float</span>.parseFloat(rd);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 去掉小数点后多余的0。&lt;br&gt;</span></span><br><span class="line"><span class="comment"> * 例如: 1.0 则返回 1。&lt;br&gt;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> number  要处理的数字</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> double </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> rvZeroAndDot(<span class="keyword">double</span> number)&#123;</span><br><span class="line">String s = String.valueOf(number);</span><br><span class="line"><span class="keyword">if</span> (s.isEmpty()) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(s.indexOf(<span class="string">"."</span>) &gt; <span class="number">0</span>)&#123;</span><br><span class="line">s = s.replaceAll(<span class="string">"0+?$"</span>, <span class="string">""</span>);<span class="comment">//去掉多余的0</span></span><br><span class="line">s = s.replaceAll(<span class="string">"[.]$"</span>, <span class="string">""</span>);<span class="comment">//如最后一位是.则去掉</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">Double</span>.parseDouble(s);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">float</span> generateRandomValue(<span class="keyword">float</span> min, <span class="keyword">float</span> max) &#123;</span><br><span class="line">        <span class="keyword">int</span> mins= (<span class="keyword">int</span>) (min*<span class="number">1000</span>);</span><br><span class="line">        <span class="keyword">int</span> maxs= (<span class="keyword">int</span>) (max*<span class="number">1000</span>);</span><br><span class="line">        Random random = <span class="keyword">new</span> Random();</span><br><span class="line">        <span class="keyword">float</span> s = (random.nextInt(maxs)%(maxs-mins+<span class="number">1</span>) + mins) / <span class="number">1000</span>f;</span><br><span class="line">        <span class="keyword">return</span> s;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;highlight zephir&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span clas
      
    
    </summary>
    
      <category term="Java" scheme="https://qijianguo.com/categories/Java/"/>
    
    
      <category term="java" scheme="https://qijianguo.com/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>Linux命令[系统管理与维护命令]</title>
    <link href="https://qijianguo.com/Linux/2019/04/17/Linux%E5%91%BD%E4%BB%A4%5B%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86%E4%B8%8E%E7%BB%B4%E6%8A%A4%E5%91%BD%E4%BB%A4%5D.html"/>
    <id>https://qijianguo.com/Linux/2019/04/17/Linux命令[系统管理与维护命令].html</id>
    <published>2019-04-17T06:18:44.278Z</published>
    <updated>2019-04-17T07:46:02.028Z</updated>
    
    <content type="html"><![CDATA[<ul><li><p>ls: 列出工作目录所含的文件及子目录,  可以用dir代替ls<br>语法:   <strong><em>ls [选项] [路径或文件]</em></strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">-- 注释: 列出mnt目录下的文件及其子目录--</span><br><span class="line">&gt; ls /mnt</span><br><span class="line">apk-update-service  git-repo-for-redmine  license_capture  lost+found  mysql  newprojects  test</span><br><span class="line"></span><br><span class="line">-- 注释: 列出/mnt目录下文件及其子目录的详细信息--</span><br><span class="line">&gt; ls  -l  /mnt</span><br><span class="line">total 40</span><br><span class="line">drwxrwxrwx  2 root root  4096 Jul 22 09:56 apk-update-service</span><br><span class="line">drwxr-xr-x  5 root root  4096 Jun 27  2017 git-repo-for-redmine</span><br><span class="line">drwxr-xr-x  3 root root  4096 Jul 31  2017 license_capture</span><br><span class="line">drwx------  2 root root 16384 Jun  6  2017 lost+found</span><br><span class="line">drwxr-xr-x  3 root root  4096 Jun 10  2017 mysql</span><br><span class="line">drwxr-xr-x  6 root root  4096 Oct 10  2017 newprojects</span><br><span class="line">drwxr-xr-x 10 root root  4096 Nov  6  2017 test</span><br><span class="line"></span><br><span class="line">-- 注释: 显示mnt目录下的所有文件及其目录的详细信息, 并显示文件类型标记--</span><br><span class="line">&gt; ls -alF /mnt</span><br><span class="line"> ls -alF /mnt </span><br><span class="line">total 48</span><br><span class="line">drwxr-xr-x   9 root root  4096 Jul 31  2017 ./</span><br><span class="line">dr-xr-xr-x. 25 root root  4096 Jun  8 15:30 ../</span><br><span class="line">drwxrwxrwx   2 root root  4096 Jul 22 09:56 apk-update-service/</span><br><span class="line">drwxr-xr-x   5 root root  4096 Jun 27  2017 git-repo-for-redmine/</span><br><span class="line">drwxr-xr-x   3 root root  4096 Jul 31  2017 license_capture/</span><br><span class="line">drwx------   2 root root 16384 Jun  6  2017 lost+found/</span><br><span class="line">drwxr-xr-x   3 root root  4096 Jun 10  2017 mysql/</span><br><span class="line">drwxr-xr-x   6 root root  4096 Oct 10  2017 newprojects/</span><br><span class="line">drwxr-xr-x  10 root root  4096 Nov  6  2017 test/</span><br></pre></td></tr></table></figure></li><li><p>pwd: 显示当前的工作目录, 即当前所在的工作目录的绝对路径名称<br>语法: <strong><em>pwd</em></strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; pwd</span><br><span class="line">/root</span><br></pre></td></tr></table></figure></li><li><p>cd: 改变当前的工作目录<br>语法: cd  [目录名]</p></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; cd  /mnt</span><br><span class="line">&gt; pwd</span><br><span class="line">/mnt</span><br></pre></td></tr></table></figure><p>语法: <strong>cd</strong> 返回根目录中<br>语法: <strong>cd - </strong>返回上次调整的目录中</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt; pwd    -- 当前目录</span><br><span class="line">/mnt       </span><br><span class="line">&gt; cd       -- 跳到根目录</span><br><span class="line">/root</span><br><span class="line">&gt; cd -     -- 跳到最近一次跳转的目录中</span><br><span class="line">/mnt</span><br></pre></td></tr></table></figure><ul><li>date: 显示或修改系统时间和日期(只有超级用户才能使用date命令修改时间, 一般用户只能用date命令显示时间)<br>语法: <strong><em>date [选项] ‘+时间格式’</em></strong></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; date &apos;+%y-%m-%d&apos;         </span><br><span class="line">18-10-08</span><br></pre></td></tr></table></figure><p>语法: <strong><em>date ‘%x’ 或  ‘%X’</em></strong> 显示日期/时间</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; date &apos;+today is %x %X&apos;</span><br><span class="line">today is 10/08/2018 02:21:41 PM</span><br></pre></td></tr></table></figure><p>语法: <strong><em>date -s yyyyMMdd HH:mm:ss</em></strong>或 <strong><em>date -s yyyyMMdd</em></strong> 或 <strong><em>date  -s HH:mm:ss</em></strong> 设置系统时间</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; date -s &quot;20180715 17:25&quot;</span><br><span class="line">Tue Jul 15 17:25:00 CST 2018</span><br></pre></td></tr></table></figure><p>语法: <strong><em>date -d “num years/months/days ago” %y-%m-%d</em></strong>当前时间的前年/月/日的时间<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; date +%y-%m-%d                 </span><br><span class="line">18-10-08</span><br><span class="line">&gt; date -d &quot;10 days ago&quot; +%y-%m-%d</span><br><span class="line">18-09-28</span><br></pre></td></tr></table></figure></p><ul><li>clear : 清除屏幕信息<br>语法: clear</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; clear</span><br></pre></td></tr></table></figure><ul><li><p>man:  显示命令的帮助信息<br>语法: <strong><em>man [命令名称]</em></strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&gt; man  clear</span><br><span class="line"></span><br><span class="line">clear(1)                                                              clear(1)</span><br><span class="line"></span><br><span class="line">NAME</span><br><span class="line">       clear - clear the terminal screen</span><br><span class="line"></span><br><span class="line">SYNOPSIS</span><br><span class="line">       clear</span><br><span class="line"></span><br><span class="line">DESCRIPTION</span><br><span class="line">       clear clears your screen if this is possible.  It looks in the environment for the terminal type and then in the terminfo database to figure out how to clear the screen.</span><br><span class="line"></span><br><span class="line">       clear ignores any command-line parameters that may be present.</span><br><span class="line"></span><br><span class="line">SEE ALSO</span><br><span class="line">       tput(1), terminfo(5)</span><br><span class="line"></span><br><span class="line">       This describes ncurses version 5.7 (patch 20090207).</span><br><span class="line"></span><br><span class="line">                                                                      clear(1)</span><br><span class="line">(END)</span><br></pre></td></tr></table></figure></li><li><p>who: 显示当前登录到系统的用户<br>语法: who</p></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&gt; who</span><br><span class="line">root     pts/0        2018-10-08 13:26 (203.110.178.83)</span><br><span class="line">-- 注释: 输出格式为</span><br><span class="line">名称 [状态] 终端 时间 [活动] [进程标识]（主机名）</span><br><span class="line">    * 名称：用户的登录名。</span><br><span class="line">    * 状态：表明终端是否对用户都是可写的。</span><br><span class="line">    * 终端：类似于pts/1、pts/2等，此终端标识在/dev目录中可找到。</span><br><span class="line">    * 时间：用户登录系统的时间。</span><br><span class="line">    * 活动：某个用户在自己的终端上最后一次活动发生以来到现在的时间，如果此项是个“.”，就表示一分钟内的终端活动；如果终端保持静止已经超过24小时或自从系统启动以来还没有被使用过，那么此项标记为“old”。</span><br><span class="line">    * 进程标识：用户登录shell的进程id。</span><br><span class="line">    * 主机名：登录到Linux系统上的客户端机器标识。</span><br><span class="line">--</span><br><span class="line"></span><br><span class="line">-- 注释: 查看运行级别-- </span><br><span class="line">&gt; who -r  </span><br><span class="line">         run-level 3  2017-07-15 15:26</span><br><span class="line">&gt; who  -w</span><br><span class="line">root     + pts/0        2018-10-08 13:26 (203.110.178.83)</span><br><span class="line"></span><br><span class="line">&gt;  who -buT</span><br><span class="line">           system boot  2017-07-15 15:26</span><br><span class="line">root     + pts/0        2018-10-08 13:26   .          2887 (203.110.178.83)</span><br></pre></td></tr></table></figure><ul><li>free: 显示内存状态(系统物理内存、虚拟内存、共享内存和系统缓存)<br>语法: free [选项] [-s (间隔秒数)]<figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; free</span><br><span class="line">             total       used       free     shared    buffers     cached</span><br><span class="line">Mem:      <span class="number"> 8061108 </span>  <span class="number"> 7875964 </span>   <span class="number"> 185144 </span>   <span class="number"> 146236 </span>   <span class="number"> 201324 </span>    558792</span><br><span class="line">-/+ buffers/cache:   <span class="number"> 7115848 </span>    945260</span><br><span class="line">Swap:           <span class="number"> 0 </span>        <span class="number"> 0 </span>         0</span><br></pre></td></tr></table></figure></li></ul><p><img src="https://img-blog.csdn.net/20181008150804369?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="free参数说明"></p><ul><li>ps: 系统进程瞬间的运行状态, 非常常用, 可通过组合选项(-ef、aux)准确定位系统运行的状态<br>语法: <strong><em>ps [选项]</em></strong><br><img src="https://img-blog.csdn.net/20181008151130846?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="ps参数"></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&gt; ps</span><br><span class="line">  PID TTY          TIME CMD</span><br><span class="line"> 2887 pts/0    00:00:00 zsh</span><br><span class="line">24884 pts/0    00:00:00 ps</span><br><span class="line"></span><br><span class="line">-- 注释: (输出说明)</span><br><span class="line">pid: 进程的标识符</span><br><span class="line">tty: 进程所属的终端控制台</span><br><span class="line">time: 进程所使用的总的cpu时间</span><br><span class="line">cmd: 列出正在执行的命令行</span><br><span class="line">-- </span><br><span class="line"></span><br><span class="line">&gt; ps -aux </span><br><span class="line">&gt; ps -ef</span><br></pre></td></tr></table></figure><ul><li>top: 类型windows中的任务管理器, 能够实时显示进程的资源占用情况, 可以按照cpu使用情况或内存占用情况进行排序<br><img src="https://img-blog.csdn.net/20181008152506209?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="top参数"></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">&gt; top</span><br><span class="line">top - 15:31:25 up 450 days, 4 min,  1 user,  load average: 0.00, 0.00, 0.00</span><br><span class="line">Tasks: 403 total,   1 running, 402 sleeping,   0 stopped,   0 zombie</span><br><span class="line">Cpu(s):  0.9%us,  0.4%sy,  0.0%ni, 98.7%id,  0.0%wa,  0.0%hi,  0.0%si,  0.0%st</span><br><span class="line">Mem:   8061108k total,  7873600k used,   187508k free,   201444k buffers</span><br><span class="line">Swap:        0k total,        0k used,        0k free,   538576k cached</span><br><span class="line"></span><br><span class="line">  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND                                                                                                                                                           </span><br><span class="line"> 3687 git       20   0 1460m 760m  11m S  1.0  9.7 509:44.69 bundle                                                                                                                                                             </span><br><span class="line">15635 gitlab-r  20   0  241m  12m  912 S  1.0  0.2 366:27.19 redis-server </span><br><span class="line"></span><br><span class="line">-- 注释: </span><br><span class="line">&gt; 第一行:  </span><br><span class="line">15:31:25 当前系统的时间；</span><br><span class="line">up 450 days 表示系统已启动450天4分钟；</span><br><span class="line">1 user当前在线的用户数为1人；</span><br><span class="line">load average:0.00,0.00,0.00表示系统平均负载,3个数分别为1分钟/5分钟/15分钟前到现在的系统平均负载.</span><br><span class="line"></span><br><span class="line">&gt; 第二、三行</span><br><span class="line">Tasks：403 total总共有403个进程；</span><br><span class="line">1 running： 1个运行</span><br><span class="line">402 sleeping：402个处于休眠状态</span><br><span class="line">0 stopped：0个停止</span><br><span class="line">0 zombie：0个僵死</span><br><span class="line">Cpu(s)：0.9% us：表示用戶進程占用CPU的百分比。</span><br><span class="line">0.1% sy：系统进程占用CPU的百分比。</span><br><span class="line">0.0% ni：用户进程空间內改变过优先级的进程占用CPU的百分比。</span><br><span class="line">99.3% id：空闲CPU占用的百分比。</span><br><span class="line">0.2% wa：等待输入、输出的进程占用CPU的百分比。</span><br><span class="line"></span><br><span class="line">&gt; 最后两行</span><br><span class="line">Mem：4059952k total：系統的物理內存大小。</span><br><span class="line">4009540k used：已經使用的物理內存大小。</span><br><span class="line">50412k free：目前空余內存大小。</span><br><span class="line">468964k buffers：用作內核緩沖區的內存大小。</span><br><span class="line">Swap：8193108k total：交換分區內存大小。</span><br><span class="line">0k used：已經使用的交換分區大小。</span><br><span class="line">8193108k free：空閑的交換分區大小。</span><br><span class="line">2320396k cached：緩存大小。</span><br><span class="line"></span><br><span class="line">&gt; 进程信息区</span><br><span class="line">進程信息區</span><br><span class="line"></span><br><span class="line">進程信息區顯示了每個進程的運行狀態，我們先來看一下每列輸出的含義。</span><br><span class="line"></span><br><span class="line">PID：进程的id。</span><br><span class="line">USER：进程所有者的用户名。</span><br><span class="line">pr：进程优先级。</span><br><span class="line">NI：nice值。负值表示高优先级，正值表示低优先级。</span><br><span class="line">VIRT：进程使用的虚拟内存总量，单位KB。VIRT=SWAP+RES。</span><br><span class="line">RES：进程使用的、未被换出的物理內存大小，单位KB。RES=CODE+DATA，其中，CODE为执行代码占用的物理內存大小，DATA为数据占用的內存大小。</span><br><span class="line">SHR：共享內存大小，单位KB。</span><br><span class="line">S：进程状态，D表示不可中断的睡眠状态，R表示运行状态，S表示睡眠状态，T表示跟踪/停止，Z表示僵死进程。</span><br><span class="line">%CPU：上次更新到现在的CPU时间占用百分比。</span><br><span class="line">%MEM：进程占用的物理內存百分比。</span><br><span class="line">TIME+：进程總計使用的CPU时间，单位为1/100秒。</span><br><span class="line">COMMAND：正在运行进程的命令名或者命令路经。</span><br><span class="line">--</span><br></pre></td></tr></table></figure><ul><li>find: 查找文件<br>语法: find [路径]  </li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">-- 注释: 查找大于100M的文件, 但是这样无法看文件的大小/属性等 --</span><br><span class="line">&gt; find . -type f -size +100M</span><br><span class="line">./Downloads/root@cq.hbjk.com.cn</span><br><span class="line">./Downloads/jdk-8u131-linux-x64.rpm</span><br><span class="line"></span><br><span class="line">-- 注释: 查找大于100M的文件, 可以看到文件的大小/属性 --</span><br><span class="line">&gt;  find . -type f -size +100M -print0 | xargs -0 ls -l</span><br><span class="line">-rw-r--r-- 1 root root 169983496 Mar 16  2017 ./Downloads/jdk-8u131-linux-x64.rpm</span><br><span class="line">-rw-r--r-- 1 root root 169983496 Oct 18  2017 ./Downloads/root@cq.hbjk.com.cn</span><br><span class="line"></span><br><span class="line">-- 注释: 查找大于100M的文件, 只看大小 --</span><br><span class="line">&gt; find . -type f -size +100M  -print0 | xargs -0 du -h</span><br><span class="line">163M./Downloads/root@cq.hbjk.com.cn</span><br><span class="line">163M./Downloads/jdk-8u131-linux-x64.rpm</span><br><span class="line"></span><br><span class="line">-- 注释: 查找大于100M的文件, 只看大小,  并排序 --</span><br><span class="line">&gt; find . -type f -size +100M -print0 | xargs -0 du -h | sort -nr</span><br><span class="line">163M./Downloads/root@cq.hbjk.com.cn</span><br><span class="line">163M./Downloads/jdk-8u131-linux-x64.rpm</span><br></pre></td></tr></table></figure><ul><li>du: 查看当前指定文件或目录(会递归显示子目录)占用磁盘空间大小</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">-- 注释: 查询depth为1的所有文件, 并显示文件大小--</span><br><span class="line">&gt; du -h --max-depth=1</span><br><span class="line">69M./.m2</span><br><span class="line">60K./.cache</span><br><span class="line">1.4G./Downloads</span><br><span class="line">12K./.oracle_jre_usage</span><br><span class="line">8.0K./.pki</span><br><span class="line">170M./.nvm</span><br><span class="line">208M./.npm</span><br><span class="line">3.6M./.gem</span><br><span class="line">8.0K./.pip</span><br><span class="line">112K./tmp</span><br><span class="line">28M./.bundle</span><br><span class="line">56K./.java</span><br><span class="line">276K./.ssh</span><br><span class="line">4.9M./.oh-my-zsh</span><br><span class="line">296K./.vue-templates</span><br><span class="line">1.9G.</span><br><span class="line"></span><br><span class="line">-- 注释: 查询depth为1的所有文件, 并将文件大小单位用M, 并排序 --</span><br><span class="line">&gt; du -hm --max-depth=1 | sort -n</span><br><span class="line">1./.cache</span><br><span class="line">1./.java</span><br><span class="line">1./.oracle_jre_usage</span><br><span class="line">1./.pip</span><br><span class="line">1./.pki</span><br><span class="line">1./.ssh</span><br><span class="line">1./tmp</span><br><span class="line">1./.vue-templates</span><br><span class="line">4./.gem</span><br><span class="line">5./.oh-my-zsh</span><br><span class="line">28./.bundle</span><br><span class="line">69./.m2</span><br><span class="line">170./.nvm</span><br><span class="line">208./.npm</span><br><span class="line">1400./Downloads</span><br><span class="line">1883.</span><br><span class="line"></span><br><span class="line">-- 注释: 查询depth为1的所有文件, 并将文件大小单位用M, 排序, 取前12个--</span><br><span class="line">&gt;du -hm --max-depth=2 | sort -nr | head -12</span><br><span class="line">1883.</span><br><span class="line">1400./Downloads</span><br><span class="line">383./Downloads/ruby-2.3.3</span><br><span class="line">377./Downloads/ruby-2.4.1</span><br><span class="line">208./.npm</span><br><span class="line">170./.nvm</span><br><span class="line">167./.nvm/versions</span><br><span class="line">73./Downloads/redis-4.0.1</span><br><span class="line">69./.m2/repository</span><br><span class="line">69./.m2</span><br><span class="line">47./Downloads/zookeeper-3.4.9</span><br><span class="line">45./Downloads/kafka_2.11-0.11.0.0</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ul&gt;
&lt;li&gt;&lt;p&gt;ls: 列出工作目录所含的文件及子目录,  可以用dir代替ls&lt;br&gt;语法:   &lt;strong&gt;&lt;em&gt;ls [选项] [路径或文件]&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;
      
    
    </summary>
    
      <category term="Linux" scheme="https://qijianguo.com/categories/Linux/"/>
    
    
      <category term="linux" scheme="https://qijianguo.com/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>Arrays.asList()返回ArrayList调用remove()或add()出现 java.lang.UnsupportedOperationException异常</title>
    <link href="https://qijianguo.com/Java/2019/04/17/Arrays.asList()%E8%BF%94%E5%9B%9EArrayList%E8%B0%83%E7%94%A8remove()%E6%88%96add()%E5%87%BA%E7%8E%B0%20java.lang.UnsupportedOperationException%E5%BC%82%E5%B8%B8.html"/>
    <id>https://qijianguo.com/Java/2019/04/17/Arrays.asList()返回ArrayList调用remove()或add()出现 java.lang.UnsupportedOperationException异常.html</id>
    <published>2019-04-17T06:18:44.274Z</published>
    <updated>2019-04-17T07:44:48.574Z</updated>
    
    <content type="html"><![CDATA[<ul><li>Iterator和ListIterator可以对集合遍历同时可以做remove操作, 但在调用Arrays.asList()转化为ArrayList的过程中并不能调用remove()<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> class Test &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main(<span class="keyword">String</span>[] args) &#123;</span><br><span class="line">        List&lt;<span class="keyword">String</span>&gt; list = test();</span><br><span class="line">        Iterator&lt;<span class="keyword">String</span>&gt; it = list.iterator();</span><br><span class="line">        <span class="keyword">while</span> (it.hasNext()) &#123;</span><br><span class="line">            <span class="keyword">String</span> <span class="built_in">str</span> = it.next();</span><br><span class="line">            System.out.<span class="built_in">println</span>(<span class="built_in">str</span>);</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">str</span>.equals(<span class="string">"a"</span>)) &#123;</span><br><span class="line">                it.remove();     <span class="comment">// <span class="doctag">TODO:</span> 在这出错了!!! java.lang.UnsupportedOperationException</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> List&lt;<span class="keyword">String</span>&gt; test() &#123;</span><br><span class="line">        <span class="comment">// <span class="doctag">TODO:</span> 返回的是java.util.Arrays$ArrayList</span></span><br><span class="line">        List&lt;<span class="keyword">String</span>&gt; list = Arrays.asList(<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>);  </span><br><span class="line">        list.<span class="built_in">sort</span>( (e1, e2 ) -&gt; e1.compareTo(e2) );</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>异常:<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Exception <span class="keyword">in</span> thread <span class="string">"main"</span> java<span class="selector-class">.lang</span><span class="selector-class">.UnsupportedOperationException</span></span><br><span class="line">at java<span class="selector-class">.util</span><span class="selector-class">.AbstractList</span><span class="selector-class">.remove</span>(AbstractList<span class="selector-class">.java</span>:<span class="number">161</span>)</span><br><span class="line">at java<span class="selector-class">.util</span><span class="selector-class">.AbstractList</span><span class="variable">$Itr</span>.remove(AbstractList<span class="selector-class">.java</span>:<span class="number">374</span>)</span><br><span class="line">at lambda.main(lambda<span class="selector-class">.java</span>:<span class="number">18</span>)</span><br></pre></td></tr></table></figure></p><p>解决方式:</p><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">private</span> static <span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; test() &#123;</span><br><span class="line">       <span class="comment">// <span class="doctag">TODO:</span> 转化成java.util.ArrayList</span></span><br><span class="line"><span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; <span class="built_in">list</span> = <span class="literal">new</span> ArrayList(Arrays.asList(<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>));</span><br><span class="line">       <span class="built_in">list</span>.sort( (e1, e2 ) -&gt; e1.compareTo(e2) );</span><br><span class="line">       <span class="keyword">return</span> <span class="built_in">list</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>什么原因呢? Arrays.asList()返回的是ArrayList没错, 但是返回的ArrayList是Array的一个内部类（java.util.Arrays$ArrayList）, 源码贴到下面了， 观察一下, 根本没有java.util.ArrayList类中的add()、remove()方法, 调用remove()方法当然出错啦！</p><figure class="highlight plain"><figcaption><span>源码]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">    public static &lt;T&gt; List&lt;T&gt; asList(T... a) &#123;</span><br><span class="line">        return new ArrayList&lt;&gt;(a);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private static class ArrayList&lt;E&gt; extends AbstractList&lt;E&gt;</span><br><span class="line">        implements RandomAccess, java.io.Serializable</span><br><span class="line">    &#123;</span><br><span class="line">        private static final long serialVersionUID = -2764017481108945198L;</span><br><span class="line">        private final E[] a;</span><br><span class="line"></span><br><span class="line">        ArrayList(E[] array) &#123;</span><br><span class="line">            a = Objects.requireNonNull(array);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        public int size() &#123;</span><br><span class="line">            return a.length;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        public Object[] toArray() &#123;</span><br><span class="line">            return a.clone();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        @SuppressWarnings(&quot;unchecked&quot;)</span><br><span class="line">        public &lt;T&gt; T[] toArray(T[] a) &#123;</span><br><span class="line">            int size = size();</span><br><span class="line">            if (a.length &lt; size)</span><br><span class="line">                return Arrays.copyOf(this.a, size,</span><br><span class="line">                                     (Class&lt;? extends T[]&gt;) a.getClass());</span><br><span class="line">            System.arraycopy(this.a, 0, a, 0, size);</span><br><span class="line">            if (a.length &gt; size)</span><br><span class="line">                a[size] = null;</span><br><span class="line">            return a;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        public E get(int index) &#123;</span><br><span class="line">            return a[index];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        public E set(int index, E element) &#123;</span><br><span class="line">            E oldValue = a[index];</span><br><span class="line">            a[index] = element;</span><br><span class="line">            return oldValue;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        public int indexOf(Object o) &#123;</span><br><span class="line">            E[] a = this.a;</span><br><span class="line">            if (o == null) &#123;</span><br><span class="line">                for (int i = 0; i &lt; a.length; i++)</span><br><span class="line">                    if (a[i] == null)</span><br><span class="line">                        return i;</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                for (int i = 0; i &lt; a.length; i++)</span><br><span class="line">                    if (o.equals(a[i]))</span><br><span class="line">                        return i;</span><br><span class="line">            &#125;</span><br><span class="line">            return -1;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        public boolean contains(Object o) &#123;</span><br><span class="line">            return indexOf(o) != -1;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        public Spliterator&lt;E&gt; spliterator() &#123;</span><br><span class="line">            return Spliterators.spliterator(a, Spliterator.ORDERED);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        public void forEach(Consumer&lt;? super E&gt; action) &#123;</span><br><span class="line">            Objects.requireNonNull(action);</span><br><span class="line">            for (E e : a) &#123;</span><br><span class="line">                action.accept(e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        public void replaceAll(UnaryOperator&lt;E&gt; operator) &#123;</span><br><span class="line">            Objects.requireNonNull(operator);</span><br><span class="line">            E[] a = this.a;</span><br><span class="line">            for (int i = 0; i &lt; a.length; i++) &#123;</span><br><span class="line">                a[i] = operator.apply(a[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        public void sort(Comparator&lt;? super E&gt; c) &#123;</span><br><span class="line">            Arrays.sort(a, c);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ul&gt;
&lt;li&gt;Iterator和ListIterator可以对集合遍历同时可以做remove操作, 但在调用Arrays.asList()转化为ArrayList的过程中并不能调用remove()&lt;figure class=&quot;highlight processing&quot;&gt;&lt;ta
      
    
    </summary>
    
      <category term="Java" scheme="https://qijianguo.com/categories/Java/"/>
    
    
      <category term="java" scheme="https://qijianguo.com/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>Another app is currently holding the yum lock; waiting for it to exit...</title>
    <link href="https://qijianguo.com/Linux/2019/04/17/Another%20app%20is%20currently%20holding%20the%20yum%20lock;%20waiting%20for%20it%20to%20exit....html"/>
    <id>https://qijianguo.com/Linux/2019/04/17/Another app is currently holding the yum lock; waiting for it to exit....html</id>
    <published>2019-04-17T06:18:44.271Z</published>
    <updated>2019-04-17T07:44:41.466Z</updated>
    
    <content type="html"><![CDATA[<ul><li>yum 安装时出现如下错误:</li></ul><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost gitrepo]<span class="comment">#  yum install gitlab-ce</span></span><br><span class="line">Loaded plugins: fastestmirror, langpacks</span><br><span class="line">Existing lock /var/<span class="built_in">run</span>/yum.pid: another <span class="keyword">copy</span> <span class="keyword">is</span> <span class="built_in">running</span> <span class="keyword">as</span> pid <span class="number">6807.</span></span><br><span class="line">Another app <span class="keyword">is</span> currently holding <span class="keyword">the</span> yum lock; waiting <span class="keyword">for</span> <span class="keyword">it</span> <span class="keyword">to</span> <span class="keyword">exit</span>...</span><br><span class="line">  The other <span class="built_in">application</span> <span class="keyword">is</span>: PackageKit</span><br><span class="line">    Memory : <span class="number">120</span> M RSS (<span class="number">532</span> MB VSZ)</span><br><span class="line">    Started: Tue Oct  <span class="number">9</span> <span class="number">18</span>:<span class="number">18</span>:<span class="number">18</span> <span class="number">2018</span> - <span class="number">18</span>:<span class="number">17</span> ago</span><br><span class="line">    State  : Sleeping, pid: <span class="number">6807</span></span><br><span class="line">Another app <span class="keyword">is</span> currently holding <span class="keyword">the</span> yum lock; waiting <span class="keyword">for</span> <span class="keyword">it</span> <span class="keyword">to</span> <span class="keyword">exit</span>...</span><br><span class="line">  The other <span class="built_in">application</span> <span class="keyword">is</span>: PackageKit</span><br><span class="line">    Memory : <span class="number">120</span> M RSS (<span class="number">532</span> MB VSZ)</span><br><span class="line">    Started: Tue Oct  <span class="number">9</span> <span class="number">18</span>:<span class="number">18</span>:<span class="number">18</span> <span class="number">2018</span> - <span class="number">18</span>:<span class="number">19</span> ago</span><br><span class="line">    State  : Sleeping, pid: <span class="number">6807</span></span><br><span class="line">Another app <span class="keyword">is</span> currently holding <span class="keyword">the</span> yum lock; waiting <span class="keyword">for</span> <span class="keyword">it</span> <span class="keyword">to</span> <span class="keyword">exit</span>...</span><br><span class="line">  The other <span class="built_in">application</span> <span class="keyword">is</span>: PackageKit</span><br><span class="line">    Memory : <span class="number">120</span> M RSS (<span class="number">532</span> MB VSZ)</span><br><span class="line">    Started: Tue Oct  <span class="number">9</span> <span class="number">18</span>:<span class="number">18</span>:<span class="number">18</span> <span class="number">2018</span> - <span class="number">18</span>:<span class="number">21</span> ago</span><br><span class="line">    State  : Sleeping, pid: <span class="number">6807</span></span><br></pre></td></tr></table></figure><ul><li>原因: yum只能支持一个例程运行，所以如果有一个例程已经在运行，其他的必须等待该进程退出释放lock。出现这种情况时，可以用以下命令来恢复：</li></ul><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">rm</span> -f /<span class="keyword">var</span>/<span class="keyword">run</span>/yum.pid</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ul&gt;
&lt;li&gt;yum 安装时出现如下错误:&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight applescript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;
      
    
    </summary>
    
      <category term="Linux" scheme="https://qijianguo.com/categories/Linux/"/>
    
    
      <category term="linux" scheme="https://qijianguo.com/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>poi-tl生成Word</title>
    <link href="https://qijianguo.com/Java/2019/04/17/poi-tl%E7%94%9F%E6%88%90Word.html"/>
    <id>https://qijianguo.com/Java/2019/04/17/poi-tl生成Word.html</id>
    <published>2019-04-17T06:18:44.269Z</published>
    <updated>2019-04-17T07:46:47.547Z</updated>
    
    <content type="html"><![CDATA[<ul><li><p>文档: <a href="http://deepoove.com/poi-tl/" target="_blank" rel="noopener">http://deepoove.com/poi-tl/</a></p></li><li><p>添加依赖</p></li></ul><ol><li>poi 版本必须大于3.14(我用的是3.17)</li><li>ooxml 版本必须大于1.2(我用的是1.3)<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 模版引擎用到的jar包 --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.poi<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>poi<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   </span><br><span class="line">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.deepoove<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>poi-tl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.poi<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>poi-ooxml<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.poi<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>poi-scratchpad<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.poi<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>ooxml-schemas<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><p>注意: 你可能遇到以下几个问题</p><ul><li>poi版本过低：使用 poi 3.14 以上 <figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Exception <span class="keyword">in</span> thread <span class="string">"main"</span> java<span class="selector-class">.lang</span><span class="selector-class">.NoClassDefFoundError</span>: org/apache/poi/POIXMLTypeLoader</span><br><span class="line">at org<span class="selector-class">.openxmlformats</span><span class="selector-class">.schemas</span><span class="selector-class">.wordprocessingml</span><span class="selector-class">.x2006</span><span class="selector-class">.main</span><span class="selector-class">.DocumentDocument</span><span class="variable">$Factory</span>.parse(Unknown Source)</span><br><span class="line">at org<span class="selector-class">.apache</span><span class="selector-class">.poi</span><span class="selector-class">.xwpf</span><span class="selector-class">.usermodel</span><span class="selector-class">.XWPFDocument</span><span class="selector-class">.onDocumentRead</span>(XWPFDocument<span class="selector-class">.java</span>:<span class="number">136</span>)</span><br><span class="line">at org<span class="selector-class">.apache</span><span class="selector-class">.poi</span><span class="selector-class">.POIXMLDocument</span><span class="selector-class">.load</span>(POIXMLDocument<span class="selector-class">.java</span>:<span class="number">166</span>)</span><br><span class="line">at org<span class="selector-class">.apache</span><span class="selector-class">.poi</span><span class="selector-class">.xwpf</span><span class="selector-class">.usermodel</span><span class="selector-class">.XWPFDocument</span>.&lt;init&gt;(XWPFDocument<span class="selector-class">.java</span>:<span class="number">125</span>)</span><br><span class="line">at com<span class="selector-class">.deepoove</span><span class="selector-class">.poi</span><span class="selector-class">.NiceXWPFDocument</span>.&lt;init&gt;(NiceXWPFDocument<span class="selector-class">.java</span>:<span class="number">85</span>)</span><br><span class="line">at com<span class="selector-class">.deepoove</span><span class="selector-class">.poi</span><span class="selector-class">.XWPFTemplate</span><span class="selector-class">.compile</span>(XWPFTemplate<span class="selector-class">.java</span>:<span class="number">129</span>)</span><br><span class="line">at com<span class="selector-class">.deepoove</span><span class="selector-class">.poi</span><span class="selector-class">.XWPFTemplate</span><span class="selector-class">.compile</span>(XWPFTemplate<span class="selector-class">.java</span>:<span class="number">110</span>)</span><br><span class="line">at com<span class="selector-class">.deepoove</span><span class="selector-class">.poi</span><span class="selector-class">.XWPFTemplate</span><span class="selector-class">.compile</span>(XWPFTemplate<span class="selector-class">.java</span>:<span class="number">78</span>)</span><br><span class="line">at com<span class="selector-class">.deepoove</span><span class="selector-class">.poi</span><span class="selector-class">.XWPFTemplate</span><span class="selector-class">.compile</span>(XWPFTemplate<span class="selector-class">.java</span>:<span class="number">74</span>)</span><br><span class="line">at core<span class="selector-class">.JingzhouDayReportDaemon</span><span class="selector-class">.saveData2Word</span>(JingzhouDayReportDaemon<span class="selector-class">.java</span>:<span class="number">187</span>)</span><br><span class="line">at core<span class="selector-class">.JingzhouDayReportDaemon</span><span class="selector-class">.run</span>(JingzhouDayReportDaemon<span class="selector-class">.java</span>:<span class="number">45</span>)</span><br><span class="line">at core<span class="selector-class">.JingzhouDayReportDaemon</span><span class="selector-class">.main</span>(JingzhouDayReportDaemon<span class="selector-class">.java</span>:<span class="number">289</span>)</span><br><span class="line">Caused by: java<span class="selector-class">.lang</span><span class="selector-class">.ClassNotFoundException</span>: org<span class="selector-class">.apache</span><span class="selector-class">.poi</span><span class="selector-class">.POIXMLTypeLoader</span></span><br><span class="line">at java<span class="selector-class">.net</span><span class="selector-class">.URLClassLoader</span><span class="selector-class">.findClass</span>(URLClassLoader<span class="selector-class">.java</span>:<span class="number">381</span>)</span><br><span class="line">at java<span class="selector-class">.lang</span><span class="selector-class">.ClassLoader</span><span class="selector-class">.loadClass</span>(ClassLoader<span class="selector-class">.java</span>:<span class="number">424</span>)</span><br><span class="line">at sun<span class="selector-class">.misc</span><span class="selector-class">.Launcher</span><span class="variable">$AppClassLoader</span>.loadClass(Launcher<span class="selector-class">.java</span>:<span class="number">331</span>)</span><br><span class="line">at java<span class="selector-class">.lang</span><span class="selector-class">.ClassLoader</span><span class="selector-class">.loadClass</span>(ClassLoader<span class="selector-class">.java</span>:<span class="number">357</span>)</span><br><span class="line">... <span class="number">12</span> more</span><br></pre></td></tr></table></figure></li></ul><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line">/-- Encapsulated exception ------------\</span><br><span class="line">java<span class="selector-class">.lang</span><span class="selector-class">.NoClassDefFoundError</span>: org/apache/poi/UnsupportedFileFormatException</span><br><span class="line">at java<span class="selector-class">.lang</span><span class="selector-class">.ClassLoader</span><span class="selector-class">.defineClass1</span>(Native Method)</span><br><span class="line">at java<span class="selector-class">.lang</span><span class="selector-class">.ClassLoader</span><span class="selector-class">.defineClass</span>(ClassLoader<span class="selector-class">.java</span>:<span class="number">763</span>)</span><br><span class="line">at java<span class="selector-class">.security</span><span class="selector-class">.SecureClassLoader</span><span class="selector-class">.defineClass</span>(SecureClassLoader<span class="selector-class">.java</span>:<span class="number">142</span>)</span><br><span class="line">at org<span class="selector-class">.apache</span><span class="selector-class">.catalina</span><span class="selector-class">.loader</span><span class="selector-class">.WebappClassLoaderBase</span><span class="selector-class">.findClassInternal</span>(WebappClassLoaderBase<span class="selector-class">.java</span>:<span class="number">3205</span>)</span><br><span class="line">at org<span class="selector-class">.apache</span><span class="selector-class">.catalina</span><span class="selector-class">.loader</span><span class="selector-class">.WebappClassLoaderBase</span><span class="selector-class">.findClass</span>(WebappClassLoaderBase<span class="selector-class">.java</span>:<span class="number">1373</span>)</span><br><span class="line">at org<span class="selector-class">.apache</span><span class="selector-class">.catalina</span><span class="selector-class">.loader</span><span class="selector-class">.WebappClassLoaderBase</span><span class="selector-class">.loadClass</span>(WebappClassLoaderBase<span class="selector-class">.java</span>:<span class="number">1861</span>)</span><br><span class="line">at org<span class="selector-class">.apache</span><span class="selector-class">.catalina</span><span class="selector-class">.loader</span><span class="selector-class">.WebappClassLoaderBase</span><span class="selector-class">.loadClass</span>(WebappClassLoaderBase<span class="selector-class">.java</span>:<span class="number">1735</span>)</span><br><span class="line">at java<span class="selector-class">.lang</span><span class="selector-class">.ClassLoader</span><span class="selector-class">.defineClass1</span>(Native Method)</span><br><span class="line">at java<span class="selector-class">.lang</span><span class="selector-class">.ClassLoader</span><span class="selector-class">.defineClass</span>(ClassLoader<span class="selector-class">.java</span>:<span class="number">763</span>)</span><br><span class="line">at java<span class="selector-class">.security</span><span class="selector-class">.SecureClassLoader</span><span class="selector-class">.defineClass</span>(SecureClassLoader<span class="selector-class">.java</span>:<span class="number">142</span>)</span><br><span class="line">at org<span class="selector-class">.apache</span><span class="selector-class">.catalina</span><span class="selector-class">.loader</span><span class="selector-class">.WebappClassLoaderBase</span><span class="selector-class">.findClassInternal</span>(WebappClassLoaderBase<span class="selector-class">.java</span>:<span class="number">3205</span>)</span><br><span class="line">at org<span class="selector-class">.apache</span><span class="selector-class">.catalina</span><span class="selector-class">.loader</span><span class="selector-class">.WebappClassLoaderBase</span><span class="selector-class">.findClass</span>(WebappClassLoaderBase<span class="selector-class">.java</span>:<span class="number">1373</span>)</span><br><span class="line">at org<span class="selector-class">.apache</span><span class="selector-class">.catalina</span><span class="selector-class">.loader</span><span class="selector-class">.WebappClassLoaderBase</span><span class="selector-class">.loadClass</span>(WebappClassLoaderBase<span class="selector-class">.java</span>:<span class="number">1861</span>)</span><br><span class="line">at org<span class="selector-class">.apache</span><span class="selector-class">.catalina</span><span class="selector-class">.loader</span><span class="selector-class">.WebappClassLoaderBase</span><span class="selector-class">.loadClass</span>(WebappClassLoaderBase<span class="selector-class">.java</span>:<span class="number">1735</span>)</span><br><span class="line">at org<span class="selector-class">.apache</span><span class="selector-class">.poi</span><span class="selector-class">.openxml4j</span><span class="selector-class">.opc</span><span class="selector-class">.OPCPackage</span><span class="selector-class">.open</span>(OPCPackage<span class="selector-class">.java</span>:<span class="number">324</span>)</span><br><span class="line">at org<span class="selector-class">.apache</span><span class="selector-class">.poi</span><span class="selector-class">.util</span><span class="selector-class">.PackageHelper</span><span class="selector-class">.open</span>(PackageHelper<span class="selector-class">.java</span>:<span class="number">37</span>)</span><br><span class="line">at org<span class="selector-class">.apache</span><span class="selector-class">.poi</span><span class="selector-class">.xwpf</span><span class="selector-class">.usermodel</span><span class="selector-class">.XWPFDocument</span>.&lt;init&gt;(XWPFDocument<span class="selector-class">.java</span>:<span class="number">116</span>)</span><br><span class="line">at com<span class="selector-class">.deepoove</span><span class="selector-class">.poi</span><span class="selector-class">.NiceXWPFDocument</span>.&lt;init&gt;(NiceXWPFDocument<span class="selector-class">.java</span>:<span class="number">85</span>)</span><br><span class="line">at com<span class="selector-class">.deepoove</span><span class="selector-class">.poi</span><span class="selector-class">.XWPFTemplate</span><span class="selector-class">.compile</span>(XWPFTemplate<span class="selector-class">.java</span>:<span class="number">129</span>)</span><br><span class="line">at com<span class="selector-class">.deepoove</span><span class="selector-class">.poi</span><span class="selector-class">.XWPFTemplate</span><span class="selector-class">.compile</span>(XWPFTemplate<span class="selector-class">.java</span>:<span class="number">110</span>)</span><br><span class="line">at com<span class="selector-class">.deepoove</span><span class="selector-class">.poi</span><span class="selector-class">.XWPFTemplate</span><span class="selector-class">.compile</span>(XWPFTemplate<span class="selector-class">.java</span>:<span class="number">78</span>)</span><br><span class="line">at com<span class="selector-class">.deepoove</span><span class="selector-class">.poi</span><span class="selector-class">.XWPFTemplate</span><span class="selector-class">.compile</span>(XWPFTemplate<span class="selector-class">.java</span>:<span class="number">74</span>)</span><br><span class="line">at dao<span class="selector-class">.analysis</span><span class="selector-class">.daytimeReport</span><span class="selector-class">.DaytimeReportDAO</span><span class="selector-class">.saveData2Word</span>(DaytimeReportDAO<span class="selector-class">.java</span>:<span class="number">702</span>)</span><br><span class="line">at action<span class="selector-class">.v3</span><span class="selector-class">.Analysis</span><span class="selector-class">.DayTimeReportAction</span><span class="selector-class">.queryDayReport</span>(DayTimeReportAction<span class="selector-class">.java</span>:<span class="number">369</span>)</span><br><span class="line">at sun<span class="selector-class">.reflect</span><span class="selector-class">.NativeMethodAccessorImpl</span><span class="selector-class">.invoke0</span>(Native Method)</span><br><span class="line">at sun<span class="selector-class">.reflect</span><span class="selector-class">.NativeMethodAccessorImpl</span><span class="selector-class">.invoke</span>(NativeMethodAccessorImpl<span class="selector-class">.java</span>:<span class="number">62</span>)</span><br><span class="line">at sun<span class="selector-class">.reflect</span><span class="selector-class">.DelegatingMethodAccessorImpl</span><span class="selector-class">.invoke</span>(DelegatingMethodAccessorImpl<span class="selector-class">.java</span>:<span class="number">43</span>)</span><br><span class="line">at java<span class="selector-class">.lang</span><span class="selector-class">.reflect</span><span class="selector-class">.Method</span><span class="selector-class">.invoke</span>(Method<span class="selector-class">.java</span>:<span class="number">498</span>)</span><br><span class="line">at ognl<span class="selector-class">.OgnlRuntime</span><span class="selector-class">.invokeMethod</span>(OgnlRuntime<span class="selector-class">.java</span>:<span class="number">871</span>)</span><br><span class="line">at ognl<span class="selector-class">.OgnlRuntime</span><span class="selector-class">.callAppropriateMethod</span>(OgnlRuntime<span class="selector-class">.java</span>:<span class="number">1294</span>)</span><br><span class="line">at ognl<span class="selector-class">.ObjectMethodAccessor</span><span class="selector-class">.callMethod</span>(ObjectMethodAccessor<span class="selector-class">.java</span>:<span class="number">68</span>)</span><br><span class="line">at com<span class="selector-class">.opensymphony</span><span class="selector-class">.xwork2</span><span class="selector-class">.ognl</span><span class="selector-class">.accessor</span><span class="selector-class">.XWorkMethodAccessor</span><span class="selector-class">.callMethodWithDebugInfo</span>(XWorkMethodAccessor<span class="selector-class">.java</span>:<span class="number">117</span>)</span><br><span class="line">at com<span class="selector-class">.opensymphony</span><span class="selector-class">.xwork2</span><span class="selector-class">.ognl</span><span class="selector-class">.accessor</span><span class="selector-class">.XWorkMethodAccessor</span><span class="selector-class">.callMethod</span>(XWorkMethodAccessor<span class="selector-class">.java</span>:<span class="number">108</span>)</span><br><span class="line">at ognl<span class="selector-class">.OgnlRuntime</span><span class="selector-class">.callMethod</span>(OgnlRuntime<span class="selector-class">.java</span>:<span class="number">1370</span>)</span><br><span class="line">at ognl<span class="selector-class">.ASTMethod</span><span class="selector-class">.getValueBody</span>(ASTMethod<span class="selector-class">.java</span>:<span class="number">91</span>)</span><br><span class="line">at ognl<span class="selector-class">.SimpleNode</span><span class="selector-class">.evaluateGetValueBody</span>(SimpleNode<span class="selector-class">.java</span>:<span class="number">212</span>)</span><br><span class="line">at ognl<span class="selector-class">.SimpleNode</span><span class="selector-class">.getValue</span>(SimpleNode<span class="selector-class">.java</span>:<span class="number">258</span>)</span><br><span class="line">at ognl<span class="selector-class">.Ognl</span><span class="selector-class">.getValue</span>(Ognl<span class="selector-class">.java</span>:<span class="number">467</span>)</span><br><span class="line">at ognl<span class="selector-class">.Ognl</span><span class="selector-class">.getValue</span>(Ognl<span class="selector-class">.java</span>:<span class="number">431</span>)</span><br><span class="line">at com<span class="selector-class">.opensymphony</span><span class="selector-class">.xwork2</span><span class="selector-class">.ognl</span><span class="selector-class">.OgnlUtil</span>$<span class="number">3</span>.execute(OgnlUtil<span class="selector-class">.java</span>:<span class="number">352</span>)</span><br><span class="line">at com<span class="selector-class">.opensymphony</span><span class="selector-class">.xwork2</span><span class="selector-class">.ognl</span><span class="selector-class">.OgnlUtil</span><span class="selector-class">.compileAndExecuteMethod</span>(OgnlUtil<span class="selector-class">.java</span>:<span class="number">404</span>)</span><br><span class="line">at com<span class="selector-class">.opensymphony</span><span class="selector-class">.xwork2</span><span class="selector-class">.ognl</span><span class="selector-class">.OgnlUtil</span><span class="selector-class">.callMethod</span>(OgnlUtil<span class="selector-class">.java</span>:<span class="number">350</span>)</span><br><span class="line">at com<span class="selector-class">.opensymphony</span><span class="selector-class">.xwork2</span><span class="selector-class">.DefaultActionInvocation</span><span class="selector-class">.invokeAction</span>(DefaultActionInvocation<span class="selector-class">.java</span>:<span class="number">430</span>)</span><br><span class="line">at com<span class="selector-class">.opensymphony</span><span class="selector-class">.xwork2</span><span class="selector-class">.DefaultActionInvocation</span><span class="selector-class">.invokeActionOnly</span>(DefaultActionInvocation<span class="selector-class">.java</span>:<span class="number">290</span>)</span><br><span class="line">at com<span class="selector-class">.opensymphony</span><span class="selector-class">.xwork2</span><span class="selector-class">.DefaultActionInvocation</span><span class="selector-class">.invoke</span>(DefaultActionInvocation<span class="selector-class">.java</span>:<span class="number">251</span>)</span><br><span class="line">at org<span class="selector-class">.apache</span><span class="selector-class">.struts2</span><span class="selector-class">.interceptor</span><span class="selector-class">.DeprecationInterceptor</span><span class="selector-class">.intercept</span>(DeprecationInterceptor<span class="selector-class">.java</span>:<span class="number">41</span>)</span><br><span class="line">at com<span class="selector-class">.opensymphony</span><span class="selector-class">.xwork2</span><span class="selector-class">.DefaultActionInvocation</span><span class="selector-class">.invoke</span>(DefaultActionInvocation<span class="selector-class">.java</span>:<span class="number">245</span>)</span><br><span class="line">at org<span class="selector-class">.apache</span><span class="selector-class">.struts2</span><span class="selector-class">.interceptor</span><span class="selector-class">.debugging</span><span class="selector-class">.DebuggingInterceptor</span><span class="selector-class">.intercept</span>(DebuggingInterceptor<span class="selector-class">.java</span>:<span class="number">256</span>)</span><br><span class="line">at com<span class="selector-class">.opensymphony</span><span class="selector-class">.xwork2</span><span class="selector-class">.DefaultActionInvocation</span><span class="selector-class">.invoke</span>(DefaultActionInvocation<span class="selector-class">.java</span>:<span class="number">245</span>)</span><br><span class="line">at com<span class="selector-class">.opensymphony</span><span class="selector-class">.xwork2</span><span class="selector-class">.interceptor</span><span class="selector-class">.DefaultWorkflowInterceptor</span><span class="selector-class">.doIntercept</span>(DefaultWorkflowInterceptor<span class="selector-class">.java</span>:<span class="number">168</span>)</span><br><span class="line">at com<span class="selector-class">.opensymphony</span><span class="selector-class">.xwork2</span><span class="selector-class">.interceptor</span><span class="selector-class">.MethodFilterInterceptor</span><span class="selector-class">.intercept</span>(MethodFilterInterceptor<span class="selector-class">.java</span>:<span class="number">98</span>)</span><br><span class="line">at com<span class="selector-class">.opensymphony</span><span class="selector-class">.xwork2</span><span class="selector-class">.DefaultActionInvocation</span><span class="selector-class">.invoke</span>(DefaultActionInvocation<span class="selector-class">.java</span>:<span class="number">245</span>)</span><br><span class="line">at com<span class="selector-class">.opensymphony</span><span class="selector-class">.xwork2</span><span class="selector-class">.validator</span><span class="selector-class">.ValidationInterceptor</span><span class="selector-class">.doIntercept</span>(ValidationInterceptor<span class="selector-class">.java</span>:<span class="number">265</span>)</span><br><span class="line">at org<span class="selector-class">.apache</span><span class="selector-class">.struts2</span><span class="selector-class">.interceptor</span><span class="selector-class">.validation</span><span class="selector-class">.AnnotationValidationInterceptor</span><span class="selector-class">.doIntercept</span>(AnnotationValidationInterceptor<span class="selector-class">.java</span>:<span class="number">76</span>)</span><br><span class="line">at com<span class="selector-class">.opensymphony</span><span class="selector-class">.xwork2</span><span class="selector-class">.interceptor</span><span class="selector-class">.MethodFilterInterceptor</span><span class="selector-class">.intercept</span>(MethodFilterInterceptor<span class="selector-class">.java</span>:<span class="number">98</span>)</span><br><span class="line">at com<span class="selector-class">.opensymphony</span><span class="selector-class">.xwork2</span><span class="selector-class">.DefaultActionInvocation</span><span class="selector-class">.invoke</span>(DefaultActionInvocation<span class="selector-class">.java</span>:<span class="number">245</span>)</span><br><span class="line">at com<span class="selector-class">.opensymphony</span><span class="selector-class">.xwork2</span><span class="selector-class">.interceptor</span><span class="selector-class">.ConversionErrorInterceptor</span><span class="selector-class">.intercept</span>(ConversionErrorInterceptor<span class="selector-class">.java</span>:<span class="number">138</span>)</span><br><span class="line">at com<span class="selector-class">.opensymphony</span><span class="selector-class">.xwork2</span><span class="selector-class">.DefaultActionInvocation</span><span class="selector-class">.invoke</span>(DefaultActionInvocation<span class="selector-class">.java</span>:<span class="number">245</span>)</span><br><span class="line">at com<span class="selector-class">.opensymphony</span><span class="selector-class">.xwork2</span><span class="selector-class">.interceptor</span><span class="selector-class">.ParametersInterceptor</span><span class="selector-class">.doIntercept</span>(ParametersInterceptor<span class="selector-class">.java</span>:<span class="number">229</span>)</span><br><span class="line">at com<span class="selector-class">.opensymphony</span><span class="selector-class">.xwork2</span><span class="selector-class">.interceptor</span><span class="selector-class">.MethodFilterInterceptor</span><span class="selector-class">.intercept</span>(MethodFilterInterceptor<span class="selector-class">.java</span>:<span class="number">98</span>)</span><br><span class="line">at com<span class="selector-class">.opensymphony</span><span class="selector-class">.xwork2</span><span class="selector-class">.DefaultActionInvocation</span><span class="selector-class">.invoke</span>(DefaultActionInvocation<span class="selector-class">.java</span>:<span class="number">245</span>)</span><br><span class="line">at com<span class="selector-class">.opensymphony</span><span class="selector-class">.xwork2</span><span class="selector-class">.interceptor</span><span class="selector-class">.ParametersInterceptor</span><span class="selector-class">.doIntercept</span>(ParametersInterceptor<span class="selector-class">.java</span>:<span class="number">229</span>)</span><br><span class="line">at com<span class="selector-class">.opensymphony</span><span class="selector-class">.xwork2</span><span class="selector-class">.interceptor</span><span class="selector-class">.MethodFilterInterceptor</span><span class="selector-class">.intercept</span>(MethodFilterInterceptor<span class="selector-class">.java</span>:<span class="number">98</span>)</span><br><span class="line">at com<span class="selector-class">.opensymphony</span><span class="selector-class">.xwork2</span><span class="selector-class">.DefaultActionInvocation</span><span class="selector-class">.invoke</span>(DefaultActionInvocation<span class="selector-class">.java</span>:<span class="number">245</span>)</span><br><span class="line">at com<span class="selector-class">.opensymphony</span><span class="selector-class">.xwork2</span><span class="selector-class">.interceptor</span><span class="selector-class">.StaticParametersInterceptor</span><span class="selector-class">.intercept</span>(StaticParametersInterceptor<span class="selector-class">.java</span>:<span class="number">191</span>)</span><br><span class="line">at com<span class="selector-class">.opensymphony</span><span class="selector-class">.xwork2</span><span class="selector-class">.DefaultActionInvocation</span><span class="selector-class">.invoke</span>(DefaultActionInvocation<span class="selector-class">.java</span>:<span class="number">245</span>)</span><br><span class="line">at org<span class="selector-class">.apache</span><span class="selector-class">.struts2</span><span class="selector-class">.interceptor</span><span class="selector-class">.MultiselectInterceptor</span><span class="selector-class">.intercept</span>(MultiselectInterceptor<span class="selector-class">.java</span>:<span class="number">73</span>)</span><br><span class="line">at com<span class="selector-class">.opensymphony</span><span class="selector-class">.xwork2</span><span class="selector-class">.DefaultActionInvocation</span><span class="selector-class">.invoke</span>(DefaultActionInvocation<span class="selector-class">.java</span>:<span class="number">245</span>)</span><br><span class="line">at org<span class="selector-class">.apache</span><span class="selector-class">.struts2</span><span class="selector-class">.interceptor</span><span class="selector-class">.DateTextFieldInterceptor</span><span class="selector-class">.intercept</span>(DateTextFieldInterceptor<span class="selector-class">.java</span>:<span class="number">125</span>)</span><br><span class="line">at com<span class="selector-class">.opensymphony</span><span class="selector-class">.xwork2</span><span class="selector-class">.DefaultActionInvocation</span><span class="selector-class">.invoke</span>(DefaultActionInvocation<span class="selector-class">.java</span>:<span class="number">245</span>)</span><br><span class="line">at org<span class="selector-class">.apache</span><span class="selector-class">.struts2</span><span class="selector-class">.interceptor</span><span class="selector-class">.CheckboxInterceptor</span><span class="selector-class">.intercept</span>(CheckboxInterceptor<span class="selector-class">.java</span>:<span class="number">91</span>)</span><br><span class="line">at com<span class="selector-class">.opensymphony</span><span class="selector-class">.xwork2</span><span class="selector-class">.DefaultActionInvocation</span><span class="selector-class">.invoke</span>(DefaultActionInvocation<span class="selector-class">.java</span>:<span class="number">245</span>)</span><br><span class="line">at org<span class="selector-class">.apache</span><span class="selector-class">.struts2</span><span class="selector-class">.interceptor</span><span class="selector-class">.FileUploadInterceptor</span><span class="selector-class">.intercept</span>(FileUploadInterceptor<span class="selector-class">.java</span>:<span class="number">253</span>)</span><br><span class="line">at com<span class="selector-class">.opensymphony</span><span class="selector-class">.xwork2</span><span class="selector-class">.DefaultActionInvocation</span><span class="selector-class">.invoke</span>(DefaultActionInvocation<span class="selector-class">.java</span>:<span class="number">245</span>)</span><br><span class="line">at com<span class="selector-class">.opensymphony</span><span class="selector-class">.xwork2</span><span class="selector-class">.interceptor</span><span class="selector-class">.ModelDrivenInterceptor</span><span class="selector-class">.intercept</span>(ModelDrivenInterceptor<span class="selector-class">.java</span>:<span class="number">100</span>)</span><br><span class="line">at com<span class="selector-class">.opensymphony</span><span class="selector-class">.xwork2</span><span class="selector-class">.DefaultActionInvocation</span><span class="selector-class">.invoke</span>(DefaultActionInvocation<span class="selector-class">.java</span>:<span class="number">245</span>)</span><br><span class="line">at com<span class="selector-class">.opensymphony</span><span class="selector-class">.xwork2</span><span class="selector-class">.interceptor</span><span class="selector-class">.ScopedModelDrivenInterceptor</span><span class="selector-class">.intercept</span>(ScopedModelDrivenInterceptor<span class="selector-class">.java</span>:<span class="number">141</span>)</span><br><span class="line">at com<span class="selector-class">.opensymphony</span><span class="selector-class">.xwork2</span><span class="selector-class">.DefaultActionInvocation</span><span class="selector-class">.invoke</span>(DefaultActionInvocation<span class="selector-class">.java</span>:<span class="number">245</span>)</span><br><span class="line">at com<span class="selector-class">.opensymphony</span><span class="selector-class">.xwork2</span><span class="selector-class">.interceptor</span><span class="selector-class">.ChainingInterceptor</span><span class="selector-class">.intercept</span>(ChainingInterceptor<span class="selector-class">.java</span>:<span class="number">145</span>)</span><br><span class="line">at com<span class="selector-class">.opensymphony</span><span class="selector-class">.xwork2</span><span class="selector-class">.DefaultActionInvocation</span><span class="selector-class">.invoke</span>(DefaultActionInvocation<span class="selector-class">.java</span>:<span class="number">245</span>)</span><br><span class="line">at com<span class="selector-class">.opensymphony</span><span class="selector-class">.xwork2</span><span class="selector-class">.interceptor</span><span class="selector-class">.PrepareInterceptor</span><span class="selector-class">.doIntercept</span>(PrepareInterceptor<span class="selector-class">.java</span>:<span class="number">171</span>)</span><br><span class="line">at com<span class="selector-class">.opensymphony</span><span class="selector-class">.xwork2</span><span class="selector-class">.interceptor</span><span class="selector-class">.MethodFilterInterceptor</span><span class="selector-class">.intercept</span>(MethodFilterInterceptor<span class="selector-class">.java</span>:<span class="number">98</span>)</span><br><span class="line">at com<span class="selector-class">.opensymphony</span><span class="selector-class">.xwork2</span><span class="selector-class">.DefaultActionInvocation</span><span class="selector-class">.invoke</span>(DefaultActionInvocation<span class="selector-class">.java</span>:<span class="number">245</span>)</span><br><span class="line">at com<span class="selector-class">.opensymphony</span><span class="selector-class">.xwork2</span><span class="selector-class">.interceptor</span><span class="selector-class">.I18nInterceptor</span><span class="selector-class">.intercept</span>(I18nInterceptor<span class="selector-class">.java</span>:<span class="number">140</span>)</span><br><span class="line">at com<span class="selector-class">.opensymphony</span><span class="selector-class">.xwork2</span><span class="selector-class">.DefaultActionInvocation</span><span class="selector-class">.invoke</span>(DefaultActionInvocation<span class="selector-class">.java</span>:<span class="number">245</span>)</span><br><span class="line">at org<span class="selector-class">.apache</span><span class="selector-class">.struts2</span><span class="selector-class">.interceptor</span><span class="selector-class">.ServletConfigInterceptor</span><span class="selector-class">.intercept</span>(ServletConfigInterceptor<span class="selector-class">.java</span>:<span class="number">164</span>)</span><br><span class="line">at com<span class="selector-class">.opensymphony</span><span class="selector-class">.xwork2</span><span class="selector-class">.DefaultActionInvocation</span><span class="selector-class">.invoke</span>(DefaultActionInvocation<span class="selector-class">.java</span>:<span class="number">245</span>)</span><br><span class="line">at com<span class="selector-class">.opensymphony</span><span class="selector-class">.xwork2</span><span class="selector-class">.interceptor</span><span class="selector-class">.AliasInterceptor</span><span class="selector-class">.intercept</span>(AliasInterceptor<span class="selector-class">.java</span>:<span class="number">193</span>)</span><br><span class="line">at com<span class="selector-class">.opensymphony</span><span class="selector-class">.xwork2</span><span class="selector-class">.DefaultActionInvocation</span><span class="selector-class">.invoke</span>(DefaultActionInvocation<span class="selector-class">.java</span>:<span class="number">245</span>)</span><br><span class="line">at com<span class="selector-class">.opensymphony</span><span class="selector-class">.xwork2</span><span class="selector-class">.interceptor</span><span class="selector-class">.ExceptionMappingInterceptor</span><span class="selector-class">.intercept</span>(ExceptionMappingInterceptor<span class="selector-class">.java</span>:<span class="number">189</span>)</span><br><span class="line">at com<span class="selector-class">.opensymphony</span><span class="selector-class">.xwork2</span><span class="selector-class">.DefaultActionInvocation</span><span class="selector-class">.invoke</span>(DefaultActionInvocation<span class="selector-class">.java</span>:<span class="number">245</span>)</span><br><span class="line">at org<span class="selector-class">.apache</span><span class="selector-class">.struts2</span><span class="selector-class">.impl</span><span class="selector-class">.StrutsActionProxy</span><span class="selector-class">.execute</span>(StrutsActionProxy<span class="selector-class">.java</span>:<span class="number">54</span>)</span><br><span class="line">at org<span class="selector-class">.apache</span><span class="selector-class">.struts2</span><span class="selector-class">.dispatcher</span><span class="selector-class">.Dispatcher</span><span class="selector-class">.serviceAction</span>(Dispatcher<span class="selector-class">.java</span>:<span class="number">575</span>)</span><br><span class="line">at org<span class="selector-class">.apache</span><span class="selector-class">.struts2</span><span class="selector-class">.dispatcher</span><span class="selector-class">.ng</span><span class="selector-class">.ExecuteOperations</span><span class="selector-class">.executeAction</span>(ExecuteOperations<span class="selector-class">.java</span>:<span class="number">81</span>)</span><br><span class="line">at org<span class="selector-class">.apache</span><span class="selector-class">.struts2</span><span class="selector-class">.dispatcher</span><span class="selector-class">.ng</span><span class="selector-class">.filter</span><span class="selector-class">.StrutsPrepareAndExecuteFilter</span><span class="selector-class">.doFilter</span>(StrutsPrepareAndExecuteFilter<span class="selector-class">.java</span>:<span class="number">99</span>)</span><br><span class="line">at org<span class="selector-class">.apache</span><span class="selector-class">.catalina</span><span class="selector-class">.core</span><span class="selector-class">.ApplicationFilterChain</span><span class="selector-class">.internalDoFilter</span>(ApplicationFilterChain<span class="selector-class">.java</span>:<span class="number">241</span>)</span><br><span class="line">at org<span class="selector-class">.apache</span><span class="selector-class">.catalina</span><span class="selector-class">.core</span><span class="selector-class">.ApplicationFilterChain</span><span class="selector-class">.doFilter</span>(ApplicationFilterChain<span class="selector-class">.java</span>:<span class="number">208</span>)</span><br><span class="line">at org<span class="selector-class">.apache</span><span class="selector-class">.catalina</span><span class="selector-class">.core</span><span class="selector-class">.StandardWrapperValve</span><span class="selector-class">.invoke</span>(StandardWrapperValve<span class="selector-class">.java</span>:<span class="number">218</span>)</span><br><span class="line">at org<span class="selector-class">.apache</span><span class="selector-class">.catalina</span><span class="selector-class">.core</span><span class="selector-class">.StandardContextValve</span><span class="selector-class">.invoke</span>(StandardContextValve<span class="selector-class">.java</span>:<span class="number">110</span>)</span><br><span class="line">at org<span class="selector-class">.apache</span><span class="selector-class">.catalina</span><span class="selector-class">.authenticator</span><span class="selector-class">.AuthenticatorBase</span><span class="selector-class">.invoke</span>(AuthenticatorBase<span class="selector-class">.java</span>:<span class="number">506</span>)</span><br><span class="line">at org<span class="selector-class">.apache</span><span class="selector-class">.catalina</span><span class="selector-class">.core</span><span class="selector-class">.StandardHostValve</span><span class="selector-class">.invoke</span>(StandardHostValve<span class="selector-class">.java</span>:<span class="number">169</span>)</span><br><span class="line">at org<span class="selector-class">.apache</span><span class="selector-class">.catalina</span><span class="selector-class">.valves</span><span class="selector-class">.ErrorReportValve</span><span class="selector-class">.invoke</span>(ErrorReportValve<span class="selector-class">.java</span>:<span class="number">103</span>)</span><br><span class="line">at org<span class="selector-class">.apache</span><span class="selector-class">.catalina</span><span class="selector-class">.valves</span><span class="selector-class">.AccessLogValve</span><span class="selector-class">.invoke</span>(AccessLogValve<span class="selector-class">.java</span>:<span class="number">962</span>)</span><br><span class="line">at org<span class="selector-class">.apache</span><span class="selector-class">.catalina</span><span class="selector-class">.core</span><span class="selector-class">.StandardEngineValve</span><span class="selector-class">.invoke</span>(StandardEngineValve<span class="selector-class">.java</span>:<span class="number">116</span>)</span><br><span class="line">at org<span class="selector-class">.apache</span><span class="selector-class">.catalina</span><span class="selector-class">.connector</span><span class="selector-class">.CoyoteAdapter</span><span class="selector-class">.service</span>(CoyoteAdapter<span class="selector-class">.java</span>:<span class="number">452</span>)</span><br><span class="line">at org<span class="selector-class">.apache</span><span class="selector-class">.coyote</span><span class="selector-class">.http11</span><span class="selector-class">.AbstractHttp11Processor</span><span class="selector-class">.process</span>(AbstractHttp11Processor<span class="selector-class">.java</span>:<span class="number">1087</span>)</span><br><span class="line">at org<span class="selector-class">.apache</span><span class="selector-class">.coyote</span><span class="selector-class">.AbstractProtocol</span><span class="variable">$AbstractConnectionHandler</span>.process(AbstractProtocol<span class="selector-class">.java</span>:<span class="number">637</span>)</span><br><span class="line">at org<span class="selector-class">.apache</span><span class="selector-class">.tomcat</span><span class="selector-class">.util</span><span class="selector-class">.net</span><span class="selector-class">.AprEndpoint</span><span class="variable">$SocketProcessor</span>.doRun(AprEndpoint<span class="selector-class">.java</span>:<span class="number">2536</span>)</span><br><span class="line">at org<span class="selector-class">.apache</span><span class="selector-class">.tomcat</span><span class="selector-class">.util</span><span class="selector-class">.net</span><span class="selector-class">.AprEndpoint</span><span class="variable">$SocketProcessor</span>.run(AprEndpoint<span class="selector-class">.java</span>:<span class="number">2525</span>)</span><br><span class="line">at java<span class="selector-class">.util</span><span class="selector-class">.concurrent</span><span class="selector-class">.ThreadPoolExecutor</span><span class="selector-class">.runWorker</span>(ThreadPoolExecutor<span class="selector-class">.java</span>:<span class="number">1142</span>)</span><br><span class="line">at java<span class="selector-class">.util</span><span class="selector-class">.concurrent</span><span class="selector-class">.ThreadPoolExecutor</span><span class="variable">$Worker</span>.run(ThreadPoolExecutor<span class="selector-class">.java</span>:<span class="number">617</span>)</span><br><span class="line">at org<span class="selector-class">.apache</span><span class="selector-class">.tomcat</span><span class="selector-class">.util</span><span class="selector-class">.threads</span><span class="selector-class">.TaskThread</span><span class="variable">$WrappingRunnable</span>.run(TaskThread<span class="selector-class">.java</span>:<span class="number">61</span>)</span><br><span class="line">at java<span class="selector-class">.lang</span><span class="selector-class">.Thread</span><span class="selector-class">.run</span>(Thread<span class="selector-class">.java</span>:<span class="number">745</span>)</span><br><span class="line">Caused by: java<span class="selector-class">.lang</span><span class="selector-class">.ClassNotFoundException</span>: org<span class="selector-class">.apache</span><span class="selector-class">.poi</span><span class="selector-class">.UnsupportedFileFormatException</span></span><br><span class="line">at org<span class="selector-class">.apache</span><span class="selector-class">.catalina</span><span class="selector-class">.loader</span><span class="selector-class">.WebappClassLoaderBase</span><span class="selector-class">.loadClass</span>(WebappClassLoaderBase<span class="selector-class">.java</span>:<span class="number">1892</span>)</span><br><span class="line">at org<span class="selector-class">.apache</span><span class="selector-class">.catalina</span><span class="selector-class">.loader</span><span class="selector-class">.WebappClassLoaderBase</span><span class="selector-class">.loadClass</span>(WebappClassLoaderBase<span class="selector-class">.java</span>:<span class="number">1735</span>)</span><br><span class="line">... <span class="number">113</span> more</span><br></pre></td></tr></table></figure><ul><li>参考文档: <a href="https://blog.csdn.net/moshowgame/article/details/81702029" target="_blank" rel="noopener">https://blog.csdn.net/moshowgame/article/details/81702029</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ul&gt;
&lt;li&gt;&lt;p&gt;文档: &lt;a href=&quot;http://deepoove.com/poi-tl/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;http://deepoove.com/poi-tl/&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;添加依赖&lt;/
      
    
    </summary>
    
      <category term="Java" scheme="https://qijianguo.com/categories/Java/"/>
    
    
      <category term="java, poi-tl" scheme="https://qijianguo.com/tags/java-poi-tl/"/>
    
  </entry>
  
  <entry>
    <title>Netty自定义协议上传</title>
    <link href="https://qijianguo.com/Netty/2019/04/17/netty%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8D%8F%E8%AE%AE%E4%B8%8A%E4%BC%A0.html"/>
    <id>https://qijianguo.com/Netty/2019/04/17/netty自定义协议上传.html</id>
    <published>2019-04-17T06:18:44.266Z</published>
    <updated>2019-04-17T07:46:38.614Z</updated>
    
    <content type="html"><![CDATA[<ul><li>客户端:<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"><span class="meta-keyword">import</span> io.netty.bootstrap.Bootstrap;</span></span><br><span class="line"><span class="meta"><span class="meta-keyword">import</span> io.netty.channel.ChannelFuture;</span></span><br><span class="line"><span class="meta"><span class="meta-keyword">import</span> io.netty.channel.EventLoopGroup;</span></span><br><span class="line"><span class="meta"><span class="meta-keyword">import</span> io.netty.channel.nio.NioEventLoopGroup;</span></span><br><span class="line"><span class="meta"><span class="meta-keyword">import</span> io.netty.channel.socket.nio.NioSocketChannel;</span></span><br><span class="line"><span class="meta"><span class="meta-keyword">import</span> io.netty.handler.logging.LogLevel;</span></span><br><span class="line"><span class="meta"><span class="meta-keyword">import</span> io.netty.handler.logging.LoggingHandler;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SocketClient</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main(String[] args) throws InterruptedException &#123;</span><br><span class="line">        EventLoopGroup eventLoopGroup = <span class="keyword">new</span> NioEventLoopGroup();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Bootstrap bootstrap = <span class="keyword">new</span> Bootstrap();</span><br><span class="line">            bootstrap.group(eventLoopGroup)</span><br><span class="line">                    .channel(NioSocketChannel.class)</span><br><span class="line">                    .handler(<span class="keyword">new</span> LoggingHandler(LogLevel.INFO))</span><br><span class="line">                    .handler(<span class="keyword">new</span> SocketClientInitializer());</span><br><span class="line"></span><br><span class="line">            ChannelFuture channelFuture = bootstrap.connect(<span class="string">"localhost"</span>, <span class="number">8899</span>).sync();</span><br><span class="line">            channelFuture.channel().closeFuture().sync();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">finally</span> &#123;</span><br><span class="line">            eventLoopGroup.shutdownGracefully();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.netty.<span class="built_in">buffer</span>.ByteBuf;</span><br><span class="line"><span class="keyword">import</span> io.netty.<span class="built_in">buffer</span>.UnpooledByteBufAllocator;</span><br><span class="line"><span class="keyword">import</span> io.netty.channel.ChannelHandlerContext;</span><br><span class="line"><span class="keyword">import</span> io.netty.channel.ChannelInboundHandlerAdapter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> class SocketClientHandler extends ChannelInboundHandlerAdapter &#123;</span><br><span class="line">    @Override</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> channelRead(ChannelHandlerContext ctx, Object msg) throws Exception &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> channelActive(ChannelHandlerContext ctx) throws Exception &#123;</span><br><span class="line">        UnpooledByteBufAllocator allocator = <span class="keyword">new</span> UnpooledByteBufAllocator(false);</span><br><span class="line">        ByteBuf <span class="built_in">buffer</span> = allocator.<span class="built_in">buffer</span>(<span class="number">20</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//        String longMsgBody = "";</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">String</span> device = <span class="string">"T0001"</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">String</span> imgStr = getBytes();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> length = imgStr.length();</span><br><span class="line">        System.out.<span class="built_in">println</span>(<span class="string">"总长度: "</span> + length + device.length() + <span class="number">8</span>);</span><br><span class="line">        <span class="built_in">buffer</span>.writeInt(length + device.length() + <span class="number">8</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//        buffer.writeBytes(new byte[]&#123;0x0a, 0x0d&#125;);</span></span><br><span class="line"></span><br><span class="line">        <span class="built_in">buffer</span>.writeInt(device.length());</span><br><span class="line">        <span class="built_in">buffer</span>.writeInt(imgStr.length());</span><br><span class="line">        <span class="built_in">buffer</span>.writeBytes(device.getBytes());</span><br><span class="line"></span><br><span class="line">        <span class="built_in">buffer</span>.writeBytes(imgStr.getBytes());</span><br><span class="line"></span><br><span class="line">        ctx.writeAndFlush(<span class="built_in">buffer</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">String</span> getBytes() &#123;</span><br><span class="line">        <span class="built_in">try</span> &#123;</span><br><span class="line">            StringBuffer sb = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">            FileInputStream fis = <span class="keyword">new</span> FileInputStream(<span class="string">"D:/mmmm.jpg"</span>);</span><br><span class="line">            BufferedInputStream bis = <span class="keyword">new</span> BufferedInputStream(fis);</span><br><span class="line">            java.io.ByteArrayOutputStream bos = <span class="keyword">new</span> java.io.ByteArrayOutputStream();</span><br><span class="line">            <span class="keyword">byte</span>[] buff = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">            <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">            <span class="built_in">while</span> ((len = fis.<span class="built_in">read</span>(buff)) != <span class="number">-1</span>) &#123;</span><br><span class="line">                bos.<span class="built_in">write</span>(buff, <span class="number">0</span>, len);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 得到图片的字节数组</span></span><br><span class="line">            <span class="keyword">byte</span>[] result = bos.toByteArray();</span><br><span class="line">            System.out.<span class="built_in">println</span>(byte2HexStr(result));</span><br><span class="line">            <span class="comment">// 字节数组转成十六进制</span></span><br><span class="line">            <span class="keyword">String</span> str = byte2HexStr(result);</span><br><span class="line"><span class="comment">//            /*</span></span><br><span class="line"><span class="comment">//             * 将十六进制串保存到txt文件中</span></span><br><span class="line"><span class="comment">//                    */</span></span><br><span class="line"><span class="comment">//            PrintWriter pw = new PrintWriter(</span></span><br><span class="line"><span class="comment">//                    new FileWriter("D:/mmmm.txt"));</span></span><br><span class="line"><span class="comment">//            pw.println(str);</span></span><br><span class="line"><span class="comment">//            pw.close();</span></span><br><span class="line">            <span class="built_in">return</span> str;</span><br><span class="line">        &#125; <span class="built_in">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">return</span> <span class="string">""</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * 实现字节数组向十六进制的转换方法一</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">String</span> byte2HexStr(<span class="keyword">byte</span>[] b) &#123;</span><br><span class="line">        <span class="keyword">String</span> hs = <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">String</span> stmp = <span class="string">""</span>;</span><br><span class="line">        <span class="built_in">for</span> (<span class="keyword">int</span> n = <span class="number">0</span>; n &lt; b.length; n++) &#123;</span><br><span class="line">            stmp = (Integer.toHexString(b[n] &amp; <span class="number">0XFF</span>));</span><br><span class="line">            <span class="built_in">if</span> (stmp.length() == <span class="number">1</span>)</span><br><span class="line">                hs = hs + <span class="string">"0"</span> + stmp;</span><br><span class="line">            <span class="built_in">else</span></span><br><span class="line">                hs = hs + stmp;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">return</span> hs.toUpperCase();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">byte</span> uniteBytes(<span class="keyword">String</span> src0, <span class="keyword">String</span> src1) &#123;</span><br><span class="line">        <span class="keyword">byte</span> b0 = Byte.decode(<span class="string">"0x"</span> + src0).byteValue();</span><br><span class="line">        b0 = (<span class="keyword">byte</span>) (b0 &lt;&lt; <span class="number">4</span>);</span><br><span class="line">        <span class="keyword">byte</span> b1 = Byte.decode(<span class="string">"0x"</span> + src1).byteValue();</span><br><span class="line">        <span class="keyword">byte</span> ret = (<span class="keyword">byte</span>) (b0 | b1);</span><br><span class="line">        <span class="built_in">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * 实现字节数组向十六进制的转换的方法二</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">String</span> bytesToHexString(<span class="keyword">byte</span>[] src) &#123;</span><br><span class="line">        StringBuilder stringBuilder = <span class="keyword">new</span> StringBuilder(<span class="string">""</span>);</span><br><span class="line">        <span class="built_in">if</span> (src == null || src.length &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="built_in">return</span> null;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; src.length; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> v = src[i] &amp; <span class="number">0xFF</span>;</span><br><span class="line">            <span class="keyword">String</span> hv = Integer.toHexString(v);</span><br><span class="line">            <span class="built_in">if</span> (hv.length() &lt; <span class="number">2</span>) &#123;</span><br><span class="line">                stringBuilder.append(<span class="number">0</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            stringBuilder.append(hv);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">return</span> stringBuilder.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io.netty.channel.<span class="type">ChannelInitializer</span>;</span><br><span class="line"><span class="keyword">import</span> io.netty.channel.<span class="type">ChannelPipeline</span>;</span><br><span class="line"><span class="keyword">import</span> io.netty.channel.socket.<span class="type">SocketChannel</span>;</span><br><span class="line"></span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">SocketClientInitializer</span> <span class="keyword">extends</span> <span class="title">ChannelInitializer&lt;SocketChannel&gt;</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> void initChannel(<span class="type">SocketChannel</span> ch) <span class="keyword">throws</span> <span class="type">Exception</span> &#123;</span><br><span class="line">        <span class="type">ChannelPipeline</span> pipeline = ch.pipeline();</span><br><span class="line">        pipeline.addLast(<span class="keyword">new</span> <span class="type">SocketClientHandler</span>());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>服务端 </li></ul><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta"><span class="meta-keyword">import</span> io.netty.bootstrap.ServerBootstrap;</span></span><br><span class="line"><span class="meta"><span class="meta-keyword">import</span> io.netty.channel.ChannelFuture;</span></span><br><span class="line"><span class="meta"><span class="meta-keyword">import</span> io.netty.channel.EventLoopGroup;</span></span><br><span class="line"><span class="meta"><span class="meta-keyword">import</span> io.netty.channel.nio.NioEventLoopGroup;</span></span><br><span class="line"><span class="meta"><span class="meta-keyword">import</span> io.netty.channel.socket.nio.NioServerSocketChannel;</span></span><br><span class="line"><span class="meta"><span class="meta-keyword">import</span> io.netty.handler.logging.LogLevel;</span></span><br><span class="line"><span class="meta"><span class="meta-keyword">import</span> io.netty.handler.logging.LoggingHandler;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SocketServer</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main(String[] args) throws InterruptedException &#123;</span><br><span class="line">        EventLoopGroup parentGroup = <span class="keyword">new</span> NioEventLoopGroup();</span><br><span class="line">        EventLoopGroup childGroup = <span class="keyword">new</span> NioEventLoopGroup();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            ServerBootstrap serverBootstrap = <span class="keyword">new</span> ServerBootstrap();</span><br><span class="line">            serverBootstrap.group(parentGroup, childGroup)</span><br><span class="line">                    .channel(NioServerSocketChannel.class)</span><br><span class="line">                    .handler(<span class="keyword">new</span> LoggingHandler(LogLevel.INFO))</span><br><span class="line">                    .childHandler(<span class="keyword">new</span> SocketServerInitializer());</span><br><span class="line"></span><br><span class="line">            ChannelFuture channelFuture = serverBootstrap.bind(<span class="number">8899</span>).sync();</span><br><span class="line">            channelFuture.channel().closeFuture().sync();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">finally</span> &#123;</span><br><span class="line">            parentGroup.shutdownGracefully();</span><br><span class="line">            childGroup.shutdownGracefully();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.netty.<span class="built_in">buffer</span>.ByteBuf;</span><br><span class="line"><span class="keyword">import</span> io.netty.<span class="built_in">buffer</span>.ByteBufUtil;</span><br><span class="line"><span class="keyword">import</span> io.netty.<span class="built_in">buffer</span>.Unpooled;</span><br><span class="line"><span class="keyword">import</span> io.netty.channel.ChannelHandlerContext;</span><br><span class="line"><span class="keyword">import</span> io.netty.channel.ChannelInboundHandlerAdapter;</span><br><span class="line"><span class="keyword">import</span> util.Consts;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.<span class="built_in">File</span>;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.nio.ByteBuffer;</span><br><span class="line"><span class="keyword">import</span> java.nio.CharBuffer;</span><br><span class="line"><span class="keyword">import</span> java.nio.charset.Charset;</span><br><span class="line"><span class="keyword">import</span> java.nio.charset.CharsetDecoder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> class BusinessServerHandler extends ChannelInboundHandlerAdapter &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> channelRead(ChannelHandlerContext ctx, Object msg) throws Exception &#123;</span><br><span class="line">        ByteBuf buf = (ByteBuf) msg;</span><br><span class="line"></span><br><span class="line">        Consts.logger.info(<span class="string">"BusinessServerHandler接收的二进制形式指令： "</span> + ByteBufUtil.hexDump(buf));</span><br><span class="line">        Consts.logger.info(<span class="string">"BusinessServerHandler接收的ASCII形式指令： "</span> + buf.toString(Charset.forName(<span class="string">"US-ASCII"</span>)));</span><br><span class="line">        System.out.<span class="built_in">println</span>(<span class="string">"BusinessServerHandler call count="</span> + ++count);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">byte</span>[] req = <span class="keyword">new</span> <span class="keyword">byte</span>[buf.readableBytes()];</span><br><span class="line">        buf.<span class="built_in">readBytes</span>(req);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> total = ByteBuffer.wrap(req, <span class="number">0</span>, <span class="number">4</span>).getInt();</span><br><span class="line">        <span class="keyword">int</span> devLength = ByteBuffer.wrap(req, <span class="number">4</span>, <span class="number">4</span>).getInt();</span><br><span class="line">        <span class="keyword">int</span> imgLength = ByteBuffer.wrap(req, <span class="number">8</span>, <span class="number">4</span>).getInt();</span><br><span class="line">        <span class="keyword">String</span> dev = getString(ByteBuffer.wrap(req, <span class="number">12</span>, devLength));</span><br><span class="line">        <span class="keyword">String</span> img = getString(ByteBuffer.wrap(req, <span class="number">12</span> + devLength, total - <span class="number">12</span> - devLength));</span><br><span class="line"></span><br><span class="line">        Consts.logger.info(<span class="string">"设备号： "</span> + dev);</span><br><span class="line">        Consts.logger.info(<span class="string">"图片： "</span> + img);</span><br><span class="line">        saveToImgFile(img, <span class="string">"D:/nnnn.jpg"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ByteBuffer 转换 String</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * @param buffer</span></span><br><span class="line"><span class="comment">     * @return</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">String</span> getString(ByteBuffer <span class="built_in">buffer</span>) &#123;</span><br><span class="line">        Charset charset = null;</span><br><span class="line">        CharsetDecoder decoder = null;</span><br><span class="line">        CharBuffer charBuffer = null;</span><br><span class="line">        <span class="built_in">try</span> &#123;</span><br><span class="line">            charset = Charset.forName(<span class="string">"UTF-8"</span>);</span><br><span class="line">            decoder = charset.newDecoder();</span><br><span class="line">            <span class="comment">// charBuffer = decoder.decode(buffer);//用这个的话，只能输出来一次结果，第二次显示为空</span></span><br><span class="line">            charBuffer = decoder.decode(<span class="built_in">buffer</span>.asReadOnlyBuffer());</span><br><span class="line">            <span class="built_in">return</span> charBuffer.toString();</span><br><span class="line">        &#125; <span class="built_in">catch</span> (Exception ex) &#123;</span><br><span class="line">            ex.printStackTrace();</span><br><span class="line">            <span class="built_in">return</span> <span class="string">""</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> saveToImgFile(<span class="keyword">String</span> src, <span class="keyword">String</span> output) &#123;</span><br><span class="line">        <span class="built_in">if</span> (src == null || src.length() == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="built_in">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">try</span> &#123;</span><br><span class="line">            FileOutputStream out = <span class="keyword">new</span> FileOutputStream(<span class="keyword">new</span> <span class="built_in">File</span>(output));</span><br><span class="line">            <span class="keyword">byte</span>[] bytes = src.getBytes();</span><br><span class="line">            <span class="built_in">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; bytes.length; i += <span class="number">2</span>) &#123;</span><br><span class="line">                out.<span class="built_in">write</span>(charToInt(bytes[i]) * <span class="number">16</span> + charToInt(bytes[i + <span class="number">1</span>]));</span><br><span class="line">            &#125;</span><br><span class="line">            out.<span class="built_in">close</span>();</span><br><span class="line">        &#125; <span class="built_in">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> charToInt(<span class="keyword">byte</span> ch) &#123;</span><br><span class="line">        <span class="keyword">int</span> val = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">if</span> (ch &gt;= <span class="number">0x30</span> &amp;&amp; ch &lt;= <span class="number">0x39</span>) &#123;</span><br><span class="line">            val = ch - <span class="number">0x30</span>;</span><br><span class="line">        &#125; <span class="built_in">else</span> <span class="built_in">if</span> (ch &gt;= <span class="number">0x41</span> &amp;&amp; ch &lt;= <span class="number">0x46</span>) &#123;</span><br><span class="line">            val = ch - <span class="number">0x41</span> + <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">return</span> val;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">import io.netty.<span class="keyword">buffer.ByteBuf;</span></span><br><span class="line"><span class="keyword">import </span>io.netty.<span class="keyword">buffer.ByteBufUtil;</span></span><br><span class="line"><span class="keyword">import </span>io.netty.channel.ChannelHandlerContext<span class="comment">;</span></span><br><span class="line">import io.netty.handler.codec.<span class="keyword">ByteToMessageDecoder;</span></span><br><span class="line"><span class="keyword">import </span>util.Consts<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">import <span class="keyword">java.nio.ByteBuffer;</span></span><br><span class="line"><span class="keyword">import </span><span class="keyword">java.nio.charset.Charset;</span></span><br><span class="line"><span class="keyword">import </span><span class="keyword">java.util.List;</span></span><br><span class="line"><span class="keyword"></span></span><br><span class="line"><span class="keyword">/**</span></span><br><span class="line"><span class="keyword"> </span>*     <span class="number">0</span>a0d  设备号长度<span class="number">4</span>   图片长度<span class="number">4</span>    图片</span><br><span class="line"> */</span><br><span class="line">public class SelfDefineEncodeHandler <span class="keyword">extends </span><span class="keyword">ByteToMessageDecoder </span>&#123;</span><br><span class="line"></span><br><span class="line">    private static int <span class="built_in">count</span> = <span class="number">0</span><span class="comment">;</span></span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void decode(ChannelHandlerContext ctx, <span class="keyword">ByteBuf </span><span class="keyword">bufferIn, </span>List&lt;Object&gt; out) throws Exception &#123;</span><br><span class="line">        Consts.logger.info(<span class="string">"decode接收的二进制形式指令： "</span> + <span class="keyword">ByteBufUtil.hexDump(bufferIn));</span></span><br><span class="line"><span class="keyword"> </span>       Consts.logger.info(<span class="string">"decode接收的ASCII形式指令： "</span> + <span class="keyword">bufferIn.toString(Charset.forName("US-ASCII")));</span></span><br><span class="line"><span class="keyword"> </span>       if (<span class="keyword">bufferIn.readableBytes() </span>&lt; <span class="number">10</span>) &#123;</span><br><span class="line">            return<span class="comment">;</span></span><br><span class="line">        &#125;</span><br><span class="line">        int <span class="keyword">beginIndex </span>= <span class="keyword">bufferIn.readerIndex();</span></span><br><span class="line"><span class="keyword"> </span>       int length = <span class="keyword">bufferIn.readInt();</span></span><br><span class="line"><span class="keyword"></span></span><br><span class="line"><span class="keyword"> </span>       System.out.println(<span class="string">"decode call count="</span>+ ++<span class="built_in">count</span>)<span class="comment">;</span></span><br><span class="line">        System.out.println(<span class="string">"bufferIn.readableBytes()="</span>+<span class="keyword">bufferIn.readableBytes());</span></span><br><span class="line"><span class="keyword"> </span>       System.out.println(<span class="string">"beginIndex="</span>+<span class="keyword">beginIndex);</span></span><br><span class="line"><span class="keyword"></span></span><br><span class="line"><span class="keyword"> </span>       if (<span class="keyword">bufferIn.readableBytes() </span>&lt; length) &#123;</span><br><span class="line">            <span class="keyword">bufferIn.readerIndex(beginIndex);</span></span><br><span class="line"><span class="keyword"> </span>           return<span class="comment">;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">bufferIn.readerIndex(beginIndex </span>+ length - <span class="number">4</span>)<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">ByteBuf </span>otherByteBufRef = <span class="keyword">bufferIn.slice(beginIndex, </span>length)<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">        otherByteBufRef.retain()<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">        out.<span class="keyword">add(otherByteBufRef);</span></span><br><span class="line"><span class="keyword"> </span>   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.netty.channel.<span class="type">ChannelInitializer</span>;</span><br><span class="line"><span class="keyword">import</span> io.netty.channel.<span class="type">ChannelPipeline</span>;</span><br><span class="line"><span class="keyword">import</span> io.netty.channel.socket.<span class="type">SocketChannel</span>;</span><br><span class="line"></span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">SocketServerInitializer</span> <span class="keyword">extends</span> <span class="title">ChannelInitializer&lt;SocketChannel&gt;</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> void initChannel(<span class="type">SocketChannel</span> ch) <span class="keyword">throws</span> <span class="type">Exception</span> &#123;</span><br><span class="line">        <span class="type">ChannelPipeline</span> pipeline = ch.pipeline();</span><br><span class="line">        pipeline.addLast(<span class="keyword">new</span> <span class="type">SelfDefineEncodeHandler</span>());</span><br><span class="line">        pipeline.addLast(<span class="keyword">new</span> <span class="type">BusinessServerHandler</span>());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ul&gt;
&lt;li&gt;客户端:&lt;figure class=&quot;highlight actionscript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/
      
    
    </summary>
    
      <category term="Netty" scheme="https://qijianguo.com/categories/Netty/"/>
    
    
      <category term="netty" scheme="https://qijianguo.com/tags/netty/"/>
    
  </entry>
  
  <entry>
    <title>JAVA中使用openoffice将Excel转PDF再转图片功能实现</title>
    <link href="https://qijianguo.com/Java/2019/04/17/JAVA%E4%B8%AD%E4%BD%BF%E7%94%A8openoffice%E5%B0%86Excel%E8%BD%ACPDF%E5%86%8D%E8%BD%AC%E5%9B%BE%E7%89%87%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0.html"/>
    <id>https://qijianguo.com/Java/2019/04/17/JAVA中使用openoffice将Excel转PDF再转图片功能实现.html</id>
    <published>2019-04-17T06:18:44.264Z</published>
    <updated>2019-04-17T07:45:42.728Z</updated>
    
    <content type="html"><![CDATA[<ul><li>需求<blockquote><p>公司一个小项目要结尾了, 有非常多的表格, 而且非常复杂, 例如</p></blockquote></li></ul><p><img src="https://img-blog.csdn.net/20181018170207617?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="在这里插入图片描述"><br>例如：（这表格, 有想死的心…）<br><img src="https://img-blog.csdn.net/20181018171047385?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="在这里插入图片描述"></p><blockquote><p>看到这样的表格，第一反应是n脸懵逼，这得做到啥时候啊，最后想到用一个方法，让客户自己玩！！<br>平台提供Excel模版下载，客户下载填写完再提交Excel，平台再将Excel转PDF，顺便将PDF转成图片，给前端展示，想法简单，方案可行，开工！</p></blockquote><ul><li>方案:</li></ul><ol><li>windows server下用 jacob, windows上可完美运行, 但是！！！Linux上不支持jacob！！！（非常重要！！）</li><li>poi + iText，貌似不错</li><li>openoffice，跨平台</li></ol><blockquote><p> 本文选用openoffice，各位看官可自选用iText + poi，自己判别！当然也可以用jacob，前提是你不需要在Linux中运行项目。</p></blockquote><ul><li>安装软件：<a href="http://www.openoffice.org/download/index.html" target="_blank" rel="noopener">下载传送门</a></li></ul><ol start="4"><li>win：<br><img src="https://img-blog.csdn.net/2018101817373025?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="win版本"><br>下载完成后，一路next，最好默认路径安装，免得折腾<br>完成后 <strong><em>Win + R</em></strong> 填入 <strong><em>Dcomcnfg</em></strong>  打开组件服务<br><img src="https://img-blog.csdn.net/2018101817414451?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="在这里插入图片描述"><br>设置openoffice组件服务， 都设成SYSTEM<br><img src="https://img-blog.csdn.net/20181018174311265?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="在这里插入图片描述"><br>再设置标识为：交互式用户<br><img src="https://img-blog.csdn.net/20181018174529594?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="在这里插入图片描述"></li></ol><p>进入到安装目录，如果路径是默认的，则在 <strong><em>C:\Program Files (x86)\OpenOffice 4\program</em></strong> 下面，<br>进到这个路径下，按住 <strong><em>shift</em></strong>  再点击鼠标右键，<strong><em>在此处打开命令窗口</em></strong>，输入 <strong><em>soffice -headless-accept=”socket,host=127.0.0.1,port=8100;urp;”-nofirststartwizard</em></strong>， 查看是否启动成功， 黑窗口输入 <strong><em>netstat -ano</em></strong><br><img src="https://img-blog.csdn.net/20181018175507225?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="在这里插入图片描述"><br><img src="https://img-blog.csdn.net/20181018175417121?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="在这里插入图片描述"><br>windows下安装完毕！</p><p>参考： <a href="https://blog.csdn.net/qq_30987095/article/details/78789103" target="_blank" rel="noopener">https://blog.csdn.net/qq_30987095/article/details/78789103</a></p><ol start="2"><li>linux：<a href="http://www.openoffice.org/download/index.html" target="_blank" rel="noopener">下载传送门</a><br><img src="https://img-blog.csdn.net/20181018175750307?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="在这里插入图片描述"><br>根据自己的Linux系统选择RPM包或者DEB，如果是Ubuntu则选DEB，其他就选RPM包，查看当前操作系统是ubuntu还是centos</li></ol><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ2zeg3etf08f6snef3lgrZ ~]<span class="comment">#  lsb_release -a</span></span><br><span class="line">LSB Version::(略)</span><br><span class="line">Distributor ID:CentOS</span><br><span class="line"><span class="section">Description:CentOS Linux release (略)</span></span><br><span class="line"><span class="section">Release:(略)</span></span><br><span class="line"><span class="section">Codename:Core</span></span><br></pre></td></tr></table></figure><p>下载完毕后，利用ssh工具上传到服务器上！</p><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&gt;  tar -zxvf Apache_OpenOffice_4<span class="number">.1</span><span class="number">.3</span>_Linux_x86<span class="number">-64</span>_install-rpm_zh-CN.tar.gz</span><br><span class="line">(略)......</span><br><span class="line"></span><br><span class="line">&gt; ls </span><br><span class="line">zh-CN</span><br><span class="line">&gt; cd zh-CN/RPMS</span><br><span class="line">&gt; ls</span><br><span class="line">openoffice-core01<span class="number">-4.1</span><span class="number">.3</span><span class="number">-9783.</span>x86_64.rpm             openoffice-impress<span class="number">-4.1</span><span class="number">.3</span><span class="number">-9783.</span>x86_64.rpm        openoffice-zh-CN<span class="number">-4.1</span><span class="number">.3</span><span class="number">-9783.</span>x86_64.rpm</span><br><span class="line">openoffice<span class="number">-4.1</span><span class="number">.3</span><span class="number">-9783.</span>x86_64.rpm                openoffice-core02<span class="number">-4.1</span><span class="number">.3</span><span class="number">-9783.</span>x86_64.rpm             openoffice-javafilter<span class="number">-4.1</span><span class="number">.3</span><span class="number">-9783.</span>x86_64.rpm     openoffice-zh-CN-base<span class="number">-4.1</span><span class="number">.3</span><span class="number">-9783.</span>x86_64.rpm</span><br><span class="line">openoffice-base<span class="number">-4.1</span><span class="number">.3</span><span class="number">-9783.</span>x86_64.rpm           openoffice-core03<span class="number">-4.1</span><span class="number">.3</span><span class="number">-9783.</span>x86_64.rpm             openoffice-math<span class="number">-4.1</span><span class="number">.3</span><span class="number">-9783.</span>x86_64.rpm           openoffice-zh-CN-calc<span class="number">-4.1</span><span class="number">.3</span><span class="number">-9783.</span>x86_64.rpm</span><br><span class="line">openoffice-brand-base<span class="number">-4.1</span><span class="number">.3</span><span class="number">-9783.</span>x86_64.rpm     openoffice-core04<span class="number">-4.1</span><span class="number">.3</span><span class="number">-9783.</span>x86_64.rpm             openoffice-ogltrans<span class="number">-4.1</span><span class="number">.3</span><span class="number">-9783.</span>x86_64.rpm       openoffice-zh-CN-draw<span class="number">-4.1</span><span class="number">.3</span><span class="number">-9783.</span>x86_64.rpm</span><br><span class="line">openoffice-brand-calc<span class="number">-4.1</span><span class="number">.3</span><span class="number">-9783.</span>x86_64.rpm     openoffice-core05<span class="number">-4.1</span><span class="number">.3</span><span class="number">-9783.</span>x86_64.rpm             openoffice-onlineupdate<span class="number">-4.1</span><span class="number">.3</span><span class="number">-9783.</span>x86_64.rpm   openoffice-zh-CN-help<span class="number">-4.1</span><span class="number">.3</span><span class="number">-9783.</span>x86_64.rpm</span><br><span class="line">openoffice-brand-draw<span class="number">-4.1</span><span class="number">.3</span><span class="number">-9783.</span>x86_64.rpm     openoffice-core06<span class="number">-4.1</span><span class="number">.3</span><span class="number">-9783.</span>x86_64.rpm             openoffice-ooofonts<span class="number">-4.1</span><span class="number">.3</span><span class="number">-9783.</span>x86_64.rpm       openoffice-zh-CN-impress<span class="number">-4.1</span><span class="number">.3</span><span class="number">-9783.</span>x86_64.rpm</span><br><span class="line">openoffice-brand-impress<span class="number">-4.1</span><span class="number">.3</span><span class="number">-9783.</span>x86_64.rpm  openoffice-core07<span class="number">-4.1</span><span class="number">.3</span><span class="number">-9783.</span>x86_64.rpm             openoffice-ooolinguistic<span class="number">-4.1</span><span class="number">.3</span><span class="number">-9783.</span>x86_64.rpm  openoffice-zh-CN-math<span class="number">-4.1</span><span class="number">.3</span><span class="number">-9783.</span>x86_64.rpm</span><br><span class="line">openoffice-brand-math<span class="number">-4.1</span><span class="number">.3</span><span class="number">-9783.</span>x86_64.rpm     openoffice-draw<span class="number">-4.1</span><span class="number">.3</span><span class="number">-9783.</span>x86_64.rpm               openoffice-pyuno<span class="number">-4.1</span><span class="number">.3</span><span class="number">-9783.</span>x86_64.rpm          openoffice-zh-CN-res<span class="number">-4.1</span><span class="number">.3</span><span class="number">-9783.</span>x86_64.rpm</span><br><span class="line">openoffice-brand-writer<span class="number">-4.1</span><span class="number">.3</span><span class="number">-9783.</span>x86_64.rpm   openoffice-gnome-integration<span class="number">-4.1</span><span class="number">.3</span><span class="number">-9783.</span>x86_64.rpm  openoffice-ure<span class="number">-4.1</span><span class="number">.3</span><span class="number">-9783.</span>x86_64.rpm            openoffice-zh-CN-writer<span class="number">-4.1</span><span class="number">.3</span><span class="number">-9783.</span>x86_64.rpm</span><br><span class="line">openoffice-brand-zh-CN<span class="number">-4.1</span><span class="number">.3</span><span class="number">-9783.</span>x86_64.rpm    openoffice-graphicfilter<span class="number">-4.1</span><span class="number">.3</span><span class="number">-9783.</span>x86_64.rpm      openoffice-writer<span class="number">-4.1</span><span class="number">.3</span><span class="number">-9783.</span>x86_64.rpm</span><br><span class="line">openoffice-calc<span class="number">-4.1</span><span class="number">.3</span><span class="number">-9783.</span>x86_64.rpm           openoffice-images<span class="number">-4.1</span><span class="number">.3</span><span class="number">-9783.</span>x86_64.rpm             openoffice-xsltfilter<span class="number">-4.1</span><span class="number">.3</span><span class="number">-9783.</span>x86_64.rpm</span><br><span class="line"></span><br><span class="line">[注释：运行下面命令， 生成  desktop-integration包]</span><br><span class="line">&gt;  yum localinstall *.rpm</span><br><span class="line">&gt; （略...）</span><br><span class="line">&gt; cd desktop-integration/</span><br><span class="line">&gt; ls</span><br><span class="line">&gt;  openoffice4<span class="number">.1</span><span class="number">.3</span>-freedesktop-menus<span class="number">-4.1</span><span class="number">.3</span><span class="number">-9783.</span>noarch.rpm  </span><br><span class="line">   openoffice4<span class="number">.1</span><span class="number">.3</span>-mandriva-menus<span class="number">-4.1</span><span class="number">.3</span><span class="number">-9783.</span>noarch.rpm </span><br><span class="line">   openoffice4<span class="number">.1</span><span class="number">.3</span>-redhat-menus<span class="number">-4.1</span><span class="number">.3</span><span class="number">-9783.</span>noarch.rpm  </span><br><span class="line">   openoffice4<span class="number">.1</span><span class="number">.3</span>-suse-menus<span class="number">-4.1</span><span class="number">.3</span><span class="number">-9783.</span>noarch.rpm</span><br><span class="line"></span><br><span class="line">&gt;  yum localinstall  openoffice4<span class="number">.1</span><span class="number">.3</span>-redhat-menus<span class="number">-4.1</span><span class="number">.3</span><span class="number">-9783.</span>noarch.rpm</span><br></pre></td></tr></table></figure><p>ok， 安装完毕了！ 启动服务<br>进入到默认安装目录下<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash"> <span class="built_in">cd</span> /opt/openoffice4/program/</span></span><br><span class="line">[注释：临时启动]</span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> /opt/openoffice4/program/soffice -headless -accept=<span class="string">"socket,host=127.0.0.1,port=8100;urp;"</span> -nofirststartwizard</span></span><br><span class="line">[注释：或后台启动]</span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> /opt/openoffice4/program/soffice -headless -accept=<span class="string">"socket,host=127.0.0.1,port=8100;urp;"</span> -nofirststartwizard &amp;</span></span><br><span class="line"></span><br><span class="line">[注释：永久启动]</span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> nohup /opt/openoffice4/program/soffice -headless -accept=<span class="string">"socket,host=127.0.0.1,port=8100;urp;"</span> -nofirststartwizard &amp;</span></span><br><span class="line"></span><br><span class="line">[注释：查看是否启动成功]</span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> ps -ef|grep openoffice</span></span><br><span class="line">root      7541  7527  0 10:19 pts/0    00:00:12 /opt/openoffice4/program/soffice.bin -headless -accept=socket,host=127.0.0.1,port=8100;urp; -nofirststartwizard</span><br><span class="line">root      8964  7066  0 18:18 pts/3    00:00:00 grep --color=auto openoffice</span><br><span class="line"></span><br><span class="line">或者</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> netstat -tunlp |grep </span></span><br><span class="line">tcp        0      0 127.0.0.1:8100          0.0.0.0:*               LISTEN      7541/soffice.bin</span><br></pre></td></tr></table></figure></p><p>Linux下安装成功！</p><p>开始撸码：</p><ul><li>pom.xml</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- openoffice 相关依赖 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.openoffice<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>juh<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.openoffice<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>ridl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.openoffice<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>unoil<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!-- pdf2img --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.pdfbox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pdfbox<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.pdfbox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pdfbox-tools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><p>OpenOfficeUtils</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.awt.*;</span><br><span class="line"><span class="keyword">import</span> java.io.<span class="built_in">File</span>;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.ConnectException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.lang.StringUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.artofsolving.jodconverter.DefaultDocumentFormatRegistry;</span><br><span class="line"><span class="keyword">import</span> com.artofsolving.jodconverter.DocumentConverter;</span><br><span class="line"><span class="keyword">import</span> com.artofsolving.jodconverter.DocumentFormatRegistry;</span><br><span class="line"><span class="keyword">import</span> com.artofsolving.jodconverter.openoffice.connection.OpenOfficeConnection;</span><br><span class="line"><span class="keyword">import</span> com.artofsolving.jodconverter.openoffice.connection.SocketOpenOfficeConnection;</span><br><span class="line"><span class="keyword">import</span> com.artofsolving.jodconverter.openoffice.converter.OpenOfficeDocumentConverter;</span><br><span class="line"><span class="keyword">import</span> com.artofsolving.jodconverter.openoffice.converter.StreamOpenOfficeDocumentConverter;</span><br><span class="line"><span class="keyword">import</span> org.apache.pdfbox.pdmodel.PDDocument;</span><br><span class="line"><span class="keyword">import</span> org.apache.pdfbox.pdmodel.PDPage;</span><br><span class="line"><span class="keyword">import</span> org.apache.pdfbox.pdmodel.PDPageTree;</span><br><span class="line"><span class="keyword">import</span> org.apache.pdfbox.rendering.ImageType;</span><br><span class="line"><span class="keyword">import</span> org.apache.pdfbox.rendering.PDFRenderer;</span><br><span class="line"><span class="keyword">import</span> org.apache.pdfbox.tools.imageio.ImageIOUtil;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.awt.<span class="built_in">image</span>.BufferedImage;</span><br><span class="line"><span class="keyword">import</span> java.awt.<span class="built_in">image</span>.RenderedImage;</span><br><span class="line"><span class="keyword">import</span> java.io.<span class="built_in">File</span>;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> javax.imageio.ImageIO;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * @author josnow</span></span><br><span class="line"><span class="comment"> * @date 2017年5月9日 下午12:38:39</span></span><br><span class="line"><span class="comment"> * @version 1.0.0</span></span><br><span class="line"><span class="comment"> * @desc openoffice转换工具</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> class OpenOfficeUtils &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> final <span class="keyword">String</span> LOCAL_HOST = <span class="string">"localhost"</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> final <span class="keyword">int</span> LOCAL_PORT = <span class="number">8100</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Format</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> DocumentFormatRegistry formatFactory = <span class="keyword">new</span> DefaultDocumentFormatRegistry();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * @desc</span></span><br><span class="line"><span class="comment">     * @auth josnow</span></span><br><span class="line"><span class="comment">     * @date 2017年6月9日 下午4:11:04</span></span><br><span class="line"><span class="comment">     * @param inputFilePath</span></span><br><span class="line"><span class="comment">     *            待转换的文件路径</span></span><br><span class="line"><span class="comment">     * @param outputFilePath</span></span><br><span class="line"><span class="comment">     *            输出文件路径</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> convert(<span class="keyword">String</span> inputFilePath, <span class="keyword">String</span> outputFilePath) throws ConnectException &#123;</span><br><span class="line">        convert(inputFilePath, outputFilePath, LOCAL_HOST, LOCAL_PORT);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * @desc</span></span><br><span class="line"><span class="comment">     * @auth josnow</span></span><br><span class="line"><span class="comment">     * @date 2017年6月9日 下午4:12:29</span></span><br><span class="line"><span class="comment">     * @param inputFilePath</span></span><br><span class="line"><span class="comment">     *            待转换的文件路径</span></span><br><span class="line"><span class="comment">     * @param outputFilePath</span></span><br><span class="line"><span class="comment">     *            输出文件路径</span></span><br><span class="line"><span class="comment">     * @param connectIp</span></span><br><span class="line"><span class="comment">     *            远程调用ip</span></span><br><span class="line"><span class="comment">     * @param connectPort</span></span><br><span class="line"><span class="comment">     *            远程调用端口</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> convert(<span class="keyword">String</span> inputFilePath, <span class="keyword">String</span> outputFilePath, <span class="keyword">String</span> connectIp, <span class="keyword">int</span> connectPort)</span><br><span class="line">            throws ConnectException &#123;</span><br><span class="line">        <span class="built_in">if</span> (StringUtils.isEmpty(inputFilePath) || StringUtils.isEmpty(outputFilePath)</span><br><span class="line">                || StringUtils.isEmpty(connectIp)) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"参数异常！！"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        OpenOfficeConnection connection = <span class="keyword">new</span> SocketOpenOfficeConnection(connectIp, connectPort);</span><br><span class="line">        connection.<span class="built_in">connect</span>();</span><br><span class="line"> </span><br><span class="line"><span class="comment">//   TODO Excel转成PDF默认是A4纸</span></span><br><span class="line"><span class="comment">//        DocumentConverter converter = getConverter(connectIp, connection);</span></span><br><span class="line"><span class="comment">//        converter.convert(new File(inputFilePath), new File(outputFilePath));</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//   TODO Excel转成PDF默认是A4纸， 如果现实折行，则自定义ConverterDocument，改变纸张大小</span></span><br><span class="line">        ConverterDocument converterDocument = <span class="keyword">new</span> ConverterDocument(connection);</span><br><span class="line">        converterDocument.convert(<span class="keyword">new</span> <span class="built_in">File</span>(inputFilePath), <span class="keyword">new</span> <span class="built_in">File</span>(outputFilePath));</span><br><span class="line"></span><br><span class="line">        connection.<span class="built_in">disconnect</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * @desc</span></span><br><span class="line"><span class="comment">     * @auth josnow</span></span><br><span class="line"><span class="comment">     * @date 2017年6月9日 下午4:08:26</span></span><br><span class="line"><span class="comment">     * @param inputStream</span></span><br><span class="line"><span class="comment">     * @param inputFileExtension</span></span><br><span class="line"><span class="comment">     *            待转换文件的扩展名，例如: xls，doc</span></span><br><span class="line"><span class="comment">     * @param outputStream</span></span><br><span class="line"><span class="comment">     * @param outputFileExtension</span></span><br><span class="line"><span class="comment">     *            输出文件扩展名，例如：pdf</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> convert(InputStream inputStream, <span class="keyword">String</span> inputFileExtension, OutputStream outputStream,</span><br><span class="line">            <span class="keyword">String</span> outputFileExtension) throws ConnectException &#123;</span><br><span class="line">        convert(inputStream, inputFileExtension, outputStream, outputFileExtension, LOCAL_HOST, LOCAL_PORT);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * @desc</span></span><br><span class="line"><span class="comment">     * @auth josnow</span></span><br><span class="line"><span class="comment">     * @date 2017年6月9日 下午4:10:21</span></span><br><span class="line"><span class="comment">     * @param inputStream</span></span><br><span class="line"><span class="comment">     * @param inputFileExtension</span></span><br><span class="line"><span class="comment">     *            待转换文件的扩展名，例如: xls，doc</span></span><br><span class="line"><span class="comment">     * @param outputStream</span></span><br><span class="line"><span class="comment">     * @param outputFileExtension</span></span><br><span class="line"><span class="comment">     *            输出文件扩展名，例如：pdf</span></span><br><span class="line"><span class="comment">     * @param connectIp</span></span><br><span class="line"><span class="comment">     *            远程调用ip</span></span><br><span class="line"><span class="comment">     * @param connectPort</span></span><br><span class="line"><span class="comment">     *            远程调用端口</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> convert(InputStream inputStream, <span class="keyword">String</span> inputFileExtension, OutputStream outputStream,</span><br><span class="line">            <span class="keyword">String</span> outputFileExtension, <span class="keyword">String</span> connectIp, <span class="keyword">int</span> connectPort) throws ConnectException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">if</span> (inputStream == null || StringUtils.isEmpty(inputFileExtension) || outputStream == null</span><br><span class="line">                || StringUtils.isEmpty(outputFileExtension) || StringUtils.isEmpty(connectIp)) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"参数异常！！"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        OpenOfficeConnection connection = <span class="keyword">new</span> SocketOpenOfficeConnection(connectIp, connectPort);</span><br><span class="line">        connection.<span class="built_in">connect</span>();</span><br><span class="line">        DocumentConverter converter = getConverter(connectIp, connection);</span><br><span class="line"></span><br><span class="line">        converter.convert(inputStream, formatFactory.getFormatByFileExtension(inputFileExtension), outputStream,</span><br><span class="line">                formatFactory.getFormatByFileExtension(outputFileExtension));</span><br><span class="line">        connection.<span class="built_in">disconnect</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> DocumentConverter getConverter(<span class="keyword">String</span> connectIp, OpenOfficeConnection connection) &#123;</span><br><span class="line">        DocumentConverter converter = <span class="string">"localhost"</span>.equals(connectIp) || <span class="string">"127.0.0.1"</span>.equals(connectIp)</span><br><span class="line">                || <span class="string">"0:0:0:0:0:0:0:1"</span>.equals(connectIp) ? <span class="keyword">new</span> OpenOfficeDocumentConverter(connection)</span><br><span class="line">                        : <span class="keyword">new</span> StreamOpenOfficeDocumentConverter(connection);</span><br><span class="line">        <span class="built_in">return</span> converter;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main(<span class="keyword">String</span>[] args) throws Exception &#123;</span><br><span class="line">        OpenOfficeUtils.convert(<span class="string">"D:\\test.xls"</span>, <span class="string">"D:\\test.pdf"</span>);</span><br><span class="line">        pdf2image(<span class="keyword">new</span> <span class="built_in">File</span>(<span class="string">"D:\\test.pdf"</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * pdf to big image</span></span><br><span class="line"><span class="comment">     * github: https://github.com/mmtou/pdf2img</span></span><br><span class="line"><span class="comment">     * @param pdfFile pdf文件路径</span></span><br><span class="line"><span class="comment">     * @return big image file</span></span><br><span class="line"><span class="comment">     * @throws Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">File</span> pdf2image(<span class="built_in">File</span> pdfFile) throws Exception &#123;</span><br><span class="line">        <span class="comment">// 拼成图片后的宽度和高度</span></span><br><span class="line">        <span class="keyword">int</span> w = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> h = <span class="number">0</span>;</span><br><span class="line">        List&lt;BufferedImage&gt; images = <span class="keyword">new</span> ArrayList();</span><br><span class="line">        <span class="comment">// 生成图片后的路径</span></span><br><span class="line">        <span class="keyword">String</span> path = pdfFile.getParent() + <span class="built_in">File</span>.separator;</span><br><span class="line">        <span class="keyword">String</span> fileName = pdfFile.getName().replace(<span class="string">".pdf"</span>, <span class="string">""</span>);</span><br><span class="line"></span><br><span class="line">        <span class="built_in">File</span> destinationFile = <span class="keyword">new</span> <span class="built_in">File</span>(path);</span><br><span class="line">        <span class="built_in">if</span> (!destinationFile.<span class="built_in">exists</span>()) &#123;</span><br><span class="line">            destinationFile.<span class="built_in">mkdir</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        PDDocument document = PDDocument.load(pdfFile);</span><br><span class="line">        PDPageTree list = document.getDocumentCatalog().getPages();</span><br><span class="line">        <span class="keyword">int</span> pageCounter = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">for</span> (PDPage page : list) &#123;</span><br><span class="line">            PDFRenderer pdfRenderer = <span class="keyword">new</span> PDFRenderer(document);</span><br><span class="line">            BufferedImage <span class="built_in">image</span> = pdfRenderer.renderImageWithDPI(pageCounter, <span class="number">100</span>, ImageType.RGB);</span><br><span class="line">            <span class="keyword">String</span> target = path + fileName + <span class="string">"-"</span> + (pageCounter++) + <span class="string">".png"</span>;</span><br><span class="line">            ImageIOUtil.writeImage(<span class="built_in">image</span>, target, <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line">            w = <span class="built_in">image</span>.getWidth();</span><br><span class="line">            h += <span class="built_in">image</span>.getHeight();</span><br><span class="line">            images.add(<span class="built_in">image</span>);</span><br><span class="line">            <span class="keyword">new</span> <span class="built_in">File</span>(target).<span class="keyword">delete</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        document.<span class="built_in">close</span>();</span><br><span class="line"></span><br><span class="line">        BufferedImage combined = <span class="keyword">new</span> BufferedImage(w, h, BufferedImage.TYPE_INT_ARGB);</span><br><span class="line">        Graphics g = combined.getGraphics();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> y = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">for</span> (BufferedImage <span class="built_in">image</span> : images) &#123;</span><br><span class="line">            g.drawImage(<span class="built_in">image</span>, <span class="number">0</span>, y, null);</span><br><span class="line">            y += <span class="built_in">image</span>.getHeight();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Save as new image</span></span><br><span class="line">        <span class="built_in">File</span> <span class="built_in">image</span> = <span class="keyword">new</span> <span class="built_in">File</span>(path, fileName + <span class="string">".png"</span>);</span><br><span class="line">        ImageIO.<span class="built_in">write</span>(combined, <span class="string">"PNG"</span>, <span class="built_in">image</span>);</span><br><span class="line">        <span class="built_in">return</span> <span class="built_in">image</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>自定义 ConverterDocument</p></li></ul><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.artofsolving.jodconverter.openoffice.connection.OpenOfficeConnection;</span><br><span class="line"><span class="keyword">import</span> com.artofsolving.jodconverter.openoffice.converter.OpenOfficeDocumentConverter;</span><br><span class="line"><span class="keyword">import</span> com.artofsolving.jodconverter.openoffice.converter.StreamOpenOfficeDocumentConverter;</span><br><span class="line"><span class="keyword">import</span> com.sun.star.awt.<span class="keyword">Size</span>;</span><br><span class="line"><span class="keyword">import</span> com.sun.star.beans.PropertyValue;</span><br><span class="line"><span class="keyword">import</span> com.sun.star.lang.XComponent;</span><br><span class="line"><span class="keyword">import</span> com.sun.star.uno.UnoRuntime;</span><br><span class="line"><span class="keyword">import</span> com.sun.star.view.PaperFormat;</span><br><span class="line"><span class="keyword">import</span> com.sun.star.view.XPrintable;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> ConverterDocument <span class="keyword">extends</span> StreamOpenOfficeDocumentConverter &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> ConverterDocument(OpenOfficeConnection connection) &#123;</span><br><span class="line">        <span class="keyword">super</span>(connection);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">Size</span> A5, A4, A3;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">Size</span> B4, B5, B6;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">Size</span> KaoqinReport;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        A5 = <span class="keyword">new</span> <span class="keyword">Size</span>(<span class="number">14800</span>, <span class="number">21000</span>);</span><br><span class="line">        A4 = <span class="keyword">new</span> <span class="keyword">Size</span>(<span class="number">21000</span>, <span class="number">29700</span>);</span><br><span class="line">        A3 = <span class="keyword">new</span> <span class="keyword">Size</span>(<span class="number">29700</span>, <span class="number">42000</span>);</span><br><span class="line"></span><br><span class="line">        B4 = <span class="keyword">new</span> <span class="keyword">Size</span>(<span class="number">25000</span>, <span class="number">35300</span>);</span><br><span class="line">        B5 = <span class="keyword">new</span> <span class="keyword">Size</span>(<span class="number">17600</span>, <span class="number">25000</span>);</span><br><span class="line">        B6 = <span class="keyword">new</span> <span class="keyword">Size</span>(<span class="number">12500</span>, <span class="number">17600</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//        KaoqinReport = new Size(29700, 27940);  //最大限度  宽 1600000</span></span><br><span class="line">        KaoqinReport = <span class="keyword">new</span> <span class="keyword">Size</span>(<span class="number">25000</span>, <span class="number">21000</span>);;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> refreshDocument(XComponent document) &#123;</span><br><span class="line">        <span class="keyword">super</span>.refreshDocument(document);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// The default paper format and orientation is A4 and portrait. To</span></span><br><span class="line">        <span class="comment">// change paper orientation</span></span><br><span class="line">        <span class="comment">// re set page size</span></span><br><span class="line">        XPrintable xPrintable = (XPrintable) UnoRuntime.queryInterface(XPrintable.<span class="keyword">class</span>, document);</span><br><span class="line">        PropertyValue[] printerDesc = <span class="keyword">new</span> PropertyValue[<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Paper Orientation</span></span><br><span class="line"><span class="comment">//  printerDesc[0] = new PropertyValue();</span></span><br><span class="line"><span class="comment">//  printerDesc[0].Name = "PaperOrientation";</span></span><br><span class="line"><span class="comment">//  printerDesc[0].Value = PaperOrientation.PORTRAIT;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// Paper Format</span></span><br><span class="line">        printerDesc[<span class="number">0</span>] = <span class="keyword">new</span> PropertyValue();</span><br><span class="line">        printerDesc[<span class="number">0</span>].Name = <span class="string">"PaperFormat"</span>;</span><br><span class="line">        printerDesc[<span class="number">0</span>].Value = PaperFormat.USER;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Paper Size</span></span><br><span class="line">        printerDesc[<span class="number">1</span>] = <span class="keyword">new</span> PropertyValue();</span><br><span class="line">        printerDesc[<span class="number">1</span>].Name = <span class="string">"PaperSize"</span>;</span><br><span class="line">        printerDesc[<span class="number">1</span>].Value = KaoqinReport;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            xPrintable.setPrinter(printerDesc);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>使用：</li></ul><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main(<span class="keyword">String</span>[] args) throws Exception &#123;</span><br><span class="line">       OpenOfficeUtils.convert(<span class="string">"D:\\test.xls"</span>, <span class="string">"D:\\test.pdf"</span>);</span><br><span class="line">       pdf2image(<span class="keyword">new</span> <span class="built_in">File</span>(<span class="string">"D:\\test.pdf"</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>参考： <a href="https://blog.csdn.net/liuhualiang/article/details/14094019?utm_source=blogxgwz6" target="_blank" rel="noopener">https://blog.csdn.net/liuhualiang/article/details/14094019?utm_source=blogxgwz6</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ul&gt;
&lt;li&gt;需求&lt;blockquote&gt;
&lt;p&gt;公司一个小项目要结尾了, 有非常多的表格, 而且非常复杂, 例如&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdn.net/20181018170
      
    
    </summary>
    
      <category term="Java" scheme="https://qijianguo.com/categories/Java/"/>
    
    
      <category term="java,openoffice" scheme="https://qijianguo.com/tags/java-openoffice/"/>
    
  </entry>
  
  <entry>
    <title>JAVA8新特性学习</title>
    <link href="https://qijianguo.com/Java/2019/04/17/JAVA8%E6%96%B0%E7%89%B9%E6%80%A7%E5%AD%A6%E4%B9%A0.html"/>
    <id>https://qijianguo.com/Java/2019/04/17/JAVA8新特性学习.html</id>
    <published>2019-04-17T06:18:44.261Z</published>
    <updated>2019-04-17T07:45:30.723Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Lambda表达式"><a href="#Lambda表达式" class="headerlink" title="Lambda表达式"></a>Lambda表达式</h3><blockquote><p>lambda简称闭包，类似Groovy，Scala等的函数式编程，即将函数作为方法的参数。<br>一个简单的Lambda表达式由逗号分隔开的参数列表、-&gt; 及函数体组成</p></blockquote><p>例如：<br><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">List&lt;<span class="keyword">String</span>&gt; strList = Arrays.asList(<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>);</span><br><span class="line">strList.forEach(<span class="built_in">str</span> -&gt; System.out.<span class="built_in">println</span>(<span class="built_in">str</span>));</span><br></pre></td></tr></table></figure></p><p>同：（其中str的类型是由编译器推断出来的。可省略）<br><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">strList.forEach<span class="function"><span class="params">((String str)-&gt; System.out.println(str))</span>;</span></span><br></pre></td></tr></table></figure></p><p>如果 <strong>-&gt;</strong> 后有多条语句，则需要将代码块放在 <strong>{}</strong> 中，即函数体中的代码块。</p><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">strList.forEach(<span class="built_in">str</span> -&gt; &#123;</span><br><span class="line">System.out.<span class="built_in">println</span>(<span class="string">"输出"</span>);</span><br><span class="line">System.out.<span class="built_in">println</span>(<span class="built_in">str</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="Lambda可以引用成员变量和局部变量，但是他们会隐含的被-final-修饰。"><a href="#Lambda可以引用成员变量和局部变量，但是他们会隐含的被-final-修饰。" class="headerlink" title="Lambda可以引用成员变量和局部变量，但是他们会隐含的被 final 修饰。"></a>Lambda可以引用成员变量和局部变量，但是他们会隐含的被 <strong>final</strong> 修饰。</h4><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">String </span>separator = <span class="string">","</span><span class="comment">;</span></span><br><span class="line"><span class="symbol">List</span>&lt;<span class="keyword">String&gt; </span><span class="keyword">strList </span>= Arrays.asList(<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>)<span class="comment">;</span></span><br><span class="line"><span class="keyword">strList.forEach(str </span>-&gt; &#123;</span><br><span class="line">System.out.println(<span class="keyword">str </span>+ separator)<span class="comment">;</span></span><br><span class="line">&#125;)<span class="comment">;</span></span><br></pre></td></tr></table></figure><p>同：<br><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="keyword">String</span> separator = <span class="string">","</span>;</span><br><span class="line">List&lt;<span class="keyword">String</span>&gt; strList = Arrays.asList(<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>);</span><br><span class="line">strList.forEach(<span class="built_in">str</span> -&gt; &#123;</span><br><span class="line">System.out.<span class="built_in">println</span>(<span class="built_in">str</span> + separator);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><h4 id="Lambda返回值"><a href="#Lambda返回值" class="headerlink" title="Lambda返回值"></a>Lambda返回值</h4><p>如果函数体中只有一条语句，则无需写<strong>return</strong>语句，例如：</p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; list2 = Arrays.asList(<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>);</span><br><span class="line">list2.sort<span class="function"><span class="params">((e1, e2) -&gt; e1.compareTo(e2))</span>;</span></span><br></pre></td></tr></table></figure><p>同：</p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> list2.sort<span class="function"><span class="params">((e1, e2) -&gt; &#123;</span></span></span><br><span class="line"><span class="function"><span class="params">int compare = e1.compareTo(e2);</span></span></span><br><span class="line"><span class="function"><span class="params"><span class="keyword">return</span> compare;</span></span></span><br><span class="line"><span class="function"><span class="params">&#125;)</span>;</span></span><br></pre></td></tr></table></figure><h3 id="函数式接口（Functional-Interface）"><a href="#函数式接口（Functional-Interface）" class="headerlink" title="函数式接口（Functional Interface）"></a>函数式接口（<strong>Functional Interface</strong>）</h3><ul><li>什么样的才算是函数式接口呢？ <blockquote><p>首先定义<strong>一个接口</strong><br>接口中定义 <strong>有且仅有一个</strong> 抽象方法</p></blockquote></li></ul><p>例如：</p><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">FunctionalDemo</span> &#123;</span><br><span class="line"><span class="comment">// 抽象方法</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">add</span>(<span class="params"><span class="keyword">int</span> a, <span class="keyword">int</span> b</span>)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用：</p><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(<span class="params">String[] args</span>) </span>&#123;</span><br><span class="line"><span class="comment">// Java8之前是用匿名函数来实现的。</span></span><br><span class="line">       FunctionalDemo methods = (a, b) -&gt; &#123;</span><br><span class="line">            <span class="keyword">return</span> a + b;</span><br><span class="line">       &#125;;</span><br><span class="line">       <span class="keyword">int</span> sum = methods.<span class="keyword">add</span>(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">       System.<span class="keyword">out</span>.println(sum);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>函数式接口在实际应用中容易出错，当其他开发人员在你的函数式接口中添加了其他抽象方法，此时这个接口就不再是函数式接口了。如何避免这种事情的发生呢？在声明的函数式接口上添加注解 <strong><em>@FunctionalInterface</em></strong>。添加注解后如果添加其他抽象方法则编译器报错。<br><img src="https://img-blog.csdnimg.cn/2018120413311650.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="!在这里插入图片描述\](https://img-blog.csdnimg.cn/20181204132900553.png)">在上述描述中多次提到抽象方法，主要是因为函数式接口中允许添加 </p><ol><li>默认方法，默认方法不是抽象方法。</li><li>静态方法，静态方法也不是抽象方法，它已经是一个实现了的方法。静态方法，静态方法也不是抽象方法，它已经是一个实现了的方法。</li><li>重写Object中的Public方法重写Object中的Public方法。</li></ol><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">@FunctionalInterface</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">FunctionalDemo</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">add</span>(<span class="params"><span class="keyword">int</span> a, <span class="keyword">int</span> b</span>)</span>;</span><br><span class="line">    </span><br><span class="line"><span class="comment">/** 默认方法 */</span></span><br><span class="line"><span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">defaultMethod</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">System.<span class="keyword">out</span>.println(<span class="string">"default method 1"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">defaultMethod2</span>(<span class="params">String message</span>) </span>&#123;</span><br><span class="line">System.<span class="keyword">out</span>.println(message + <span class="string">"：default method 2 "</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 静态方法</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">printMessage</span>(<span class="params">String message</span>) </span>&#123;</span><br><span class="line">System.<span class="keyword">out</span>.println(message);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 重写Object中的方法。</span></span><br><span class="line">@Override</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span>(<span class="params"></span>)</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> boolean <span class="title">equals</span>(<span class="params">Object obj</span>)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用：</p><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(<span class="params">String[] args</span>) </span>&#123;</span><br><span class="line">        FunctionalDemo methods = (a, b) -&gt; &#123;</span><br><span class="line">            <span class="keyword">return</span> a + b;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">int</span> sum = methods.<span class="keyword">add</span>(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">        System.<span class="keyword">out</span>.println(sum);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 调用默认方法</span></span><br><span class="line">        methods.defaultMethod();</span><br><span class="line">        methods.defaultMethod2(<span class="string">"默认方法加参数"</span>);</span><br><span class="line">        <span class="comment">// 静态方法</span></span><br><span class="line">        FunctionalDemo.printMessage(<span class="string">"静态方法"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>结果：</p><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3</span></span><br><span class="line"><span class="keyword">default</span> <span class="function"><span class="keyword">method</span> 1</span></span><br><span class="line"><span class="function">默认方法加参数：<span class="title">default</span> <span class="title">method</span> 2 </span></span><br><span class="line"><span class="function">静态方法**</span></span><br></pre></td></tr></table></figure><p>JDK中的栗子：</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">java<span class="selector-class">.lang</span><span class="selector-class">.Runnable</span>,</span><br><span class="line"></span><br><span class="line">java<span class="selector-class">.util</span><span class="selector-class">.Comparator</span>,</span><br><span class="line"></span><br><span class="line">java<span class="selector-class">.util</span><span class="selector-class">.concurrent</span><span class="selector-class">.Callable</span></span><br></pre></td></tr></table></figure><h4 id="接口的默认方法"><a href="#接口的默认方法" class="headerlink" title="接口的默认方法"></a>接口的默认方法</h4><p>Java8之后允许在接口中添加默认方法，默认方法不需要实现，如果有需要则可以覆盖默认方法，而抽象方法必须要实现。</p><p>接口<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">Function</span> &#123;</span><br><span class="line">    <span class="comment">// 抽象方法</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">required</span>(<span class="params"></span>)</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 默认方法</span></span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">notRequired</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 函数体</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>实现类<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FunctionalImpl</span> <span class="keyword">implements</span> <span class="title">Function</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">required</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"interface abstract method must override"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">notRequired</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"interface default method not required"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>使用：</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> main(<span class="built_in">String</span>[] args) &#123;</span><br><span class="line"> <span class="built_in">Function</span> <span class="function"><span class="keyword">function</span> = <span class="title">FunctionalFactory</span>.<span class="title">crate</span>(<span class="params">FunctionalImpl::<span class="keyword">new</span></span>)</span>;</span><br><span class="line">        <span class="function"><span class="keyword">function</span>.<span class="title">required</span>(<span class="params"></span>)</span>;</span><br><span class="line">        <span class="function"><span class="keyword">function</span>.<span class="title">notRequired</span>(<span class="params"></span>)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行结果：</p><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="keyword">abstract</span> <span class="function"><span class="keyword">method</span> <span class="title">must</span> <span class="title">override</span></span></span><br><span class="line"><span class="function"><span class="title">interface</span> <span class="title">default</span> <span class="title">method</span> <span class="title">not</span> <span class="title">required</span></span></span><br></pre></td></tr></table></figure><p>思考：怎么优雅的使用默认方法呢？</p><blockquote><p>尽管默认方法非常强大，但是在使用默认方法时我们需要小心注意一个地方：在声明一个默认方法前，请仔细思考是不是真的有必要使用默认方法，因为默认方法会带给程序歧义，并且在复杂的继承体系中容易产生编译错误</p></blockquote><h4 id="方法引用"><a href="#方法引用" class="headerlink" title="方法引用"></a>方法引用</h4><blockquote><p>方法引用提供了非常有用的语法，可以直接引用已有Java类或对象（实例）的方法或构造器。与lambda联合使用，方法引用可以使语言的构造更紧凑简洁，减少冗余代码。</p></blockquote><p>例如：<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Person</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 构造器引用</span></span><br><span class="line"><span class="comment">     * @param supplier 该引用接收一个空构造参数</span></span><br><span class="line"><span class="comment">     * @return</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Person <span class="title">constructMethod</span>(<span class="params">final Supplier&lt;Person&gt; supplier</span>) </span>&#123;</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"构造器引用, 语法是：Class::new， 构造器无参"</span>);</span><br><span class="line">        <span class="keyword">return</span> supplier.<span class="keyword">get</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 静态方法引用</span></span><br><span class="line"><span class="comment">     * @param person 该引用接收一个Person参数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">staticMethod</span>(<span class="params">Person person</span>) </span>&#123;</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"构造器引用，语法是Class::static_method, 接收到的person："</span> + person.toString());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 特定方法的引用</span></span><br><span class="line"><span class="comment">     * @param person 该引用接收一个Person参数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">instanceMethod</span>(<span class="params">Person person</span>) </span>&#123;</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"特定对象的方法引用，语法是：Class::method, 接收到的person: "</span> + person.toString());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 任意方法的引用</span></span><br><span class="line"><span class="comment">     * 注意：无参</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">otherMethod</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"任意对象的方法引用，语法是：Class::method， 无参"</span> + <span class="keyword">this</span>.toString());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>使用：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LambdaTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> void main(String[] args) &#123;</span><br><span class="line">        <span class="comment">// 构造器引入</span></span><br><span class="line">        Person person = Person.constructMethod(Person::new);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">List</span>&lt;Person&gt; <span class="keyword">list</span> = <span class="keyword">new</span> ArrayList&lt;&gt;(Arrays.asList(person));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 静态方法引入</span></span><br><span class="line">        <span class="keyword">list</span>.<span class="keyword">forEach</span>(Person::staticMethod);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">list</span>.<span class="keyword">forEach</span>(person::instanceMethod);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">list</span>.<span class="keyword">forEach</span>(Person::otherMethod);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行结果<br><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">构造器引用, 语法是：<span class="attribute">Class</span>::new， 构造器无参</span><br><span class="line">构造器引用，语法是<span class="attribute">Class</span>::static_method, 接收到的person：domain.Person<span class="variable">@d70c109</span></span><br><span class="line">特定对象的方法引用，语法是：<span class="attribute">Class</span>::method, 接收到的<span class="attribute">person</span>: domain.Person<span class="variable">@d70c109</span></span><br><span class="line">任意对象的方法引用，语法是：<span class="attribute">Class</span>::method， 无参domain.Person<span class="variable">@d70c109</span></span><br></pre></td></tr></table></figure></p><h3 id="Optional-官方文档"><a href="#Optional-官方文档" class="headerlink" title="Optional 官方文档"></a>Optional <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html" target="_blank" rel="noopener">官方文档</a></h3><blockquote><p>优雅的判断 <strong><em>null</em></strong>， 不再进行 <strong><em>if（obj == null） {……}</em></strong></p></blockquote><h4 id="慎重使用以下方式："><a href="#慎重使用以下方式：" class="headerlink" title="慎重使用以下方式："></a>慎重使用以下方式：</h4><blockquote><p>   调用 isPresent() 方法时<br>   调用 get() 方法时<br>   Optional 类型作为类/实例属性时<br>   Optional 类型作为方法参数时</p></blockquote><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">User<span class="built_in"> user </span>= new User();</span><br><span class="line">Optional&lt;User&gt; optional = Optional.ofNullable(user); </span><br><span class="line"><span class="keyword">if</span> (optional.isPresent()) &#123;</span><br><span class="line"><span class="built_in">User </span>u = optional.<span class="builtin-name">get</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上面代码跟以前写的null判断有什么区别呢？</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">User<span class="built_in"> user </span>= new User();</span><br><span class="line"><span class="keyword">if</span> (user != <span class="literal">null</span>) &#123;</span><br><span class="line">System.out.println(user.getName());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如何优雅的使用Optional呢？</p><p>Optional中的方法</p><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span>&lt;U&gt; <span class="keyword">Optional</span>&lt;U&gt; map(<span class="function"><span class="keyword">Function</span></span>&lt;? super T, ? <span class="keyword">extends</span> U&gt; mapper)</span><br><span class="line"><span class="keyword">public</span> T orElse(T other)</span><br><span class="line"><span class="keyword">public</span> T orElseGet(Supplier&lt;? <span class="keyword">extends</span> T&gt; other)</span><br><span class="line"><span class="keyword">public</span> void ifPresent(Consumer&lt;? super T&gt; consumer)</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">Optional</span>&lt;T&gt; filter(Predicate&lt;? super T&gt; predicate)</span><br><span class="line"><span class="keyword">public</span>&lt;U&gt; <span class="keyword">Optional</span>&lt;U&gt; flatMap(<span class="function"><span class="keyword">Function</span></span>&lt;? super T, <span class="keyword">Optional</span>&lt;U&gt;&gt; mapper)</span><br><span class="line"><span class="keyword">public</span> &lt;X <span class="keyword">extends</span> Throwable&gt; T orElseThrow(Supplier&lt;? <span class="keyword">extends</span> X&gt; exceptionSupplier) throws X</span><br></pre></td></tr></table></figure><p>例如：<br><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">User</span> <span class="title">zs</span> = new User(<span class="string">"zs"</span>, <span class="number">23</span>, new ArrayList<span class="tag">&lt;&gt;</span>(<span class="string">"篮球"</span>, <span class="string">"旅行"</span>));   </span><br><span class="line">Optional.of(zs).map(<span class="keyword">user</span> <span class="title">-&gt; user</span>.getName()).map(name -&gt; name.toUpperCase()).orElse(null);</span><br></pre></td></tr></table></figure></p><h3 id="Stream"><a href="#Stream" class="headerlink" title="Stream"></a>Stream</h3><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> class Streams &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">enum</span> Status&#123;</span><br><span class="line">        OPEN, CLOSED</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> final <span class="keyword">static</span> class <span class="built_in">Task</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> Status status;</span><br><span class="line">        <span class="keyword">private</span> Integer points;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">Task</span>(final Status status, final Integer points) &#123;</span><br><span class="line">            <span class="keyword">this</span>.status  =status;</span><br><span class="line">            <span class="keyword">this</span>.points = points;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> Status getStatus() &#123;</span><br><span class="line">            <span class="built_in">return</span> status;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> Integer getPoints() &#123;</span><br><span class="line">            <span class="built_in">return</span> points;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main(<span class="keyword">String</span>[] args) &#123;</span><br><span class="line">        Collection&lt;<span class="built_in">Task</span>&gt; tasks = Arrays.asList(</span><br><span class="line">            <span class="keyword">new</span> <span class="built_in">Task</span>(Status.OPEN, <span class="number">5</span>),</span><br><span class="line">            <span class="keyword">new</span> <span class="built_in">Task</span>(Status.OPEN, <span class="number">13</span>),</span><br><span class="line">            <span class="keyword">new</span> <span class="built_in">Task</span>(Status.CLOSED, <span class="number">8</span>)</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 所有OPEN的总points</span></span><br><span class="line">        Integer openSum =</span><br><span class="line">                tasks.stream()          <span class="comment">// 将集合转化为stream</span></span><br><span class="line">                .filter(task -&gt; task.getStatus() == Status.OPEN)   <span class="comment">// 过滤掉CLOSED的选项</span></span><br><span class="line">                .mapToInt(<span class="built_in">Task</span>::getPoints)      <span class="comment">// mapToInt操作通过Task::getPoints这种方式调用每个task实例的getPoints方法把Task的stream转化为Integer的stream</span></span><br><span class="line">                .sum();         <span class="comment">// 用sum函数把所有的分数加起来</span></span><br><span class="line">        System.out.<span class="built_in">println</span>(<span class="string">" OPEN points "</span> + openSum);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        Integer totalPoints = tasks.stream()</span><br><span class="line">                .parallel()                 <span class="comment">// 并行操作</span></span><br><span class="line">                .<span class="built_in">map</span>(<span class="built_in">Task</span>::getPoints)</span><br><span class="line">                .reduce(<span class="number">0</span>, Integer::sum);</span><br><span class="line">        System.out.<span class="built_in">println</span>(<span class="string">"total points "</span> + totalPoints);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 按某属性分组</span></span><br><span class="line">        Map&lt;Status, List&lt;<span class="built_in">Task</span>&gt;&gt; group =</span><br><span class="line">                tasks.stream().collect(Collectors.groupingBy(<span class="built_in">Task</span>::getStatus));</span><br><span class="line">        System.out.<span class="built_in">println</span>(<span class="string">"group by status: "</span> + group);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 计算元素的权重</span></span><br><span class="line">        final Collection&lt; <span class="keyword">String</span> &gt; result = tasks</span><br><span class="line">                .stream()                                        <span class="comment">// Stream&lt; String &gt;</span></span><br><span class="line">                .mapToInt( <span class="built_in">Task</span>::getPoints )                     <span class="comment">// IntStream</span></span><br><span class="line">                .asLongStream()                                  <span class="comment">// LongStream</span></span><br><span class="line">                .mapToDouble( points -&gt; points / totalPoints )   <span class="comment">// DoubleStream</span></span><br><span class="line">                .boxed()                                         <span class="comment">// Stream&lt; Double &gt;</span></span><br><span class="line">                .mapToLong( weigth -&gt; ( <span class="keyword">long</span> )( weigth * <span class="number">100</span> ) ) <span class="comment">// LongStream</span></span><br><span class="line">                .mapToObj( percentage -&gt; percentage + <span class="string">"%"</span> )      <span class="comment">// Stream&lt; String&gt;</span></span><br><span class="line">                .collect( Collectors.toList() );                 <span class="comment">// List&lt; String &gt;</span></span><br><span class="line">        System.out.<span class="built_in">println</span>(<span class="string">"权重为："</span> + result);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Time"><a href="#Time" class="headerlink" title="Time"></a>Time</h4><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> class DateUtil &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">String</span> DATE_FORMAT_FULL = <span class="string">"yyyy-MM-dd HH:mm:ss"</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">String</span> DATE_FORMAT_SHORT = <span class="string">"yyyy-MM-dd"</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">String</span> DATE_FORMAT_COMPACT = <span class="string">"yyyyMMdd"</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">String</span> DATE_FORMAT_COMPACTFULL = <span class="string">"yyyyMMddHHmmss"</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">String</span> DATE_FORMAT_FULL_MSEL = <span class="string">"yyyyMMddHHmmssSSSS"</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">String</span> DATE_YEAR_MONTH = <span class="string">"yyyyMM"</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">String</span> DATE_FORMAT_FULL_MSE = <span class="string">"yyyyMMddHHmmssSSS"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取系统当前日期</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * @return</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Date getCurrentDate() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Date();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取系统当前日期</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * @return</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> LocalDateTime getCurrentLocalDateTime() &#123;</span><br><span class="line">        <span class="keyword">return</span> LocalDateTime.now();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据时间格式返回对应的String类型的时间</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * @param format</span></span><br><span class="line"><span class="comment">     * @return</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">String</span> getCurDateTime(<span class="keyword">String</span> format) &#123;</span><br><span class="line">        LocalDateTime now = LocalDateTime.now();</span><br><span class="line">        DateTimeFormatter dateTimeFormatter = DateTimeFormatter.ofPattern(format);</span><br><span class="line">        <span class="keyword">String</span> dataTime = now.format(dateTimeFormatter);</span><br><span class="line">        <span class="keyword">return</span> dataTime;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 得到当前日期</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * @return String 当前日期 yyyy-MM-dd HH:mm:ss格式</span></span><br><span class="line"><span class="comment">     * @author kevin</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">String</span> getCurDateTimeFull() &#123;</span><br><span class="line">        <span class="keyword">return</span> getCurDateTime(DATE_FORMAT_FULL);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 得到当前日期</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * @return String 当前日期 yyyyMMddHHmmss格式</span></span><br><span class="line"><span class="comment">     * @author kevin</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">String</span> getCurDateTime1() &#123;</span><br><span class="line">        <span class="keyword">return</span> getCurDateTime(DATE_FORMAT_FULL);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 得到当前日期YYYYMM格式</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * @return String 当前日期 yyyyMM格式</span></span><br><span class="line"><span class="comment">     * @author kevin</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">String</span> getCurDateYYYYMM() &#123;</span><br><span class="line">        <span class="keyword">return</span> getCurDateTime(DATE_YEAR_MONTH);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 得到当前日期</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * @return String 当前日期 yyyyMMdd格式</span></span><br><span class="line"><span class="comment">     * @author kevin</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">String</span> getCurDateYYYYMMDD() &#123;</span><br><span class="line">        <span class="keyword">return</span> getCurDateTime(DATE_FORMAT_COMPACT);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 判断是否是今天</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * @param strDate</span></span><br><span class="line"><span class="comment">     * @return</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">boolean</span> isCurrentDay(<span class="keyword">String</span> strDate) &#123;</span><br><span class="line">        <span class="built_in">boolean</span> bRet = <span class="keyword">false</span>;</span><br><span class="line">        LocalDate strLocalDate = LocalDate.parse(strDate);</span><br><span class="line">        <span class="keyword">if</span> (LocalDate.now().getYear() == strLocalDate.getYear()) &#123;</span><br><span class="line">            MonthDay monthDay = MonthDay.from(strLocalDate);</span><br><span class="line">            MonthDay today = MonthDay.from(LocalDate.now());</span><br><span class="line">            <span class="keyword">return</span> monthDay.equals(today);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> bRet;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取几小时后的时间</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * @param hour</span></span><br><span class="line"><span class="comment">     * @param format</span></span><br><span class="line"><span class="comment">     * @return</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">String</span> getAfterDateTime(<span class="built_in">int</span> <span class="built_in">hour</span>, <span class="keyword">String</span> format) &#123;</span><br><span class="line">        LocalTime localTime = LocalTime.now().plusHours(<span class="built_in">hour</span>);</span><br><span class="line">        DateTimeFormatter dateTimeFormatter = DateTimeFormatter.ofPattern(format);</span><br><span class="line">        <span class="keyword">String</span> dataTime = localTime.format(dateTimeFormatter);</span><br><span class="line">        <span class="keyword">return</span> dataTime;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 当前日期时间戳(yyyyMMddHHmmssSSSS)</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * @return</span></span><br><span class="line"><span class="comment">     * @author liangxuekai</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">String</span> getTimeStamp() &#123;</span><br><span class="line">        LocalDateTime now = LocalDateTime.now();</span><br><span class="line">        DateTimeFormatter dateTimeFormatter = DateTimeFormatter.ofPattern(DATE_FORMAT_FULL_MSEL);</span><br><span class="line">        <span class="keyword">return</span> now.format(dateTimeFormatter);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 日期转字符串</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * @return String</span></span><br><span class="line"><span class="comment">     * @author kevin</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">String</span> parseDateToString(Date thedate, <span class="keyword">String</span> format) &#123;</span><br><span class="line">        <span class="keyword">if</span> (thedate != <span class="keyword">null</span>) &#123;</span><br><span class="line">            Instant instant = thedate.toInstant();</span><br><span class="line">            ZoneId zone = ZoneId.systemDefault();</span><br><span class="line">            LocalDateTime localDateTime = LocalDateTime.ofInstant(instant, zone);</span><br><span class="line">            DateTimeFormatter dateTimeFormatter = DateTimeFormatter.ofPattern(format);</span><br><span class="line">            <span class="keyword">return</span> localDateTime.format(dateTimeFormatter);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * parseDateToString(Date thedate, String format)的重载方法</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * @param thedate</span></span><br><span class="line"><span class="comment">     * @return</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">String</span> parseDateToString(Date thedate) &#123;</span><br><span class="line">        <span class="comment">// String format = "yyyy-MM-dd";</span></span><br><span class="line">        <span class="keyword">return</span> parseDateToString(thedate, DATE_FORMAT_FULL);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 字符串转日期</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * @return Date</span></span><br><span class="line"><span class="comment">     * @author kevin</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Date parseStringToDate(<span class="keyword">String</span> thedate, <span class="keyword">String</span> format) &#123;</span><br><span class="line">        DateFormat sdf = <span class="keyword">new</span> SimpleDateFormat(format);</span><br><span class="line">        Date dd1 = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            dd1 = sdf.parse(thedate);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ParseException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dd1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 由String型日期转成format形式String</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * @param format1 原先格式</span></span><br><span class="line"><span class="comment">     * @param format2 转化格式</span></span><br><span class="line"><span class="comment">     * @return String</span></span><br><span class="line"><span class="comment">     * @author kevin</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">String</span> changeFormatDateString(<span class="keyword">String</span> format1, <span class="keyword">String</span> format2, <span class="keyword">String</span> strDate) &#123;</span><br><span class="line">        <span class="keyword">if</span> (strDate == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">if</span> (strDate.length() &gt;= format1.length() &amp;&amp; format1.length() &gt;= format2.length()) &#123;</span><br><span class="line">            <span class="keyword">return</span> parseDateToString(parseStringToDate(strDate, format1), format2);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> strDate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 得到当前日期的前N天时间 yyyymmdd</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * @param format</span></span><br><span class="line"><span class="comment">     * @param day</span></span><br><span class="line"><span class="comment">     * @return</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">String</span> beforeNDaysDate(<span class="keyword">String</span> format, <span class="built_in">int</span> <span class="built_in">day</span>) &#123;</span><br><span class="line">        DateTimeFormatter dateTimeFormatter = DateTimeFormatter.ofPattern(format);</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">day</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> LocalDateTime.now().minusDays(<span class="built_in">day</span>).format(dateTimeFormatter);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获得N个月后的日期</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="comment">     * theDate 日期</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="comment">     * int month 月数</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="comment">     * format 格式</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">String</span> afterNMonthDate(<span class="keyword">String</span> theDate, <span class="built_in">int</span> <span class="built_in">month</span>, <span class="keyword">String</span> format) &#123;</span><br><span class="line"></span><br><span class="line">        DateTimeFormatter dateTimeFormatter = DateTimeFormatter.ofPattern(format);</span><br><span class="line">        <span class="keyword">return</span> LocalDateTime.parse(theDate,dateTimeFormatter)</span><br><span class="line">                .plusMonths(<span class="built_in">month</span>)</span><br><span class="line">                .format(dateTimeFormatter);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 得到N天后的日期</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * @param theDate 某日期</span></span><br><span class="line"><span class="comment">     *                格式 yyyy-MM-dd</span></span><br><span class="line"><span class="comment">     * @param nDayNum N天</span></span><br><span class="line"><span class="comment">     * @return String N天后的日期</span></span><br><span class="line"><span class="comment">     * @author kevin</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">String</span> afterNDaysDate(<span class="keyword">String</span> theDate, Integer nDayNum, <span class="keyword">String</span> format) &#123;</span><br><span class="line">        DateTimeFormatter dateTimeFormatter = DateTimeFormatter.ofPattern(format);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> LocalDateTime.parse(theDate,dateTimeFormatter)</span><br><span class="line">                .plusDays(nDayNum)</span><br><span class="line">                .format(dateTimeFormatter);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 得到N小时后的日期</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * @param theDate  时间</span></span><br><span class="line"><span class="comment">     * @param nHourNum N小时数</span></span><br><span class="line"><span class="comment">     * @param format   时间格式</span></span><br><span class="line"><span class="comment">     * @return</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">String</span> afterNHoursDate(<span class="keyword">String</span> theDate, Integer nHourNum, <span class="keyword">String</span> format) &#123;</span><br><span class="line">        DateTimeFormatter dateTimeFormatter = DateTimeFormatter.ofPattern(format);</span><br><span class="line">        <span class="keyword">return</span> LocalDateTime.parse(theDate,dateTimeFormatter)</span><br><span class="line">                .plusHours(nHourNum)</span><br><span class="line">                .format(dateTimeFormatter);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 得到N分钟后的日期</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * @param theDate</span></span><br><span class="line"><span class="comment">     * @param nMinNum</span></span><br><span class="line"><span class="comment">     * @param format</span></span><br><span class="line"><span class="comment">     * @return</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">String</span> afterNMinsDate(<span class="keyword">String</span> theDate, Integer nMinNum, <span class="keyword">String</span> format) &#123;</span><br><span class="line">        DateTimeFormatter dateTimeFormatter = DateTimeFormatter.ofPattern(format);</span><br><span class="line">        <span class="keyword">return</span> LocalDateTime.parse(theDate,dateTimeFormatter)</span><br><span class="line">                .plusMinutes(nMinNum)</span><br><span class="line">                .format(dateTimeFormatter);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 得到N秒后的日期</span></span><br><span class="line"><span class="comment">     * @param theDate</span></span><br><span class="line"><span class="comment">     * @param nSecNum</span></span><br><span class="line"><span class="comment">     * @param format</span></span><br><span class="line"><span class="comment">     * @return</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">String</span> afterNSecondsDate(<span class="keyword">String</span> theDate, Integer nSecNum, <span class="keyword">String</span> format) &#123;</span><br><span class="line">        DateTimeFormatter dateTimeFormatter = DateTimeFormatter.ofPattern(format);</span><br><span class="line">        <span class="keyword">return</span> LocalDateTime.parse(theDate,dateTimeFormatter)</span><br><span class="line">                .plusSeconds(nSecNum)</span><br><span class="line">                .format(dateTimeFormatter);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 比较两个字符串格式日期大小,带格式的日期</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">boolean</span> isBefore(<span class="keyword">String</span> strdat1, <span class="keyword">String</span> strdat2, <span class="keyword">String</span> format) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Date dat1 = parseStringToDate(strdat1, format);</span><br><span class="line">            Date dat2 = parseStringToDate(strdat2, format);</span><br><span class="line">            <span class="keyword">return</span> dat1.before(dat2);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 比较两个字符串格式日期大小,带格式的日期,返回int</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">long</span> isBefore_int(<span class="keyword">String</span> strdat1, <span class="keyword">String</span> strdat2, <span class="keyword">String</span> format) &#123;</span><br><span class="line">        <span class="keyword">long</span> result = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Date dat1 = parseStringToDate(strdat1, format);</span><br><span class="line">            Date dat2 = parseStringToDate(strdat2, format);</span><br><span class="line">            <span class="keyword">return</span> dat2.getTime() - dat1.getTime();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * 得到上一个月或者下一个月的日期</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">String</span> getDayafterMonth(<span class="keyword">String</span> theDate, <span class="built_in">int</span> <span class="built_in">month</span>, <span class="keyword">String</span> formatStr) &#123;</span><br><span class="line">        DateTimeFormatter dateTimeFormatter = DateTimeFormatter.ofPattern(formatStr);</span><br><span class="line">        <span class="keyword">return</span> LocalDateTime.parse(theDate).plusMonths(<span class="built_in">month</span>).format(dateTimeFormatter);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 将秒转换为小时分秒等</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * @param sec</span></span><br><span class="line"><span class="comment">     * @return</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">String</span> changeTime(<span class="built_in">int</span> sec) &#123;</span><br><span class="line">        <span class="keyword">String</span> temp = <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">if</span> (sec &lt; <span class="number">60</span>) &#123;</span><br><span class="line">            temp = <span class="string">""</span> + sec + <span class="string">"秒"</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (sec &lt; <span class="number">3600</span>) &#123;</span><br><span class="line">            temp = <span class="string">""</span> + sec / <span class="number">60</span> + <span class="string">"分"</span> + sec % <span class="number">60</span> + <span class="string">"秒"</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            temp = <span class="string">""</span> + sec / <span class="number">3600</span> + <span class="string">"小时"</span> + (sec % <span class="number">3600</span>) / <span class="number">60</span> + <span class="string">"分"</span> + sec % <span class="number">60</span> + <span class="string">"秒"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> temp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 方法描述:</span></span><br><span class="line"><span class="comment">     * 计算两个日期相差天数</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * @param end   结束日期</span></span><br><span class="line"><span class="comment">     * @param start 开始日期</span></span><br><span class="line"><span class="comment">     * @return 作者：liangxuekai</span></span><br><span class="line"><span class="comment">     * 日期：2018 2018年1月31日</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> getSubDays(<span class="keyword">String</span> end, <span class="keyword">String</span> start) &#123;</span><br><span class="line">        LocalDate startDate = LocalDate.parse(start);</span><br><span class="line">        LocalDate endDate = LocalDate.parse(end);</span><br><span class="line">        Long between = ChronoUnit.DAYS.between(startDate, endDate);</span><br><span class="line">        <span class="keyword">return</span> between.intValue();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">String</span> getTimeDiff(Date time1, Date time2) <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="keyword">long</span> l = time1.getTime() - time2.getTime();</span><br><span class="line">        <span class="keyword">String</span> returnStr = <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">long</span> <span class="built_in">day</span> = l / (<span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span>);</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">day</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            returnStr += (<span class="built_in">day</span> + <span class="string">"天"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">long</span> <span class="built_in">hour</span> = (l / (<span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span>) - <span class="built_in">day</span> * <span class="number">24</span>);</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">hour</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            returnStr += (<span class="built_in">hour</span> + <span class="string">"小时"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">long</span> <span class="built_in">min</span> = ((l / (<span class="number">60</span> * <span class="number">1000</span>)) - <span class="built_in">day</span> * <span class="number">24</span> * <span class="number">60</span> - <span class="built_in">hour</span> * <span class="number">60</span>);</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">min</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            returnStr += (<span class="built_in">min</span> + <span class="string">"分"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">long</span> s = (l / <span class="number">1000</span> - <span class="built_in">day</span> * <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> - <span class="built_in">hour</span> * <span class="number">60</span> * <span class="number">60</span> - <span class="built_in">min</span> * <span class="number">60</span>);</span><br><span class="line">        <span class="keyword">if</span> (s &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            returnStr += (s + <span class="string">"秒"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> returnStr;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="参考文章："><a href="#参考文章：" class="headerlink" title="参考文章："></a>参考文章：</h3><h4 id="Java-8新特性终极指南-http-www-importnew-com-11908-html"><a href="#Java-8新特性终极指南-http-www-importnew-com-11908-html" class="headerlink" title="Java 8新特性终极指南  http://www.importnew.com/11908.html"></a>Java 8新特性终极指南  <a href="http://www.importnew.com/11908.html" target="_blank" rel="noopener">http://www.importnew.com/11908.html</a></h4><h4 id="优雅的使用Optional-https-blog-csdn-net-zhang89xiao-article-details-76596046"><a href="#优雅的使用Optional-https-blog-csdn-net-zhang89xiao-article-details-76596046" class="headerlink" title="优雅的使用Optional  https://blog.csdn.net/zhang89xiao/article/details/76596046"></a>优雅的使用Optional  <a href="https://blog.csdn.net/zhang89xiao/article/details/76596046" target="_blank" rel="noopener">https://blog.csdn.net/zhang89xiao/article/details/76596046</a></h4><h4 id="深入浅出Stream和parallelStreamhttps-blog-csdn-net-darrensty-article-details-79283146"><a href="#深入浅出Stream和parallelStreamhttps-blog-csdn-net-darrensty-article-details-79283146" class="headerlink" title="深入浅出Stream和parallelStreamhttps://blog.csdn.net/darrensty/article/details/79283146"></a>深入浅出Stream和parallelStream<a href="https://blog.csdn.net/darrensty/article/details/79283146" target="_blank" rel="noopener">https://blog.csdn.net/darrensty/article/details/79283146</a></h4><h4 id="java8时间工具类https-www-jianshu-com-p-6261f4162cfe"><a href="#java8时间工具类https-www-jianshu-com-p-6261f4162cfe" class="headerlink" title="java8时间工具类https://www.jianshu.com/p/6261f4162cfe"></a>java8时间工具类<a href="https://www.jianshu.com/p/6261f4162cfe" target="_blank" rel="noopener">https://www.jianshu.com/p/6261f4162cfe</a></h4>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;Lambda表达式&quot;&gt;&lt;a href=&quot;#Lambda表达式&quot; class=&quot;headerlink&quot; title=&quot;Lambda表达式&quot;&gt;&lt;/a&gt;Lambda表达式&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;lambda简称闭包，类似Groovy，Scala等的函数
      
    
    </summary>
    
      <category term="Java" scheme="https://qijianguo.com/categories/Java/"/>
    
    
      <category term="java,java8" scheme="https://qijianguo.com/tags/java-java8/"/>
    
  </entry>
  
  <entry>
    <title>从Java内存模型讲双重检查锁原理</title>
    <link href="https://qijianguo.com/Java/2019/04/17/%E4%BB%8EJava%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%E8%AE%B2%E5%8F%8C%E9%87%8D%E6%A3%80%E6%9F%A5%E9%94%81%E5%8E%9F%E7%90%86.html"/>
    <id>https://qijianguo.com/Java/2019/04/17/从Java内存模型讲双重检查锁原理.html</id>
    <published>2019-04-17T06:18:44.258Z</published>
    <updated>2019-04-17T07:33:38.459Z</updated>
    
    <content type="html"><![CDATA[<p>转载： 超赞的两篇文章<br><a href="https://www.jianshu.com/p/4586cb11c62d" target="_blank" rel="noopener">https://www.jianshu.com/p/4586cb11c62d</a></p><p><a href="https://www.cnblogs.com/xz816111/p/8470048.html" target="_blank" rel="noopener">https://www.cnblogs.com/xz816111/p/8470048.html</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;转载： 超赞的两篇文章&lt;br&gt;&lt;a href=&quot;https://www.jianshu.com/p/4586cb11c62d&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://www.jianshu.com/p/4586cb11c62d&lt;/a&gt;
      
    
    </summary>
    
      <category term="Java" scheme="https://qijianguo.com/categories/Java/"/>
    
    
      <category term="java" scheme="https://qijianguo.com/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>MySQL性能优化</title>
    <link href="https://qijianguo.com/MySQL/2019/04/17/MySQL%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96.html"/>
    <id>https://qijianguo.com/MySQL/2019/04/17/MySQL性能优化.html</id>
    <published>2019-04-17T06:18:44.256Z</published>
    <updated>2019-04-17T07:46:25.482Z</updated>
    
    <content type="html"><![CDATA[<ul><li>【很实用】mysql慢查询 <a href="https://www.cnblogs.com/sunke/p/5779230.html" target="_blank" rel="noopener">https://www.cnblogs.com/sunke/p/5779230.html</a></li></ul><blockquote><p>SHOW VARIABLES LIKE ‘%slow%’<br><img src="https://img-blog.csdnimg.cn/20181116173750352.png" alt="在这里插入图片描述"><br>SET  @@global.slow_query_log = ON;<br><img src="https://img-blog.csdnimg.cn/20181116173822632.png" alt="在这里插入图片描述"><br>SET @@global.log_output=’TABLE’;<br>可以查看慢查询的语句，包含慢查询的SQL、执行时间、频率等<br><img src="https://img-blog.csdnimg.cn/20181116173915569.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>SET GLOBAL long_query_time = 2<br>设置大于long_query_time秒的查询<br>模拟一下<br>SELECT SLEEP(10);</p></blockquote><p>*【很实用】MySQL优化技巧：<a href="https://blog.csdn.net/u013087513/article/details/77899412" target="_blank" rel="noopener">https://blog.csdn.net/u013087513/article/details/77899412</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ul&gt;
&lt;li&gt;【很实用】mysql慢查询 &lt;a href=&quot;https://www.cnblogs.com/sunke/p/5779230.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://www.cnblogs.com/sunke/p
      
    
    </summary>
    
      <category term="MySQL" scheme="https://qijianguo.com/categories/MySQL/"/>
    
    
      <category term="mysql" scheme="https://qijianguo.com/tags/mysql/"/>
    
  </entry>
  
  <entry>
    <title>Vue学习中踩的坑</title>
    <link href="https://qijianguo.com/Vue/2019/04/17/Vue%E5%AD%A6%E4%B9%A0%E4%B8%AD%E8%B8%A9%E7%9A%84%E5%9D%91.html"/>
    <id>https://qijianguo.com/Vue/2019/04/17/Vue学习中踩的坑.html</id>
    <published>2019-04-17T06:18:44.253Z</published>
    <updated>2019-04-17T07:47:21.761Z</updated>
    
    <content type="html"><![CDATA[<ul><li>ERROR in Cannot find module ‘node-sass’<br>参考： <a href="https://blog.csdn.net/Nalaluky/article/details/82598300" target="_blank" rel="noopener">https://blog.csdn.net/Nalaluky/article/details/82598300</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ul&gt;
&lt;li&gt;ERROR in Cannot find module ‘node-sass’&lt;br&gt;参考： &lt;a href=&quot;https://blog.csdn.net/Nalaluky/article/details/82598300&quot; target=&quot;_blank&quot; re
      
    
    </summary>
    
      <category term="Vue" scheme="https://qijianguo.com/categories/Vue/"/>
    
    
      <category term="vue" scheme="https://qijianguo.com/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>Android中ViewPager</title>
    <link href="https://qijianguo.com/Android/2019/04/17/Android%E4%B8%ADViewPager.html"/>
    <id>https://qijianguo.com/Android/2019/04/17/Android中ViewPager.html</id>
    <published>2019-04-17T06:18:44.250Z</published>
    <updated>2019-04-17T07:44:29.995Z</updated>
    
    <content type="html"><![CDATA[<p>参考：ViewPager 详解（一）—基本入门<a href="https://blog.csdn.net/suyimin2010/article/details/80659993" target="_blank" rel="noopener">传送门</a><br>参考：ViewPager 全面剖析及使用详解<a href="https://www.jianshu.com/p/e5abbda4a71c" target="_blank" rel="noopener">传送门</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;参考：ViewPager 详解（一）—基本入门&lt;a href=&quot;https://blog.csdn.net/suyimin2010/article/details/80659993&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;传送门&lt;/a&gt;&lt;br&gt;参考：
      
    
    </summary>
    
      <category term="Android" scheme="https://qijianguo.com/categories/Android/"/>
    
    
      <category term="android" scheme="https://qijianguo.com/tags/android/"/>
    
  </entry>
  
  <entry>
    <title>Java工具类</title>
    <link href="https://qijianguo.com/Java/2019/04/17/Java%E5%B7%A5%E5%85%B7%E7%B1%BB.html"/>
    <id>https://qijianguo.com/Java/2019/04/17/Java工具类.html</id>
    <published>2019-04-17T06:18:44.248Z</published>
    <updated>2019-04-17T07:45:34.485Z</updated>
    
    <content type="html"><![CDATA[<h3 id="IOUtils"><a href="#IOUtils" class="headerlink" title="IOUtils"></a>IOUtils</h3><ul><li>org.apache.commons.io.IOUtils</li></ul><p>方法：</p><blockquote><p>readLines 从输入流中读取多行数据<br>write 把字节. 字符等写入输出流<br>toInputStream 将字符串转化为输入流<br>toString 转化IO流、byte[]、Url为String<br>toByteArray<br>copy 拷贝文件，支持2G以上的数据<br>lineIterator 从输入流返回一个迭代器，根据参数要求读取的数据量，全部读取，如果数据不够，则失败<br>closeQuietly 关闭流</p></blockquote><p><strong><em>pom.xml</em></strong><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.commons<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></p><ul><li>示例：<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.commons.io.IOUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.io.LineIterator;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.util.<span class="built_in">List</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="markdown">/**</span></span></span><br><span class="line"><span class="comment"><span class="markdown"> * @author Angus</span></span></span><br><span class="line"><span class="comment"><span class="markdown"> * @version 1.0</span></span></span><br><span class="line"><span class="comment"><span class="markdown"> * @Title: TestIOUtils</span></span></span><br><span class="line"><span class="comment"><span class="markdown"> * @Description: TODO</span></span></span><br><span class="line"><span class="comment"><span class="markdown"> * @date 2018/11/20 13:13</span></span></span><br><span class="line"><span class="comment"><span class="markdown"> */</span></span></span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">TestIOUtils</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    public <span class="keyword">static</span> <span class="keyword">void</span> main(<span class="built_in">String</span>[] args) &#123;</span><br><span class="line">        testIOUtils();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private <span class="keyword">static</span> <span class="keyword">void</span> testIOUtils() &#123;</span><br><span class="line">        File file = <span class="keyword">new</span> File(<span class="string">"test.json"</span>);</span><br><span class="line">        FileInputStream <span class="keyword">in</span> = <span class="keyword">null</span>;</span><br><span class="line">        FileOutputStream out = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">in</span> = <span class="keyword">new</span> FileInputStream(file);</span><br><span class="line">            out = <span class="keyword">new</span> FileOutputStream(<span class="string">"testCopy.json"</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 从输入流中读取多行数据</span></span><br><span class="line">            <span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; list = IOUtils.readLines(<span class="keyword">in</span>, <span class="string">"UTF-8"</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="built_in">StringBuffer</span> str = <span class="keyword">new</span> <span class="built_in">StringBuffer</span>();</span><br><span class="line">            list.forEach(value -&gt; &#123;</span><br><span class="line">                str.append(value);</span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="comment">// 把字节. 字符等写入输出流</span></span><br><span class="line">            IOUtils.write(str, out, <span class="string">"UTF-8"</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="comment">// 将字符串转化为输入流</span></span><br><span class="line">            <span class="built_in">String</span> testWord = <span class="string">"Hello IoUtils!"</span>;</span><br><span class="line">            InputStream in2 = IOUtils.toInputStream(testWord);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// toString转化IO流、byte[]、Url为String</span></span><br><span class="line">            <span class="built_in">String</span> inStr = IOUtils.toString(in2, <span class="string">"UTF-8"</span>);</span><br><span class="line">            byte[] bytes = IOUtils.toByteArray(in2);</span><br><span class="line">            <span class="built_in">String</span> byteStr = IOUtils.toString(bytes);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 拷贝文件，支持2G以上的数据</span></span><br><span class="line">            <span class="built_in">int</span> count = IOUtils.copy(<span class="keyword">in</span>, out);</span><br><span class="line">            <span class="built_in">String</span> response = count &gt; <span class="number">0</span> ? <span class="string">"拷贝成功"</span> : <span class="string">"拷贝失败，count &gt; 2147483647L"</span>;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 从输入流返回一个迭代器，根据参数要求读取的数据量，全部读取，如果数据不够，则失败</span></span><br><span class="line">            LineIterator lineIterator = IOUtils.lineIterator(<span class="keyword">new</span> FileInputStream(<span class="keyword">new</span> File(<span class="string">"test.json"</span>)), <span class="string">"UTF-8"</span>);</span><br><span class="line">            <span class="keyword">while</span> (lineIterator.hasNext()) &#123;</span><br><span class="line">                <span class="built_in">String</span> line = lineIterator.nextLine();</span><br><span class="line">            &#125;</span><br><span class="line">            lineIterator.close();</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            IOUtils.closeQuietly(<span class="keyword">in</span>);</span><br><span class="line">            IOUtils.closeQuietly(out);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="FileUtils"><a href="#FileUtils" class="headerlink" title="FileUtils"></a>FileUtils</h3><ul><li>org.apache.commons.io.FileUtils</li></ul><p>方法：</p><blockquote><p>forceMkdir 强制创建文件夹，如果父级目录不存在则先创建父级目录<br>deleteDirectory 删除文件夹<br>writeStringToFile 将String写入文件中，如果文件目录不存在则都创建<br>copyFile 拷贝文件<br>forceDelete 强制删除<br>forceMkdir 强制创建目录，如果父级目录不存在则创建父级目录<br>copyDirectory 拷贝文件夹！ 【警告】如下操作（创建子文件夹），会造成死循环！<br>listFiles 列举目录下的文件（不是目录！）</p></blockquote><ul><li>示例：<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.commons.io.FileUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.io.filefilter.DirectoryFileFilter;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.io.filefilter.FileFileFilter;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.io.filefilter.IOFileFilter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.<span class="built_in">File</span>;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @author Angus</span></span><br><span class="line"><span class="comment"> * @version 1.0</span></span><br><span class="line"><span class="comment"> * @Title: TestFileUtils</span></span><br><span class="line"><span class="comment"> * @Description: TODO</span></span><br><span class="line"><span class="comment"> * @date 2018/11/20 15:44</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> class TestFileUtils &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main(<span class="keyword">String</span>[] args) &#123;</span><br><span class="line">        testFileUtils();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> testFileUtils() &#123;</span><br><span class="line">        <span class="built_in">try</span> &#123;</span><br><span class="line">            <span class="comment">// 强制创建文件夹，如果父级目录不存在则先创建父级目录</span></span><br><span class="line">            FileUtils.forceMkdir(<span class="keyword">new</span> <span class="built_in">File</span>(<span class="string">"dir/testDir"</span>));</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 删除文件夹</span></span><br><span class="line">            FileUtils.deleteDirectory(<span class="keyword">new</span> <span class="built_in">File</span>(<span class="string">"dir"</span>));</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 将String写入文件中，如果文件目录不存在则都创建</span></span><br><span class="line">            FileUtils.writeStringToFile(<span class="keyword">new</span> <span class="built_in">File</span>(<span class="string">"dir/testDir/test.json"</span>), <span class="string">"&#123;\"name\": \"zs\"&#125;"</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 拷贝文件</span></span><br><span class="line">            FileUtils.copyFile(<span class="keyword">new</span> <span class="built_in">File</span>(<span class="string">"dir/testDir/test.json"</span>), <span class="keyword">new</span> <span class="built_in">File</span>(<span class="string">"dir/testDir/testCopy.json"</span>));</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 强制删除</span></span><br><span class="line">            FileUtils.forceDelete(<span class="keyword">new</span> <span class="built_in">File</span>(<span class="string">"dir/testDir/test.json"</span>));</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 强制创建目录，如果父级目录不存在则创建父级目录</span></span><br><span class="line">            FileUtils.forceMkdir(<span class="keyword">new</span> <span class="built_in">File</span>(<span class="string">"dir/testDir2/test"</span>));</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 拷贝文件夹！ 【警告】如下操作（创建子文件夹），会造成死循环！</span></span><br><span class="line">            <span class="comment">// FileUtils.copyDirectory(new File("dir"), new File("dir/dirCopy"));</span></span><br><span class="line">            FileUtils.copyDirectory(<span class="keyword">new</span> <span class="built_in">File</span>(<span class="string">"dir"</span>), <span class="keyword">new</span> <span class="built_in">File</span>(<span class="string">"dirCopy"</span>));</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 列举目录下的文件（不是目录！）</span></span><br><span class="line">            List&lt;<span class="keyword">String</span>&gt; coll = (List&lt;<span class="keyword">String</span>&gt;) FileUtils.listFiles(<span class="keyword">new</span> <span class="built_in">File</span>(<span class="string">"dir"</span>), FileFileFilter.FILE, DirectoryFileFilter.DIRECTORY);</span><br><span class="line">        &#125; <span class="built_in">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="StringUtils"><a href="#StringUtils" class="headerlink" title="StringUtils"></a>StringUtils</h3><ul><li>org.apache.commons.lang3.StringUtils</li></ul><p>方法</p><blockquote><p>isBlank<br>isEmpty<br>equals<br>split 字符串分割<br>EMPTY 返回空字符串<br>replace 替换字符串<br>capitalize 首字母大写</p></blockquote><p><strong><em>pom.xml</em></strong><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.commons<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-lang3<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.8.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></p><ul><li>示例：<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.commons.lang3.StringUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @author Angus</span></span><br><span class="line"><span class="comment"> * @version 1.0</span></span><br><span class="line"><span class="comment"> * @Title: TestStringUtils</span></span><br><span class="line"><span class="comment"> * @Description: TODO</span></span><br><span class="line"><span class="comment"> * @date 2018/11/20 16:20</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> class TestStringUtils &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main(<span class="keyword">String</span>[] args) &#123;</span><br><span class="line">        testStringUtils();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> testStringUtils() &#123;</span><br><span class="line">        <span class="keyword">String</span> <span class="built_in">str</span> = <span class="string">"Hello-StringUtils!"</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">String</span> str2 = <span class="string">"Hello"</span>;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">boolean</span> blank = StringUtils.isBlank(<span class="built_in">str</span>);</span><br><span class="line"></span><br><span class="line">        <span class="built_in">boolean</span> empty = StringUtils.isEmpty(<span class="built_in">str</span>);</span><br><span class="line"></span><br><span class="line">        <span class="built_in">boolean</span> equals = StringUtils.equals(<span class="built_in">str</span>, str2);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">String</span> <span class="built_in">join</span> = StringUtils.<span class="built_in">join</span>(Arrays.asList(<span class="string">"hello"</span>, <span class="string">"StringUtils"</span>, <span class="string">"!"</span>));</span><br><span class="line">        System.out.<span class="built_in">println</span>(<span class="string">"输出结果为： [hello, StringUtils, !] "</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 字符串分割：默认是按空格分割</span></span><br><span class="line">        <span class="keyword">String</span>[] splitStrBlank = StringUtils.<span class="built_in">split</span>(<span class="built_in">str</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">String</span> s : splitStrBlank) &#123;</span><br><span class="line">            System.out.<span class="built_in">println</span>(s);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 自定义风格符</span></span><br><span class="line">        <span class="keyword">String</span>[] splitStrKey = StringUtils.<span class="built_in">split</span>(<span class="built_in">str</span>, <span class="string">"-"</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">String</span> s : splitStrKey) &#123;</span><br><span class="line">            System.out.<span class="built_in">println</span>(s);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 返回空字符串</span></span><br><span class="line">        <span class="keyword">String</span> emptyStr = StringUtils.EMPTY;</span><br><span class="line">        System.out.<span class="built_in">println</span>(emptyStr);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 替换字符串</span></span><br><span class="line">        <span class="keyword">String</span> replaceStr2 = StringUtils.replace(str2, <span class="string">"Hello"</span>, <span class="string">"你好！"</span>);</span><br><span class="line">        System.out.<span class="built_in">println</span>(replaceStr2);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 首字母大写</span></span><br><span class="line">        <span class="keyword">String</span> capitalizeStr2 = StringUtils.capitalize(str2.toLowerCase());</span><br><span class="line">        System.out.<span class="built_in">println</span>(capitalizeStr2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;IOUtils&quot;&gt;&lt;a href=&quot;#IOUtils&quot; class=&quot;headerlink&quot; title=&quot;IOUtils&quot;&gt;&lt;/a&gt;IOUtils&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;org.apache.commons.io.IOUtils&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;
      
    
    </summary>
    
      <category term="Java" scheme="https://qijianguo.com/categories/Java/"/>
    
    
      <category term="java" scheme="https://qijianguo.com/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>Linux有趣（无用）的命令</title>
    <link href="https://qijianguo.com/Linux/2019/04/17/Linux%E6%9C%89%E8%B6%A3%EF%BC%88%E6%97%A0%E7%94%A8%EF%BC%89%E7%9A%84%E5%91%BD%E4%BB%A4.html"/>
    <id>https://qijianguo.com/Linux/2019/04/17/Linux有趣（无用）的命令.html</id>
    <published>2019-04-17T06:18:44.245Z</published>
    <updated>2019-04-17T07:46:05.442Z</updated>
    
    <content type="html"><![CDATA[<h3 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h3><p>更新yum<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash"> yum update</span></span><br></pre></td></tr></table></figure></p><p>安装wget</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash"> yum install wget</span></span><br></pre></td></tr></table></figure><p>下载EPEL<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; wget http：<span class="regexp">//</span>dl.fedoraproject.org<span class="regexp">/pub/</span>epel<span class="regexp">/6/</span>x86_64<span class="regexp">/epel-release-6-8.noarch.rpm</span></span><br></pre></td></tr></table></figure></p><p>安装EPEL</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; rpm -ivh epel-release-<span class="number">6</span>-<span class="number">8</span><span class="selector-class">.noarch</span><span class="selector-class">.rpm</span></span><br></pre></td></tr></table></figure><blockquote><p>知识点： 什么是EPEL？<br><a href="http://www.cnblogs.com/gaoyuechen/p/7683471.html" target="_blank" rel="noopener">什么是EPEL 及 Centos上安装EPEL</a></p></blockquote><h3 id="sl-命令"><a href="#sl-命令" class="headerlink" title="sl 命令"></a>sl 命令</h3><p>一列火车呼啸而过</p><p>安装sl</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash"> wget install sl</span></span><br></pre></td></tr></table></figure><p>运行sl</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash"> sl</span></span><br></pre></td></tr></table></figure><p>结果：<br><img src="https://img-blog.csdnimg.cn/20181122101424177.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h3 id="fortune-命令"><a href="#fortune-命令" class="headerlink" title="fortune 命令"></a>fortune 命令</h3><p>给你一句名言警句</p><p>下载 fortune<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; wget http:<span class="regexp">//</span>springdale.math.ias.edu<span class="regexp">/data/</span>puias<span class="regexp">/7/</span>x86_64<span class="regexp">/os/</span>Addons<span class="regexp">/Packages/</span>fortune-mod-<span class="number">1.99</span>.<span class="number">1</span>-<span class="number">17</span>.sdl7.x86_64.rpm</span><br></pre></td></tr></table></figure></p><p>安装 fortune</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;  rpm -ivh fortune-mod<span class="string">-1</span>.99.1<span class="string">-17</span>.sdl7.x86_64.rpm</span><br><span class="line"></span><br><span class="line">warning: fortune-mod<span class="string">-1</span>.99.1<span class="string">-17</span>.sdl7.x86_64.rpm: Header V3 RSA/SHA256 Signature, key ID 41a40948: NOKEY</span><br><span class="line"><span class="keyword">error: </span>Failed dependencies:</span><br><span class="line">librecode.so.0()(64bit) is needed by fortune-mod<span class="string">-1</span>.99.1<span class="string">-17</span>.sdl7.x86_64</span><br></pre></td></tr></table></figure><p>如果出现error， 则需要安装依赖</p><p>下载librecode(<a href="https://altlinux.pkgs.org/sisyphus/classic-x86_64/librecode-3.6-alt11.1.1.x86_64.rpm.html" target="_blank" rel="noopener">网站传送门</a>)</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; wget http:<span class="regexp">//</span>ftp.altlinux.org<span class="regexp">/pub/</span>distributions<span class="regexp">/ALTLinux/</span>Sisyphus<span class="regexp">/x86_64/</span>RPMS.classic<span class="regexp">//</span>librecode-<span class="number">3.6</span>-alt11.<span class="number">1.1</span>.x86_64.rpm</span><br></pre></td></tr></table></figure><p>安装 librecode<br><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; rpm -ivh librecode<span class="number">-3.6</span>-alt11<span class="number">.1</span><span class="number">.1</span>.x86_64.rpm</span><br><span class="line">Preparing...                          ################################# [<span class="number">100</span>%]</span><br><span class="line">Updating / installing...</span><br><span class="line">   <span class="number">1</span>:librecode<span class="number">-3.6</span>-alt11<span class="number">.1</span><span class="number">.1</span>          ################################# [<span class="number">100</span>%]</span><br></pre></td></tr></table></figure></p><p>重新安装 fortune</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;  rpm -ivh fortune-mod<span class="number">-1.99</span><span class="number">.1</span><span class="number">-17.</span>sdl7.x86_64.rpm</span><br><span class="line">Preparing...                          ################################# [<span class="number">100</span>%]</span><br><span class="line">Updating / installing...</span><br><span class="line">   <span class="number">1</span>:fortune-mod<span class="number">-1.99</span><span class="number">.1</span><span class="number">-17.</span>sdl7       ################################# [<span class="number">100</span>%]</span><br></pre></td></tr></table></figure><p>效果：<br><img src="https://img-blog.csdnimg.cn/20181122104258532.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h3 id="cowsay-命令"><a href="#cowsay-命令" class="headerlink" title="cowsay 命令"></a>cowsay 命令</h3><p>一头很好玩的牛<br>安装</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash"> yum installl cowsay -y</span></span><br></pre></td></tr></table></figure><p>运行：</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt; cowsay <span class="string">"牛逼浑浑"</span></span><br><span class="line"> ______</span><br><span class="line"><span class="variable">&lt; 牛逼浑浑 &gt;</span></span><br><span class="line"> ------</span><br><span class="line">        \   ^__^</span><br><span class="line">         \  (oo)\_______</span><br><span class="line">            (__)\       )\/\</span><br><span class="line">                ||<span class="string">----w </span>|</span><br><span class="line">                ||<span class="string">     </span>||</span><br></pre></td></tr></table></figure><p>查看其它支持的动物<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt; cowsay -l</span><br><span class="line">Cow files <span class="keyword">in</span> /usr/share/cowsay:</span><br><span class="line">beavis.zen blowfish bong bud-frogs bunny cheese cower<span class="built_in"> default </span>dragon</span><br><span class="line">dragon-and-cow elephant elephant-in-snake eyes flaming-sheep ghostbusters</span><br><span class="line">head-in hellokitty kiss kitty koala kosh luke-koala mech-and-cow meow milk</span><br><span class="line">moofasa moose mutilated ren satanic sheep skeleton small sodomized</span><br><span class="line">stegosaurus stimpy supermilker surgery telebears three-eyes turkey turtle</span><br><span class="line">tux udder vader vader-koala www</span><br></pre></td></tr></table></figure></p><p>切换其它图案（如下：kiss）</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&gt; cowsay -f kiss  <span class="string">"I LOVE YOU"</span></span><br><span class="line"> ____________</span><br><span class="line"><span class="variable">&lt; I LOVE YOU &gt;</span></span><br><span class="line"> ------------</span><br><span class="line">     \</span><br><span class="line">      \</span><br><span class="line">             ,;;;;;;;,</span><br><span class="line">            ;;;;;;;;;;;,</span><br><span class="line">           ;;;;;'_____;'</span><br><span class="line">           ;;;(/))))|<span class="string">((\</span></span><br><span class="line"><span class="string">           _;;((((((</span>|<span class="string">))))</span></span><br><span class="line"><span class="string">          / </span>|<span class="string">_\\\\\\\\\\\\</span></span><br><span class="line"><span class="string">     .--~(  \ ~))))))))))))</span></span><br><span class="line"><span class="string">    /     \  `\-(((((((((((\\</span></span><br><span class="line"><span class="string">    </span>|<span class="string">    </span>|<span class="string"> `\   ) </span>|<span class="string">\       /</span>|<span class="string">)</span></span><br><span class="line"><span class="string">     </span>|<span class="string">    </span>|<span class="string">  `. _/  \_____/ </span>|</span><br><span class="line">      |<span class="string">    , `\~            /</span></span><br><span class="line"><span class="string">       </span>|<span class="string">    \  \           /</span></span><br><span class="line"><span class="string">      </span>|<span class="string"> `.   `\</span>|<span class="string">          /</span></span><br><span class="line"><span class="string">      </span>|<span class="string">   ~-   `\        /</span></span><br><span class="line"><span class="string">       \____~._/~ -_,   (\</span></span><br><span class="line"><span class="string">        </span>|<span class="string">-----</span>|<span class="string">\   \    ';;</span></span><br><span class="line"><span class="string">       </span>|<span class="string">      </span>|<span class="string"> :;;;'     \</span></span><br><span class="line"><span class="string">      </span>|<span class="string">  /    </span>|<span class="string">            </span>|</span><br><span class="line">      |<span class="string">       </span>|<span class="string">            </span>|</span><br></pre></td></tr></table></figure><p>让cowsay说出fortune的内容</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&gt; fortune |<span class="string"> cowsay -f kiss</span></span><br><span class="line"><span class="string"> _____________________________________</span></span><br><span class="line"><span class="string">/ NEWS FLASH!! Today the East German  \</span></span><br><span class="line">|<span class="string"> pole-vault champion became the West </span>|</span><br><span class="line">\ German pole-vault champion.         /</span><br><span class="line"> -------------------------------------</span><br><span class="line">     \</span><br><span class="line">      \</span><br><span class="line">             ,;;;;;;;,</span><br><span class="line">            ;;;;;;;;;;;,</span><br><span class="line">           ;;;;;'_____;'</span><br><span class="line">           ;;;(/))))|<span class="string">((\</span></span><br><span class="line"><span class="string">           _;;((((((</span>|<span class="string">))))</span></span><br><span class="line"><span class="string">          / </span>|<span class="string">_\\\\\\\\\\\\</span></span><br><span class="line"><span class="string">     .--~(  \ ~))))))))))))</span></span><br><span class="line"><span class="string">    /     \  `\-(((((((((((\\</span></span><br><span class="line"><span class="string">    </span>|<span class="string">    </span>|<span class="string"> `\   ) </span>|<span class="string">\       /</span>|<span class="string">)</span></span><br><span class="line"><span class="string">     </span>|<span class="string">    </span>|<span class="string">  `. _/  \_____/ </span>|</span><br><span class="line">      |<span class="string">    , `\~            /</span></span><br><span class="line"><span class="string">       </span>|<span class="string">    \  \           /</span></span><br><span class="line"><span class="string">      </span>|<span class="string"> `.   `\</span>|<span class="string">          /</span></span><br><span class="line"><span class="string">      </span>|<span class="string">   ~-   `\        /</span></span><br><span class="line"><span class="string">       \____~._/~ -_,   (\</span></span><br><span class="line"><span class="string">        </span>|<span class="string">-----</span>|<span class="string">\   \    ';;</span></span><br><span class="line"><span class="string">       </span>|<span class="string">      </span>|<span class="string"> :;;;'     \</span></span><br><span class="line"><span class="string">      </span>|<span class="string">  /    </span>|<span class="string">            </span>|</span><br><span class="line">      |<span class="string">       </span>|<span class="string">            </span>|</span><br></pre></td></tr></table></figure><h3 id="cmatrix-命令"><a href="#cmatrix-命令" class="headerlink" title="cmatrix 命令"></a>cmatrix 命令</h3><p>可以做酷炫的屏保</p><p>下载cmatrix<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; wget https:<span class="regexp">//</span>jaist.dl.sourceforge.net<span class="regexp">/project/</span>cmatrix<span class="regexp">/cmatrix/</span><span class="number">1.2</span>a<span class="regexp">/cmatrix-1.2a.tar.gz</span></span><br></pre></td></tr></table></figure></p><p>解压并进入cmatrix<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash"> tar -zxvf cmatrix-1.2a.tar.gz</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> <span class="built_in">cd</span> cmatrix-1.2a</span></span><br></pre></td></tr></table></figure></p><p>安装依赖</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash"> yum install ncurses-devel</span></span><br></pre></td></tr></table></figure><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&gt;./configure &amp;&amp; make &amp;&amp; make install   </span><br><span class="line">如果出现以下提示，则说明未安装gcc</span><br><span class="line">loading cache ./config.cache</span><br><span class="line">checking for a BSD compatible install... /usr/bin/install -c</span><br><span class="line">checking whether <span class="keyword">build</span> environment <span class="keyword">is</span> sane... yes</span><br><span class="line">checking whether make sets $&#123;MAKE&#125;... yes</span><br><span class="line">checking <span class="keyword">for</span> working aclocal... <span class="literal">missing</span></span><br><span class="line">checking <span class="keyword">for</span> working autoconf... <span class="literal">missing</span></span><br><span class="line">checking <span class="keyword">for</span> working automake... <span class="literal">missing</span></span><br><span class="line">checking <span class="keyword">for</span> working autoheader... <span class="literal">missing</span></span><br><span class="line">checking <span class="keyword">for</span> working makeinfo... <span class="literal">missing</span></span><br><span class="line">checking <span class="keyword">for</span> gcc... no</span><br><span class="line">checking <span class="keyword">for</span> cc... no</span><br><span class="line">configure: error: no acceptable cc found <span class="keyword">in</span> $<span class="keyword">PATH</span></span><br></pre></td></tr></table></figure><p>安装gcc<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash"> yum -y install gcc</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> yum -y install gcc-c++</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">  yum install make</span></span><br></pre></td></tr></table></figure></p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">&gt;./configure &amp;&amp; make &amp;&amp; make install   </span><br><span class="line">loading cache ./config.cache</span><br><span class="line">checking <span class="keyword">for</span> a BSD compatible install<span class="built_in">..</span>. (cached) /usr/bin/install -c</span><br><span class="line">checking whether build environment is sane<span class="built_in">..</span>. <span class="literal">yes</span></span><br><span class="line">checking whether make sets <span class="variable">$&#123;MAKE&#125;</span><span class="built_in">..</span>. (cached) <span class="literal">yes</span></span><br><span class="line">checking <span class="keyword">for</span> working aclocal<span class="built_in">..</span>. missing</span><br><span class="line">checking <span class="keyword">for</span> working autoconf<span class="built_in">..</span>. missing</span><br><span class="line">checking <span class="keyword">for</span> working automake<span class="built_in">..</span>. missing</span><br><span class="line">checking <span class="keyword">for</span> working autoheader<span class="built_in">..</span>. missing</span><br><span class="line">checking <span class="keyword">for</span> working makeinfo<span class="built_in">..</span>. missing</span><br><span class="line">checking <span class="keyword">for</span> gcc<span class="built_in">..</span>. (cached) gcc</span><br><span class="line">checking whether the C compiler (gcc  ) works<span class="built_in">..</span>. <span class="literal">yes</span></span><br><span class="line">checking whether the C compiler (gcc  ) is a cross-compiler<span class="built_in">..</span>. <span class="literal">no</span></span><br><span class="line">checking whether we are using GNU C<span class="built_in">..</span>. (cached) <span class="literal">yes</span></span><br><span class="line">checking whether gcc accepts -g<span class="built_in">..</span>. (cached) <span class="literal">yes</span></span><br><span class="line">checking <span class="keyword">for</span> a BSD compatible install<span class="built_in">..</span>. /usr/bin/install -c</span><br><span class="line">checking whether make sets <span class="variable">$&#123;MAKE&#125;</span><span class="built_in">..</span>. (cached) <span class="literal">yes</span></span><br><span class="line">checking <span class="keyword">for</span> main <span class="keyword">in</span> -lncurses<span class="built_in">..</span>. (cached) <span class="literal">yes</span></span><br><span class="line">checking how <span class="keyword">to</span> <span class="builtin-name">run</span> the C preprocessor<span class="built_in">..</span>. (cached) gcc -E</span><br><span class="line">checking <span class="keyword">for</span> ANSI C header files<span class="built_in">..</span>. (cached) <span class="literal">yes</span></span><br><span class="line">checking <span class="keyword">for</span> fcntl.h<span class="built_in">..</span>. (cached) <span class="literal">yes</span></span><br><span class="line">checking <span class="keyword">for</span> sys/ioctl.h<span class="built_in">..</span>. (cached) <span class="literal">yes</span></span><br><span class="line">checking <span class="keyword">for</span> unistd.h<span class="built_in">..</span>. (cached) <span class="literal">yes</span></span><br><span class="line">checking <span class="keyword">for</span> termios.h<span class="built_in">..</span>. (cached) <span class="literal">yes</span></span><br><span class="line">checking <span class="keyword">for</span> termio.h<span class="built_in">..</span>. (cached) <span class="literal">yes</span></span><br><span class="line">checking return<span class="built_in"> type </span>of signal handlers<span class="built_in">..</span>. (cached) void</span><br><span class="line">checking <span class="keyword">for</span> putenv<span class="built_in">..</span>. (cached) <span class="literal">yes</span></span><br><span class="line">checking <span class="keyword">for</span> curses.h<span class="built_in">..</span>. (cached) <span class="literal">yes</span></span><br><span class="line">checking <span class="keyword">for</span> ncurses.h<span class="built_in">..</span>. (cached) <span class="literal">yes</span></span><br><span class="line">checking <span class="keyword">for</span> tgetent <span class="keyword">in</span> -lncurses<span class="built_in">..</span>. (cached) <span class="literal">yes</span></span><br><span class="line">Using ncurses as the termcap library</span><br><span class="line">checking <span class="keyword">for</span> use_default_colors <span class="keyword">in</span> -lncurses<span class="built_in">..</span>. (cached) <span class="literal">yes</span></span><br><span class="line">checking <span class="keyword">for</span> resizeterm <span class="keyword">in</span> -lncurses<span class="built_in">..</span>. (cached) <span class="literal">yes</span></span><br><span class="line">checking <span class="keyword">for</span> wresize <span class="keyword">in</span> -lncurses<span class="built_in">..</span>. (cached) <span class="literal">yes</span></span><br><span class="line">checking <span class="keyword">for</span> consolechars<span class="built_in">..</span>. (cached) <span class="literal">no</span></span><br><span class="line">checking <span class="keyword">for</span> setfont<span class="built_in">..</span>. (cached) /usr/bin/setfont</span><br><span class="line">checking <span class="keyword">for</span> /usr/lib/kbd/consolefonts<span class="built_in">..</span>. (cached) <span class="literal">yes</span></span><br><span class="line">checking <span class="keyword">for</span> /usr/share/consolefonts<span class="built_in">..</span>. (cached) <span class="literal">no</span></span><br><span class="line">checking <span class="keyword">for</span> mkfontdir<span class="built_in">..</span>. (cached) /usr/bin/mkfontdir</span><br><span class="line">checking <span class="keyword">for</span> /usr/lib/X11/fonts/misc<span class="built_in">..</span>. (cached) <span class="literal">no</span></span><br><span class="line">checking <span class="keyword">for</span> /usr/X11R6/lib/X11/fonts/misc<span class="built_in">..</span>. (cached) <span class="literal">no</span></span><br><span class="line">configure: warning:  </span><br><span class="line"></span><br><span class="line">*** You <span class="keyword">do</span> <span class="keyword">not</span> appear <span class="keyword">to</span> have an X window fonts directory <span class="keyword">in</span> the standard</span><br><span class="line">*** locations (/usr/lib/X11/fonts/misc <span class="keyword">or</span> /usr/X11R6/lib/X11/fonts/misc). The</span><br><span class="line">*** mtx.pcf font will <span class="keyword">not</span> be installed.  This means you will probably <span class="keyword">not</span></span><br><span class="line">*** be able <span class="keyword">to</span> use the mtx fonts <span class="keyword">in</span> your x terminals, <span class="keyword">and</span> hence be unable</span><br><span class="line">*** <span class="keyword">to</span> use the -x command line switch.  Sorry about that<span class="built_in">..</span>.</span><br><span class="line"></span><br><span class="line">creating ./config.status</span><br><span class="line">creating Makefile</span><br><span class="line">creating cmatrix.spec</span><br><span class="line">creating config.h</span><br><span class="line">config.h is unchanged</span><br><span class="line">make[1]: Entering directory `/root/cmatrix-1.2a'</span><br><span class="line">/bin/sh ./mkinstalldirs /usr/local/bin</span><br><span class="line">  /usr/bin/install -c  cmatrix /usr/local/bin/cmatrix</span><br><span class="line">make  install-man1</span><br><span class="line">make[2]: Entering directory `/root/cmatrix-1.2a'</span><br><span class="line">/bin/sh ./mkinstalldirs /usr/local/man/man1</span><br><span class="line"> /usr/bin/install -c -m 644 ./cmatrix.1 /usr/local/man/man1/cmatrix.1</span><br><span class="line">make[2]: Leaving directory `/root/cmatrix-1.2a'</span><br><span class="line"> Installing matrix fonts <span class="keyword">in</span> /usr/lib/kbd/consolefonts<span class="built_in">..</span>.</span><br><span class="line">make[1]: Leaving directory `/root/cmatrix-1.2a'</span><br></pre></td></tr></table></figure><p>运行</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash"> cmatrix -b</span></span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/2018112211354044.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>常用命令</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">cmatrix-<span class="string">a :</span>异步滚动（默认）</span><br><span class="line"></span><br><span class="line">cmatrix-<span class="string">b :</span>随机粗体</span><br><span class="line"></span><br><span class="line">cmatrix-<span class="string">B :</span>全部粗体</span><br><span class="line"></span><br><span class="line">cmatrix-<span class="string">o :</span>使用旧风格滚动</span><br><span class="line"></span><br><span class="line">cmatrix-<span class="string">x :</span>X window 模式</span><br><span class="line"></span><br><span class="line">cmatrix-<span class="string">V :</span>显示版本信息</span><br><span class="line"></span><br><span class="line">cmatrix-<span class="string">u :</span>刷新频率，<span class="number">0</span><span class="number">-9</span>，也就是滚动的快慢</span><br><span class="line"></span><br><span class="line">cmatrix-<span class="string">C :</span>显示的颜色，支持green(默认),red,blue,white,yellow,cyan,</span><br><span class="line">        magenta and black</span><br><span class="line"></span><br><span class="line">例如:使用红色</span><br><span class="line"></span><br><span class="line">cmatrix -b -C red</span><br><span class="line"></span><br><span class="line">使用蓝色</span><br><span class="line"></span><br><span class="line">cmatrix -b -C blue</span><br></pre></td></tr></table></figure><p>参考：<a href="http://blog.51cto.com/5232821/2146115" target="_blank" rel="noopener">http://blog.51cto.com/5232821/2146115</a></p><h3 id="figlet命令"><a href="#figlet命令" class="headerlink" title="figlet命令"></a>figlet命令</h3><p>生成艺术字<br>安装</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash"> yum install figlet</span></span><br></pre></td></tr></table></figure><p>运行</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt; figlet I MISS YOU</span><br><span class="line"> ___   __  __ ___ ____ ____   __   _____  _   _ </span><br><span class="line">|<span class="string">_ _</span>|<span class="string"> </span>|<span class="string">  \/  </span>|<span class="string">_ _/ ___/ ___</span>|<span class="string">  \ \ / / _ \</span>|<span class="string"> </span>|<span class="string"> </span>|<span class="string"> </span>|</span><br><span class="line"> |<span class="string"> </span>|<span class="string">  </span>|<span class="string"> </span>|<span class="string">\/</span>|<span class="string"> </span>||<span class="string"> </span>|<span class="string">\___ \___ \   \ V / </span>|<span class="string"> </span>|<span class="string"> </span>|<span class="string"> </span>|<span class="string"> </span>|<span class="string"> </span>|</span><br><span class="line"> |<span class="string"> </span>|<span class="string">  </span>|<span class="string"> </span>|<span class="string">  </span>|<span class="string"> </span>||<span class="string"> </span>|<span class="string"> ___) </span>|<span class="string">__) </span>|<span class="string">   </span>|<span class="string"> </span>||<span class="string"> </span>|<span class="string">_</span>|<span class="string"> </span>|<span class="string"> </span>|<span class="string">_</span>|<span class="string"> </span>|</span><br><span class="line">|<span class="string">___</span>|<span class="string"> </span>|<span class="string">_</span>|<span class="string">  </span>|<span class="string">_</span>|<span class="string">___</span>|<span class="string">____/____/    </span>|<span class="string">_</span>|<span class="string"> \___/ \___/</span></span><br></pre></td></tr></table></figure><p>参考：<a href="https://mp.weixin.qq.com/s/HXJ25E1b3J-zcVeI_Q2E7Q" target="_blank" rel="noopener">微信公众号：Java技术栈</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;准备&quot;&gt;&lt;a href=&quot;#准备&quot; class=&quot;headerlink&quot; title=&quot;准备&quot;&gt;&lt;/a&gt;准备&lt;/h3&gt;&lt;p&gt;更新yum&lt;br&gt;&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;
      
    
    </summary>
    
      <category term="Linux" scheme="https://qijianguo.com/categories/Linux/"/>
    
    
      <category term="linux" scheme="https://qijianguo.com/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>Java正确获取客户端真实IP方法整理</title>
    <link href="https://qijianguo.com/Java/2019/04/17/Java%E6%AD%A3%E7%A1%AE%E8%8E%B7%E5%8F%96%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9C%9F%E5%AE%9EIP%E6%96%B9%E6%B3%95%E6%95%B4%E7%90%86.html"/>
    <id>https://qijianguo.com/Java/2019/04/17/Java正确获取客户端真实IP方法整理.html</id>
    <published>2019-04-17T06:18:44.242Z</published>
    <updated>2019-04-17T07:45:38.307Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://img-blog.csdnimg.cn/20181122131357280.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>参考：<a href="https://mp.weixin.qq.com/s/Affy4l9TUj7rv9A86gRC4A" target="_blank" rel="noopener">Java技术栈</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20181122131357280.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM
      
    
    </summary>
    
      <category term="Java" scheme="https://qijianguo.com/categories/Java/"/>
    
    
      <category term="java" scheme="https://qijianguo.com/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>Modbus协议服务端（Netty）</title>
    <link href="https://qijianguo.com/Linux/2019/04/17/Modbus%E5%8D%8F%E8%AE%AE%E6%9C%8D%E5%8A%A1%E7%AB%AF%EF%BC%88Netty%EF%BC%89.html"/>
    <id>https://qijianguo.com/Linux/2019/04/17/Modbus协议服务端（Netty）.html</id>
    <published>2019-04-17T06:18:44.239Z</published>
    <updated>2019-04-17T07:46:17.715Z</updated>
    
    <content type="html"><![CDATA[<h2 id="pom-xml"><a href="#pom-xml" class="headerlink" title="pom.xml"></a>pom.xml</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.netty<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>netty-all<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.21.Final<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-codec<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-codec<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="Listener"><a href="#Listener" class="headerlink" title="Listener"></a>Listener</h2><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io.netty.bootstrap.ServerBootstrap;</span><br><span class="line"><span class="keyword">import</span> io.netty.channel.*;</span><br><span class="line"><span class="keyword">import</span> io.netty.channel.nio.NioEventLoopGroup;</span><br><span class="line"><span class="keyword">import</span> io.netty.channel.socket.nio.NioServerSocketChannel;</span><br><span class="line"><span class="keyword">import</span> io.netty.<span class="keyword">handler</span>.codec.FixedLengthFrameDecoder;</span><br><span class="line"><span class="keyword">import</span> io.netty.<span class="keyword">handler</span>.timeout.ReadTimeoutHandler;</span><br><span class="line"><span class="keyword">import</span> io.netty.util.concurrent.DefaultEventExecutorGroup;</span><br><span class="line"><span class="keyword">import</span> io.netty.util.concurrent.EventExecutorGroup;</span><br><span class="line"><span class="keyword">import</span> util.Consts;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PortalSomCommunicationListener</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> port;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">PortalSomCommunicationListener</span><span class="params">(<span class="keyword">int</span> port)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.port = port;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        startNettyServer(port);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">void</span> <span class="title">startNettyServer</span><span class="params">(<span class="keyword">int</span> port)</span> </span>&#123;</span><br><span class="line">        EventLoopGroup bossGroup = <span class="keyword">new</span> NioEventLoopGroup();</span><br><span class="line">        EventLoopGroup workerGroup = <span class="keyword">new</span> NioEventLoopGroup();</span><br><span class="line">        <span class="keyword">final</span> EventExecutorGroup businessGroup = <span class="keyword">new</span> DefaultEventExecutorGroup(<span class="number">10</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 配置服务器的NIO线程租</span></span><br><span class="line">            ServerBootstrap b = <span class="keyword">new</span> ServerBootstrap();</span><br><span class="line">            b.group(bossGroup, workerGroup)</span><br><span class="line">                    .channel(NioServerSocketChannel.class)</span><br><span class="line">                    .option(ChannelOption.SO_BACKLOG, <span class="number">1024</span>)</span><br><span class="line">                    .childOption(ChannelOption.SO_KEEPALIVE, <span class="keyword">true</span>)</span><br><span class="line">                    .childHandler(<span class="keyword">new</span> ChannelInitializer() &#123;</span><br><span class="line">                        <span class="meta">@Override</span></span><br><span class="line">                        <span class="keyword">protected</span> <span class="function"><span class="keyword">void</span> <span class="title">initChannel</span><span class="params">(Channel channel)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                            channel.pipeline().addLast(<span class="keyword">new</span> FixedLengthFrameDecoder(<span class="number">12</span>));</span><br><span class="line">                            <span class="comment">// 设置超时时间，防止连接过多。</span></span><br><span class="line">                            channel.pipeline().addLast(<span class="string">"readtime"</span>,<span class="keyword">new</span> ReadTimeoutHandler(<span class="number">5</span>));</span><br><span class="line">                            channel.pipeline().addLast(businessGroup, <span class="string">"executer"</span>, <span class="keyword">new</span> SomCommunicationHandler());</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);</span><br><span class="line">            <span class="comment">// 绑定端口，同步等待成功</span></span><br><span class="line">            ChannelFuture f = b.bind(port).sync();</span><br><span class="line">            <span class="comment">// 等待服务端监听端口关闭</span></span><br><span class="line">            f.channel().closeFuture().sync();</span><br><span class="line">        &#125; <span class="keyword">catch</span>(Exception e) &#123;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// 优雅退出，释放线程池资源</span></span><br><span class="line">            bossGroup.shutdownGracefully();</span><br><span class="line">            workerGroup.shutdownGracefully();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 异味MODBUS协议</span></span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> PortalSomCommunicationListener(Consts.YIWEI_PORT)).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Handler"><a href="#Handler" class="headerlink" title="Handler"></a>Handler</h2><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> domain.YiWeiSample;</span><br><span class="line"><span class="keyword">import</span> io.netty.buffer.ByteBuf;</span><br><span class="line"><span class="keyword">import</span> io.netty.buffer.ByteBufUtil;</span><br><span class="line"><span class="keyword">import</span> io.netty.buffer.Unpooled;</span><br><span class="line"><span class="keyword">import</span> io.netty.channel.ChannelFutureListener;</span><br><span class="line"><span class="keyword">import</span> io.netty.channel.ChannelHandlerContext;</span><br><span class="line"><span class="keyword">import</span> io.netty.channel.ChannelInboundHandlerAdapter;</span><br><span class="line"><span class="keyword">import</span> net.Client;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.codec.<span class="built_in">binary</span>.Hex;</span><br><span class="line"><span class="keyword">import</span> util.Consts;</span><br><span class="line"><span class="keyword">import</span> java.io.UnsupportedEncodingException;</span><br><span class="line"><span class="keyword">import</span> java.nio.ByteBuffer;</span><br><span class="line"><span class="keyword">import</span> java.nio.charset.Charset;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 请求：</span></span><br><span class="line"><span class="comment"> *  00 00   00 00   00 06      FF          03      00 01       00 00</span></span><br><span class="line"><span class="comment"> * | 事务 |协议标识| 长度 | 单元标识 |功能码|起始地址|寄存器地址|</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 响应：</span></span><br><span class="line"><span class="comment"> *  00 00   00 00   00 06       FF           03     00 01      00 00</span></span><br><span class="line"><span class="comment"> * | 事务 |协议标识| 长度 | 单元标识 |功能码|字节个数|请求的数据|</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> class SomCommunicationHandler extends ChannelInboundHandlerAdapter &#123;</span><br><span class="line">    <span class="comment">// 请求指令的长度，此协议指定12个字节长度</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="built_in">int</span> commandSize = <span class="number">12</span>;</span><br><span class="line">    <span class="keyword">private</span> ByteBuf readBuf;</span><br><span class="line">    @Override</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> channelRead(ChannelHandlerContext ctx, <span class="keyword">Object</span> msg) &#123;</span><br><span class="line"></span><br><span class="line">        ByteBuf m = (ByteBuf) msg;</span><br><span class="line">        Consts.logger.info(<span class="string">"SomCommunicationHandler收到SOM的二进制形式指令： "</span> + ByteBufUtil.hexDump(m));</span><br><span class="line">        Consts.logger.info(<span class="string">"SomCommunicationHandler收到SOM的ASCII形式指令： "</span> + m.toString(Charset.forName(<span class="string">"US-ASCII"</span>)));</span><br><span class="line">        readBuf.writeBytes(m);</span><br><span class="line">        m.release();</span><br><span class="line">        <span class="built_in">byte</span>[] bytes = handleData();</span><br><span class="line">        <span class="keyword">if</span> (bytes == <span class="keyword">null</span>) <span class="keyword">return</span>;</span><br><span class="line">        ctx.channel().writeAndFlush(Unpooled.wrappedBuffer(bytes))</span><br><span class="line">                .addListener(ChannelFutureListener.FIRE_EXCEPTION_ON_FAILURE)</span><br><span class="line">                .addListener((ChannelFutureListener) channelFuture -&gt; Consts.logger.info(</span><br><span class="line">                        <span class="string">"SomCommunicationHandler "</span></span><br><span class="line">                                + <span class="keyword">this</span>.getClass().getName()</span><br><span class="line">                                + <span class="string">"成功发送指令:"</span></span><br><span class="line">                                + Hex.encodeHexString(bytes)));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">byte</span>[] handleData() &#123;</span><br><span class="line">        <span class="keyword">while</span> (readBuf.readableBytes() &gt;= commandSize) &#123;</span><br><span class="line">            List&lt;Byte&gt; result = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">            <span class="built_in">byte</span>[] bytes = <span class="keyword">new</span> <span class="built_in">byte</span>[commandSize];</span><br><span class="line">            readBuf.readBytes(bytes);</span><br><span class="line">            <span class="comment">// 事务</span></span><br><span class="line">            result.<span class="built_in">add</span>(bytes[<span class="number">0</span>]);</span><br><span class="line">            result.<span class="built_in">add</span>(bytes[<span class="number">1</span>]);</span><br><span class="line">            <span class="comment">// 协议标识</span></span><br><span class="line">            result.<span class="built_in">add</span>(bytes[<span class="number">2</span>]);</span><br><span class="line">            result.<span class="built_in">add</span>(bytes[<span class="number">3</span>]);</span><br><span class="line">            <span class="comment">// 起始地址</span></span><br><span class="line">            <span class="built_in">float</span> startIndex = ByteBuffer.wrap(bytes, <span class="number">8</span>, <span class="number">2</span>).getShort();</span><br><span class="line">            <span class="comment">// 寄存器个数</span></span><br><span class="line">            <span class="built_in">float</span> numberRegister = ByteBuffer.wrap(bytes, <span class="number">10</span>, <span class="number">2</span>).getShort();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 发送指令</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="comment">// 数据包 AI + DI</span></span><br><span class="line">                <span class="built_in">byte</span>[] dataBytes = getData((<span class="built_in">int</span>) startIndex, (<span class="built_in">int</span>) numberRegister);</span><br><span class="line">                <span class="comment">// Length 长度:长度字段以字节计数，包括单元标识和数据字段。</span></span><br><span class="line">                <span class="built_in">int</span> length = <span class="number">3</span> + (dataBytes != <span class="keyword">null</span> ? dataBytes.length : <span class="number">0</span>);</span><br><span class="line">                <span class="built_in">byte</span>[] len = numToBytes(length);</span><br><span class="line">                addBytes(result, len);</span><br><span class="line">                <span class="comment">//Unit Identifier 单元标识</span></span><br><span class="line">                result.<span class="built_in">add</span>((<span class="built_in">byte</span>) <span class="number">0xFF</span>);</span><br><span class="line">                <span class="comment">// Function Code 功能码</span></span><br><span class="line">                result.<span class="built_in">add</span>((<span class="built_in">byte</span>) <span class="number">0x04</span>);</span><br><span class="line">                <span class="comment">//Byte Count 字节个数</span></span><br><span class="line"><span class="comment">//                result.add(numToBytes(dataBytes != null ? dataBytes.length : 0));</span></span><br><span class="line">                <span class="built_in">byte</span>[] len2 = numToHex8((dataBytes != <span class="keyword">null</span> ? dataBytes.length : <span class="number">0</span>));</span><br><span class="line">                addBytes(result, len2);</span><br><span class="line"></span><br><span class="line">                addBytes(result, dataBytes);</span><br><span class="line"></span><br><span class="line">                <span class="keyword">return</span> list2byte(result);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (UnsupportedEncodingException e) &#123;</span><br><span class="line">                Consts.logger.error(e.getMessage(), e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">byte</span>[] list2byte(List&lt;Byte&gt; list) &#123;</span><br><span class="line">        <span class="keyword">if</span> (list == <span class="keyword">null</span> || list.<span class="built_in">size</span>() &lt; <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        <span class="built_in">byte</span>[] bytes = <span class="keyword">new</span> <span class="built_in">byte</span>[list.<span class="built_in">size</span>()];</span><br><span class="line">        <span class="built_in">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (Byte aList : list) &#123;</span><br><span class="line">            bytes[i] = aList;</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> bytes;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * @param startIndex 起始地址是指从数据的第几个字段开始, 1：系统报警， 2。。。12 数据</span></span><br><span class="line"><span class="comment">     * @param size 寄存器的个数 = DI + AI， DI有1个，AI有11个</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">byte</span>[] getData(<span class="built_in">int</span> startIndex, <span class="built_in">int</span> <span class="built_in">size</span>) <span class="keyword">throws</span> UnsupportedEncodingException &#123;</span><br><span class="line">        <span class="comment">// <span class="doctag">TODO:</span> demo数据。</span></span><br><span class="line">        YiWeiSample sample = <span class="keyword">new</span> YiWeiSample(</span><br><span class="line">                <span class="number">20</span>,</span><br><span class="line">                <span class="number">70</span>,</span><br><span class="line">                <span class="number">50</span>,</span><br><span class="line">                <span class="number">12</span>,</span><br><span class="line">                <span class="number">1</span>,</span><br><span class="line">                <span class="number">25</span>,</span><br><span class="line">                <span class="number">70</span>,</span><br><span class="line">                <span class="number">20</span>,</span><br><span class="line">                <span class="number">18</span>,</span><br><span class="line">                <span class="number">40</span>,</span><br><span class="line">                <span class="number">10</span></span><br><span class="line">        );</span><br><span class="line">        <span class="comment">//                                                  // 寄存器地址</span></span><br><span class="line">        <span class="comment">// DI：系统报警值，0,1,2,3,4， 1为正常</span></span><br><span class="line">        <span class="built_in">byte</span> [] di = numToBytes(<span class="number">1</span>);                         <span class="comment">// 1</span></span><br><span class="line">        <span class="comment">// AI 请求的数据data，</span></span><br><span class="line">        List&lt;Byte&gt; bytes = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        addBytes(bytes, numToBytes(sample.getAvgTemp()));   <span class="comment">// 2</span></span><br><span class="line">        addBytes(bytes, numToBytes(sample.getAvgHumid()));  <span class="comment">// 3</span></span><br><span class="line">        addBytes(bytes, numToBytes(sample.getAvgPm10()));   <span class="comment">// 4</span></span><br><span class="line">        addBytes(bytes, numToBytes(sample.getAvgCo2()));    <span class="comment">// 5</span></span><br><span class="line">        addBytes(bytes, numToBytes(sample.getInYiwei()));   <span class="comment">// 6</span></span><br><span class="line">        addBytes(bytes, numToBytes(sample.getInTemp()));    <span class="comment">// 7</span></span><br><span class="line">        addBytes(bytes, numToBytes(sample.getInPm10()));    <span class="comment">// 8</span></span><br><span class="line">        addBytes(bytes, numToBytes(sample.getInCo2()));     <span class="comment">// 9</span></span><br><span class="line">        addBytes(bytes, numToBytes(sample.getOutTemp()));   <span class="comment">// 10</span></span><br><span class="line">        addBytes(bytes, numToBytes(sample.getOutPm10()));   <span class="comment">// 11</span></span><br><span class="line">        addBytes(bytes, numToBytes(sample.getOutCo2()));    <span class="comment">// 12</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 处理一下startIndex, startIndex默认在区间[1,12]，1为DI，AI[2,12]</span></span><br><span class="line">        <span class="keyword">if</span> (startIndex == <span class="number">1</span>) &#123;</span><br><span class="line">            startIndex = <span class="number">0</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (startIndex &gt;= <span class="number">2</span> &amp;&amp; startIndex &lt;= <span class="number">12</span>) &#123;</span><br><span class="line">            startIndex = (startIndex - <span class="number">2</span>) * <span class="number">2</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            Consts.logger.error(<span class="string">"Data (as requested)获取请求数据失败， Starting Address 起始地址小于2或大于12，为："</span> + <span class="built_in">size</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 寄存器个数</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">size</span> &lt; <span class="number">0</span> || <span class="built_in">size</span> &gt; bytes.<span class="built_in">size</span>()) &#123;</span><br><span class="line">            Consts.logger.error(<span class="string">"Data (as requested)获取请求数据失败， Number of Registers 寄存器个数错误，个数为："</span> + <span class="built_in">size</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        bytes = bytes.subList(startIndex, (<span class="built_in">size</span> - <span class="number">1</span>) * <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">        List&lt;Byte&gt; result = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        addBytes(result, di);</span><br><span class="line">        result.addAll(bytes);</span><br><span class="line">        <span class="keyword">return</span> list2byte(result);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> exceptionCaught(ChannelHandlerContext ctx, Throwable cause)</span><br><span class="line">            <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        Consts.logger.error(<span class="string">"DTUHandler exception: "</span> + cause.toString());</span><br><span class="line">        ctx.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> handlerAdded(ChannelHandlerContext ctx) &#123;</span><br><span class="line">        readBuf = ctx.alloc().buffer();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> handlerRemoved(ChannelHandlerContext ctx) &#123;</span><br><span class="line">        readBuf.release();</span><br><span class="line">        readBuf = <span class="keyword">null</span>;</span><br><span class="line">        Client.disconnect(ctx.channel());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> addBytes(List&lt;Byte&gt; list, <span class="built_in">byte</span>[] arr) &#123;</span><br><span class="line">        <span class="keyword">if</span> (arr == <span class="keyword">null</span> || arr.length == <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">byte</span> b : arr) &#123;</span><br><span class="line">            list.<span class="built_in">add</span>(b);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">byte</span>[] numToHex8(<span class="built_in">int</span> b) &#123;</span><br><span class="line">        <span class="keyword">return</span> hexStringToBytes(<span class="keyword">String</span>.format(<span class="string">"%02x"</span>, b));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">byte</span>[] numToBytes(<span class="built_in">int</span> b) &#123;</span><br><span class="line">        <span class="keyword">String</span> <span class="built_in">hex</span> = <span class="keyword">String</span>.format(<span class="string">"%04x"</span>, b);</span><br><span class="line">        <span class="keyword">return</span> hexStringToBytes(<span class="built_in">hex</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">byte</span>[] hexStringToBytes(<span class="keyword">String</span> hexString) &#123;</span><br><span class="line">        <span class="keyword">if</span> (hexString == <span class="keyword">null</span> || hexString.equals(<span class="string">""</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        hexString = hexString.toUpperCase();</span><br><span class="line">        <span class="built_in">int</span> length = hexString.length() / <span class="number">2</span>;</span><br><span class="line">        <span class="built_in">char</span>[] hexChars = hexString.toCharArray();</span><br><span class="line">        <span class="built_in">byte</span>[] d = <span class="keyword">new</span> <span class="built_in">byte</span>[length];</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; length; i++) &#123;</span><br><span class="line">            <span class="built_in">int</span> pos = i * <span class="number">2</span>;</span><br><span class="line">            d[i] = (<span class="built_in">byte</span>) (charToByte(hexChars[pos]) &lt;&lt; <span class="number">4</span> | charToByte(hexChars[pos + <span class="number">1</span>]));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> d;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">byte</span> charToByte(<span class="built_in">char</span> c) &#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="built_in">byte</span>) <span class="string">"0123456789ABCDEF"</span>.indexOf(c);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Consts-java"><a href="#Consts-java" class="headerlink" title="Consts.java"></a>Consts.java</h2><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"><span class="meta-keyword">import</span> org.apache.log4j.Logger;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Consts</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> int YIWEI_PORT = <span class="number">10000</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Logger logger = Logger.getRootLogger();</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Client-java"><a href="#Client-java" class="headerlink" title="Client.java"></a>Client.java</h2><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.netty.channel.Channel;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ConcurrentHashMap;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> class <span class="built_in">Client</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> final Map&lt;<span class="keyword">String</span>, <span class="built_in">Client</span>&gt; devCode2Client;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        devCode2Client = <span class="keyword">new</span> ConcurrentHashMap&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> final Map&lt;Channel, <span class="keyword">String</span>&gt; channel2DevCode = <span class="keyword">new</span> ConcurrentHashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="built_in">disconnect</span>(Channel channel) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">if</span> (channel2DevCode.containsKey(channel)) &#123;</span><br><span class="line">            <span class="keyword">String</span> devCode = channel2DevCode.<span class="built_in">get</span>(channel);</span><br><span class="line">            devCode2Client.<span class="built_in">remove</span>(devCode);</span><br><span class="line">            channel2DevCode.<span class="built_in">remove</span>(channel);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="YiWeiSample-java"><a href="#YiWeiSample-java" class="headerlink" title="YiWeiSample.java"></a>YiWeiSample.java</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">YiWeiSample</span> &#123;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> avgTemp;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> avgHumid;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> avgPm10;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> avgCo2;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> inYiwei;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> inTemp;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> inPm10;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> inCo2;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> outTemp;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> outPm10;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> outCo2;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> warnData;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">YiWeiSample</span><span class="params">(<span class="keyword">int</span> avgTemp, <span class="keyword">int</span> avgHumid, <span class="keyword">int</span> avgPm10, <span class="keyword">int</span> avgCo2, <span class="keyword">int</span> inYiwei, <span class="keyword">int</span> inTemp, <span class="keyword">int</span> inPm10, <span class="keyword">int</span> inCo2, <span class="keyword">int</span> outTemp, <span class="keyword">int</span> outPm10, <span class="keyword">int</span> outCo2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.avgTemp = avgTemp;</span><br><span class="line">        <span class="keyword">this</span>.avgHumid = avgHumid;</span><br><span class="line">        <span class="keyword">this</span>.avgPm10 = avgPm10;</span><br><span class="line">        <span class="keyword">this</span>.avgCo2 = avgCo2;</span><br><span class="line">        <span class="keyword">this</span>.inYiwei = inYiwei;</span><br><span class="line">        <span class="keyword">this</span>.inTemp = inTemp;</span><br><span class="line">        <span class="keyword">this</span>.inPm10 = inPm10;</span><br><span class="line">        <span class="keyword">this</span>.inCo2 = inCo2;</span><br><span class="line">        <span class="keyword">this</span>.outTemp = outTemp;</span><br><span class="line">        <span class="keyword">this</span>.outPm10 = outPm10;</span><br><span class="line">        <span class="keyword">this</span>.outCo2 = outCo2;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAvgTemp</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> avgTemp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAvgTemp</span><span class="params">(<span class="keyword">int</span> avgTemp)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.avgTemp = avgTemp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAvgHumid</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> avgHumid;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAvgHumid</span><span class="params">(<span class="keyword">int</span> avgHumid)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.avgHumid = avgHumid;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAvgPm10</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> avgPm10;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAvgPm10</span><span class="params">(<span class="keyword">int</span> avgPm10)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.avgPm10 = avgPm10;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAvgCo2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> avgCo2;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAvgCo2</span><span class="params">(<span class="keyword">int</span> avgCo2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.avgCo2 = avgCo2;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getInYiwei</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> inYiwei;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setInYiwei</span><span class="params">(<span class="keyword">int</span> inYiwei)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.inYiwei = inYiwei;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getInTemp</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> inTemp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setInTemp</span><span class="params">(<span class="keyword">int</span> inTemp)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.inTemp = inTemp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getInPm10</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> inPm10;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setInPm10</span><span class="params">(<span class="keyword">int</span> inPm10)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.inPm10 = inPm10;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getInCo2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> inCo2;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setInCo2</span><span class="params">(<span class="keyword">int</span> inCo2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.inCo2 = inCo2;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getOutTemp</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> outTemp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setOutTemp</span><span class="params">(<span class="keyword">int</span> outTemp)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.outTemp = outTemp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getOutPm10</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> outPm10;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setOutPm10</span><span class="params">(<span class="keyword">int</span> outPm10)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.outPm10 = outPm10;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getOutCo2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> outCo2;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setOutCo2</span><span class="params">(<span class="keyword">int</span> outCo2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.outCo2 = outCo2;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getWarnData</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> warnData;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setWarnData</span><span class="params">(<span class="keyword">int</span> warnData)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.warnData = warnData;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;pom-xml&quot;&gt;&lt;a href=&quot;#pom-xml&quot; class=&quot;headerlink&quot; title=&quot;pom.xml&quot;&gt;&lt;/a&gt;pom.xml&lt;/h2&gt;&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;g
      
    
    </summary>
    
      <category term="Linux" scheme="https://qijianguo.com/categories/Linux/"/>
    
    
      <category term="linux" scheme="https://qijianguo.com/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>Linux简单命令</title>
    <link href="https://qijianguo.com/Linux/2019/04/17/Linux%E7%AE%80%E5%8D%95%E5%91%BD%E4%BB%A4.html"/>
    <id>https://qijianguo.com/Linux/2019/04/17/Linux简单命令.html</id>
    <published>2019-04-17T06:18:44.237Z</published>
    <updated>2019-04-17T07:45:59.026Z</updated>
    
    <content type="html"><![CDATA[<h2 id="查看磁盘量-du"><a href="#查看磁盘量-du" class="headerlink" title="查看磁盘量 du"></a>查看磁盘量 du</h2><p>参数</p><blockquote><p>-a或-all 显示目录中个别文件的大小。<br>-b或-bytes 显示目录或文件大小时，以byte为单位。<br>-c或–total 除了显示个别目录或文件的大小外，同时也显示所有目录或文件的总和。<br>-k或–kilobytes 以KB(1024bytes)为单位输出。<br>-m或–megabytes 以MB为单位输出。<br>-s或–summarize 仅显示总计，只列出最后加总的值。<br>-h或–human-readable 以K，M，G为单位，提高信息的可读性。<br>-x或–one-file-xystem 以一开始处理时的文件系统为准，若遇上其它不同的文件系统目录则略过。<br>-L&lt;符号链接&gt;或–dereference&lt;符号链接&gt; 显示选项中所指定符号链接的源文件大小。<br>-S或–separate-dirs 显示个别目录的大小时，并不含其子目录的大小。<br>-X&lt;文件&gt;或–exclude-from=&lt;文件&gt; 在&lt;文件&gt;指定目录或文件。<br>–exclude=&lt;目录或文件&gt; 略过指定的目录或文件。<br>-D或–dereference-args 显示指定符号链接的源文件大小。<br>-H或–si 与-h参数相同，但是K，M，G是以1000为换算单位。<br>-l或–count-links 重复计算硬件链接的文件。</p></blockquote><p>示例</p><p>查看当前目录中文件或目录所占空间<br><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">du</span></span><br></pre></td></tr></table></figure></p><p>以指定单位显示，不加任何参数则为k(1k = 1024byte)， -m 兆</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">du -m</span></span><br></pre></td></tr></table></figure><p>输出，最下面的一行是当前目录的总大小<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">2./.openoffice/4/user</span><br><span class="line">2./.openoffice/4</span><br><span class="line">2./.openoffice</span><br><span class="line">1./.pki/nssdb</span><br><span class="line">1./.pki</span><br><span class="line">1./.ure</span><br><span class="line">506.</span><br></pre></td></tr></table></figure></p><p>指定目录<br><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">du etc</span></span><br></pre></td></tr></table></figure></p><p>指定多个文件, 并以兆显示<br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">du</span> file1 file2  -m</span><br></pre></td></tr></table></figure></p><p>只显示总和的大小</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">du -s</span></span><br></pre></td></tr></table></figure><h2 id="文件权限-chmod"><a href="#文件权限-chmod" class="headerlink" title="文件权限 chmod"></a>文件权限 chmod</h2><p>chmod [cfvR] [–help] [–version] [ugoa] [+-] [rwxX][…]</p><blockquote><p>-c : 若该档案权限确实已经更改，才显示其更改动作<br>-f : 若该档案权限无法被更改也不要显示错误讯息<br>-v : 显示权限变更的详细资料<br>-R : 对目前目录下的所有档案与子目录进行相同的权限变更(即以递回的方式逐个变更)<br>–help : 显示辅助说明<br>–version : 显示版本<br>u 表示该档案的拥有者，g 表示与该档案的拥有者属于同一个群体(group)者，o 表示其他以外的人，a 表示这三者皆是。<br>+-增加或减去权限<br>r 表示可读取，w 表示可写入，x 表示可执行，X 表示只有当该档案是个子目录或者该档案已经被设定过为可执行。 </p></blockquote><p>示例<br>将 text.txt 设为所有人可读</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod <span class="keyword">a</span>+r <span class="keyword">text</span>.txt</span><br></pre></td></tr></table></figure><p>或</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod ugo+r <span class="built_in">text</span>.txt</span><br></pre></td></tr></table></figure><p>将text1.txt、text2.txt设为拥有者和同一组的人可写，其他人不可写</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">chmod</span> <span class="selector-tag">ug</span>+<span class="selector-tag">w</span>,<span class="selector-tag">o-w</span> <span class="selector-tag">text1</span><span class="selector-class">.txt</span> <span class="selector-tag">text2</span><span class="selector-class">.txt</span></span><br></pre></td></tr></table></figure><p>将当前目录下的所有文件及子文件设为所有人可读</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod -R <span class="keyword">a</span>+w *</span><br></pre></td></tr></table></figure><p>用数字表示<br><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">-</span><span class="comment">rw</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span> <span class="comment">(600)</span> <span class="literal">-</span><span class="literal">-</span> <span class="comment">只有属主有读写权限。</span> </span><br><span class="line"><span class="literal">-</span><span class="comment">rw</span><span class="literal">-</span><span class="comment">r</span><span class="literal">-</span><span class="literal">-</span><span class="comment">r</span><span class="literal">-</span><span class="literal">-</span> <span class="comment">(644)</span> <span class="literal">-</span><span class="literal">-</span> <span class="comment">只有属主有读写权限；而属组用户和其他用户只有读权限。</span> </span><br><span class="line"><span class="literal">-</span><span class="comment">rwx</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span> <span class="comment">(700)</span> <span class="literal">-</span><span class="literal">-</span> <span class="comment">只有属主有读、写、执行权限。</span> </span><br><span class="line"><span class="literal">-</span><span class="comment">rwxr</span><span class="literal">-</span><span class="comment">xr</span><span class="literal">-</span><span class="comment">x</span> <span class="comment">(755)</span> <span class="literal">-</span><span class="literal">-</span> <span class="comment">属主有读、写、执行权限；而属组用户和其他用户只有读、执行权限。</span> </span><br><span class="line"><span class="literal">-</span><span class="comment">rwx</span><span class="literal">-</span><span class="literal">-</span><span class="comment">x</span><span class="literal">-</span><span class="literal">-</span><span class="comment">x</span> <span class="comment">(711)</span> <span class="literal">-</span><span class="literal">-</span> <span class="comment">属主有读、写、执行权限；而属组用户和其他用户只有执行权限。</span> </span><br><span class="line"><span class="literal">-</span><span class="comment">rw</span><span class="literal">-</span><span class="comment">rw</span><span class="literal">-</span><span class="comment">rw</span><span class="literal">-</span> <span class="comment">(666)</span> <span class="literal">-</span><span class="literal">-</span> <span class="comment">所有用户都有文件读、写权限。这种做法不可取。</span> </span><br><span class="line"><span class="literal">-</span><span class="comment">rwxrwxrwx</span> <span class="comment">(777)</span> <span class="literal">-</span><span class="literal">-</span> <span class="comment">所有用户都有读、写、执行权限。更不可取的做法。</span></span><br></pre></td></tr></table></figure></p><p>可执行文件</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">chmod -x <span class="keyword">deploy</span>.sh</span><br><span class="line"></span><br><span class="line"><span class="string">./deploy.sh</span></span><br></pre></td></tr></table></figure><h2 id="探测给定文件的类型-file"><a href="#探测给定文件的类型-file" class="headerlink" title="探测给定文件的类型 file"></a>探测给定文件的类型 file</h2><blockquote><p>-b：列出辨识结果时，不显示文件名称；<br>-c：详细显示指令执行过程，便于排错或分析程序执行的情形；<br>-f&lt;名称文件&gt;：指定名称文件，其内容有一个或多个文件名称时，让file依序辨识这些文件，格式为每列一个文件名称；<br>-L：直接显示符号连接所指向的文件类别；<br>-m&lt;魔法数字文件&gt;：指定魔法数字文件；<br>-v：显示版本信息；<br>-z：尝试去解读压缩文件的内容。</p></blockquote><h2 id="查找文件-find"><a href="#查找文件-find" class="headerlink" title="查找文件 find"></a>查找文件 find</h2><blockquote><p>-amin&lt;分钟&gt;：查找在指定时间曾被存取过的文件或目录，单位以分钟计算；<br>-anewer&lt;参考文件或目录&gt;：查找其存取时间较指定文件或目录的存取时间更接近现在的文件或目录；<br>-atime&lt;24小时数&gt;：查找在指定时间曾被存取过的文件或目录，单位以24小时计算；<br>-cmin&lt;分钟&gt;：查找在指定时间之时被更改过的文件或目录；<br>-cnewer&lt;参考文件或目录&gt;查找其更改时间较指定文件或目录的更改时间更接近现在的文件或目录；<br>-ctime&lt;24小时数&gt;：查找在指定时间之时被更改的文件或目录，单位以24小时计算；<br>-daystart：从本日开始计算时间；<br>-depth：从指定目录下最深层的子目录开始查找；<br>-expty：寻找文件大小为0 Byte的文件，或目录下没有任何子目录或文件的空目录；<br>-exec&lt;执行指令&gt;：假设find指令的回传值为True，就执行该指令；<br>-false：将find指令的回传值皆设为False；<br>-fls&lt;列表文件&gt;：此参数的效果和指定“-ls”参数类似，但会把结果保存为指定的列表文件；<br>-follow：排除符号连接；<br>-fprint&lt;列表文件&gt;：此参数的效果和指定“-print”参数类似，但会把结果保存成指定的列表文件；<br>-fprint0&lt;列表文件&gt;：此参数的效果和指定“-print0”参数类似，但会把结果保存成指定的列表文件；<br>-fprintf&lt;列表文件&gt;&lt;输出格式&gt;：此参数的效果和指定“-printf”参数类似，但会把结果保存成指定的列表文件；<br>-fstype&lt;文件系统类型&gt;：只寻找该文件系统类型下的文件或目录；<br>-gid&lt;群组识别码&gt;：查找符合指定之群组识别码的文件或目录；<br>-group&lt;群组名称&gt;：查找符合指定之群组名称的文件或目录；<br>-help或——help：在线帮助；<br>-ilname&lt;范本样式&gt;：此参数的效果和指定“-lname”参数类似，但忽略字符大小写的差别；<br>-iname&lt;范本样式&gt;：此参数的效果和指定“-name”参数类似，但忽略字符大小写的差别；<br>-inum&lt;inode编号&gt;：查找符合指定的inode编号的文件或目录；<br>-ipath&lt;范本样式&gt;：此参数的效果和指定“-path”参数类似，但忽略字符大小写的差别；<br>-iregex&lt;范本样式&gt;：此参数的效果和指定“-regexe”参数类似，但忽略字符大小写的差别；<br>-links&lt;连接数目&gt;：查找符合指定的硬连接数目的文件或目录；<br>-iname&lt;范本样式&gt;：指定字符串作为寻找符号连接的范本样式；<br>-ls：假设find指令的回传值为Ture，就将文件或目录名称列出到标准输出；<br>-maxdepth&lt;目录层级&gt;：设置最大目录层级；<br>-mindepth&lt;目录层级&gt;：设置最小目录层级；<br>-mmin&lt;分钟&gt;：查找在指定时间曾被更改过的文件或目录，单位以分钟计算；<br>-mount：此参数的效果和指定“-xdev”相同；<br>-mtime&lt;24小时数&gt;：查找在指定时间曾被更改过的文件或目录，单位以24小时计算；<br>-name&lt;范本样式&gt;：指定字符串作为寻找文件或目录的范本样式；<br>-newer&lt;参考文件或目录&gt;：查找其更改时间较指定文件或目录的更改时间更接近现在的文件或目录；<br>-nogroup：找出不属于本地主机群组识别码的文件或目录；<br>-noleaf：不去考虑目录至少需拥有两个硬连接存在；<br>-nouser：找出不属于本地主机用户识别码的文件或目录；<br>-ok&lt;执行指令&gt;：此参数的效果和指定“-exec”类似，但在执行指令之前会先询问用户，若回答“y”或“Y”，则放弃执行命令；<br>-path&lt;范本样式&gt;：指定字符串作为寻找目录的范本样式；<br>-perm&lt;权限数值&gt;：查找符合指定的权限数值的文件或目录；<br>-print：假设find指令的回传值为Ture，就将文件或目录名称列出到标准输出。格式为每列一个名称，每个名称前皆有“./”字符串；<br>-print0：假设find指令的回传值为Ture，就将文件或目录名称列出到标准输出。格式为全部的名称皆在同一行；<br>-printf&lt;输出格式&gt;：假设find指令的回传值为Ture，就将文件或目录名称列出到标准输出。格式可以自行指定；<br>-prune：不寻找字符串作为寻找文件或目录的范本样式;<br>-regex&lt;范本样式&gt;：指定字符串作为寻找文件或目录的范本样式；<br>-size&lt;文件大小&gt;：查找符合指定的文件大小的文件；<br>-true：将find指令的回传值皆设为True；<br>-typ&lt;文件类型&gt;：只寻找符合指定的文件类型的文件；<br>-uid&lt;用户识别码&gt;：查找符合指定的用户识别码的文件或目录；<br>-used&lt;日数&gt;：查找文件或目录被更改之后在指定时间曾被存取过的文件或目录，单位以日计算；<br>-user&lt;拥有者名称&gt;：查找符和指定的拥有者名称的文件或目录；<br>-version或——version：显示版本信息；<br>-xdev：将范围局限在先行的文件系统中；<br>-xtype&lt;文件类型&gt;：此参数的效果和指定“-type”参数类似，差别在于它针对符号连接检查。</p></blockquote><p>示例<br>查找当前文件夹及子文件夹下的所有文件和文件夹</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="builtin-name">find</span> .</span><br></pre></td></tr></table></figure><p>查找 /etc下文件后缀为 <strong>.conf</strong> 的文件</p><figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">find</span> /etc -<span class="built_in">name</span> <span class="string">'*.conf'</span></span><br></pre></td></tr></table></figure><p>忽略大小写</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">find</span> /etc -iname <span class="string">'*.conf'</span></span><br></pre></td></tr></table></figure><p>查找当前文件夹及子文件夹下后缀名为 <strong>.conf</strong> 或 <strong>.txt</strong> 的文件，（<strong>括号两边有空格哦</strong>）<br><figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">find</span> . \( -<span class="built_in">name</span> <span class="string">"*.conf"</span> -o -<span class="built_in">name</span> <span class="string">"*.txt"</span> \)</span><br></pre></td></tr></table></figure></p><p>匹配路径或文件（路径中有local或文件名含local）</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">find</span> <span class="regexp">/usr/</span> -path <span class="string">"*local"</span></span><br></pre></td></tr></table></figure><p>正则表达式匹配路径</p><figure class="highlight taggerscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -regex ".*<span class="symbol">\(</span><span class="symbol">\.</span>txt<span class="symbol">\|</span><span class="symbol">\.</span>pdf<span class="symbol">\)</span>$"</span><br></pre></td></tr></table></figure><p>同上，忽略大小写</p><figure class="highlight taggerscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -iregex ".*<span class="symbol">\(</span><span class="symbol">\.</span>txt<span class="symbol">\|</span><span class="symbol">\.</span>pdf<span class="symbol">\)</span>$"</span><br></pre></td></tr></table></figure><p>查询 <strong>/etc</strong> 下不是以 <strong>.conf</strong> 结尾的文件</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="builtin-name">find</span> /etc ! -name <span class="string">"*.conf"</span></span><br></pre></td></tr></table></figure><p>根据文件类型查找</p><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">find</span> -<span class="built_in">type</span> 类型参数</span><br></pre></td></tr></table></figure><p>类型参数：</p><blockquote><p> f 普通文件<br>    l 符号连接<br>    d 目录<br>    c 字符设备<br>    b 块设备<br>    s 套接字<br>    p Fifo</p></blockquote><p>列出所有文件<br><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">find</span> -<span class="built_in">type</span> f</span><br></pre></td></tr></table></figure></p><p>向下最大深度限制为3</p><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">find</span> -maxdepth <span class="number">3</span> -<span class="built_in">type</span> f</span><br></pre></td></tr></table></figure><p>搜索出深度距离当前目录至少2个子目录的所有文件</p><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">find</span> -mindepth -<span class="built_in">type</span> f</span><br></pre></td></tr></table></figure><h4 id="根据时间戳查找文件"><a href="#根据时间戳查找文件" class="headerlink" title="根据时间戳查找文件"></a>根据时间戳查找文件</h4><p> UNIX/Linux文件系统每个文件都有三种时间戳：</p><pre><code>访问时间（-atime/天，-amin/分钟）：用户最近一次访问时间。修改时间（-mtime/天，-mmin/分钟）：文件最后一次修改时间。变化时间（-ctime/天，-cmin/分钟）：文件数据元（例如权限等）最后一次修改时间。</code></pre><p>查找7天内修改过的文件</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find -<span class="keyword">type</span> <span class="type">f </span>-atime -<span class="number">7</span></span><br></pre></td></tr></table></figure><p>修改时间正好是7天的文件</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find -<span class="keyword">type</span> <span class="type">f </span>-atime <span class="number">7</span></span><br></pre></td></tr></table></figure><p>查找修改时间大于7天的所有文件</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find -<span class="keyword">type</span> <span class="type">f </span>atime +<span class="number">7</span></span><br></pre></td></tr></table></figure><p>查找访问时间在60分钟以内的文件</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find -<span class="keyword">type</span> <span class="type">f </span>-amin -<span class="number">60</span></span><br></pre></td></tr></table></figure><h4 id="根据文件大小匹配"><a href="#根据文件大小匹配" class="headerlink" title="根据文件大小匹配"></a>根据文件大小匹配</h4><figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">find</span> . -<span class="built_in">type</span> f <span class="built_in">size</span> 文件大小</span><br></pre></td></tr></table></figure><p> 文件大小单元：</p><pre><code>b —— 块（512字节）c —— 字节w —— 字（2字节）k —— 千字节M —— 兆字节G —— 吉字节</code></pre><p>搜索大于10k的所有文件</p><figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">find</span> -<span class="built_in">type</span> f -<span class="built_in">size</span> <span class="number">10</span>k</span><br></pre></td></tr></table></figure><h4 id="删除匹配文件"><a href="#删除匹配文件" class="headerlink" title="删除匹配文件"></a>删除匹配文件</h4><figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">find</span> -<span class="built_in">type</span> f -<span class="built_in">name</span> <span class="string">'*.txt'</span> -delete</span><br></pre></td></tr></table></figure><h4 id="根据文件权限-所有权匹配"><a href="#根据文件权限-所有权匹配" class="headerlink" title="根据文件权限/所有权匹配"></a>根据文件权限/所有权匹配</h4><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find -<span class="keyword">type</span> <span class="type">f </span>-perm <span class="number">777</span></span><br></pre></td></tr></table></figure><p>找出当前目录下权限 <strong>不是</strong> 644的sh文件<br><figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">find</span> -<span class="built_in">type</span> f  -<span class="built_in">name</span> <span class="string">'*.sh'</span> ! -perm <span class="number">644</span></span><br></pre></td></tr></table></figure></p><p>找出当前目录用户root拥有的所有文件</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -<span class="keyword">type</span> f -<span class="keyword">user</span> <span class="title">root</span></span><br></pre></td></tr></table></figure><p>找出当前目录用户组sunk拥有的所有文件</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -<span class="keyword">type</span> f -<span class="keyword">group</span> <span class="title">sunk</span></span><br></pre></td></tr></table></figure><h2 id="过滤-grep"><a href="#过滤-grep" class="headerlink" title="过滤 grep"></a>过滤 grep</h2><p>过滤出 /etc/passwd 文件中包含 root 的记录<br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">grep</span> <span class="string">'root'</span> <span class="regexp">/etc/</span>passwd</span><br></pre></td></tr></table></figure></p><p>递归地过滤出 /var/log/ 目录中包含 linux 的记录</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">grep</span> -r <span class="string">'linux'</span> <span class="regexp">/var/</span>log<span class="regexp">/</span></span><br></pre></td></tr></table></figure><h2 id="管道"><a href="#管道" class="headerlink" title="管道 |"></a>管道 |</h2><blockquote><p>简单来说, Linux 中管道的作用是将上一个命令的输出作为下一个命令的输入, 像 pipe 一样将各个命令串联起来执行, 管道的操作符是 |</p></blockquote><p>比如, 我们可以将 cat 和 grep 两个命令用管道组合在一起</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat <span class="regexp">/etc/</span>passwd | <span class="keyword">grep</span> <span class="string">'root'</span></span><br></pre></td></tr></table></figure><p>过滤出 /etc 目录中名字包含 ssh 的目录(不包括子目录)</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ls</span> /etc | <span class="keyword">grep</span> <span class="string">'ssh'</span></span><br></pre></td></tr></table></figure><h3 id="重定向-gt-lt"><a href="#重定向-gt-lt" class="headerlink" title="重定向 &gt; &lt;"></a>重定向 &gt; &lt;</h3><blockquote><p>可以使用 &gt; 或 &lt; 将命令的输出重定向到一个文件中</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">'Hello World'</span> &gt; ~/test.txt</span><br></pre></td></tr></table></figure><h2 id="运维常用命令"><a href="#运维常用命令" class="headerlink" title="运维常用命令"></a>运维常用命令</h2><h3 id="ping"><a href="#ping" class="headerlink" title="ping"></a>ping</h3><p>对 cloud.tencent.com 发送 4 个 ping 包, 检查与其是否联通<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping -c <span class="number">4</span> www<span class="selector-class">.baidu</span><span class="selector-class">.com</span></span><br></pre></td></tr></table></figure></p><h3 id="netstat-命令"><a href="#netstat-命令" class="headerlink" title="netstat 命令"></a>netstat 命令</h3><blockquote><p>netstat 命令用于显示各种网络相关信息，如网络连接, 路由表, 接口状态等等</p></blockquote><p>列出所有处于监听状态的tcp端口</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -<span class="keyword">lt</span></span><br></pre></td></tr></table></figure><p>查看所有的端口信息, 包括 PID 和进程名称</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">netstat -tulpn</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;查看磁盘量-du&quot;&gt;&lt;a href=&quot;#查看磁盘量-du&quot; class=&quot;headerlink&quot; title=&quot;查看磁盘量 du&quot;&gt;&lt;/a&gt;查看磁盘量 du&lt;/h2&gt;&lt;p&gt;参数&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;-a或-all 显示目录中个别文件的大小。&lt;b
      
    
    </summary>
    
      <category term="Linux" scheme="https://qijianguo.com/categories/Linux/"/>
    
    
      <category term="linux" scheme="https://qijianguo.com/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>Linux中的快捷键</title>
    <link href="https://qijianguo.com/Linux/2019/04/17/Linux%E4%B8%AD%E7%9A%84%E5%BF%AB%E6%8D%B7%E9%94%AE.html"/>
    <id>https://qijianguo.com/Linux/2019/04/17/Linux中的快捷键.html</id>
    <published>2019-04-17T06:18:44.234Z</published>
    <updated>2019-04-17T07:46:13.563Z</updated>
    
    <content type="html"><![CDATA[<h3 id="tab"><a href="#tab" class="headerlink" title="tab"></a>tab</h3><blockquote><p>自动补全</p></blockquote><h3 id="ctrl-a"><a href="#ctrl-a" class="headerlink" title="ctrl a"></a>ctrl a</h3><blockquote><p>光标移到命令行开头</p></blockquote><h3 id="ctrl-e"><a href="#ctrl-e" class="headerlink" title="ctrl e"></a>ctrl e</h3><blockquote><p>光标移到命令行结尾</p></blockquote><h3 id="ctrl-u"><a href="#ctrl-u" class="headerlink" title="ctrl u"></a>ctrl u</h3><blockquote><p>删除光标以前的内容</p></blockquote><h3 id="ctrl-k"><a href="#ctrl-k" class="headerlink" title="ctrl k"></a>ctrl k</h3><blockquote><p>删除光标后的内容</p></blockquote><h3 id="ctrl-d"><a href="#ctrl-d" class="headerlink" title="ctrl d"></a>ctrl d</h3><blockquote><p>删除当前字母</p></blockquote><h3 id="ctrl-w"><a href="#ctrl-w" class="headerlink" title="ctrl w"></a>ctrl w</h3><blockquote><p>删除光标前一个单词</p></blockquote><h3 id="ctrl-y"><a href="#ctrl-y" class="headerlink" title="ctrl y"></a>ctrl y</h3><blockquote><p>恢复ctrl w 或 ctrl u 或ctrl k删掉的单词</p></blockquote><h3 id="ctrl-l"><a href="#ctrl-l" class="headerlink" title="ctrl l"></a>ctrl l</h3><blockquote><p>相当于clear</p></blockquote><h3 id="ctrl-b"><a href="#ctrl-b" class="headerlink" title="ctrl b"></a>ctrl b</h3><blockquote><p>向前移动</p></blockquote><h3 id="ctrl-f"><a href="#ctrl-f" class="headerlink" title="ctrl f"></a>ctrl f</h3><blockquote><p>向后移动</p></blockquote><h3 id="ctrl-p"><a href="#ctrl-p" class="headerlink" title="ctrl p"></a>ctrl p</h3><blockquote><p>向上显示历史的命令</p></blockquote><h3 id="ctrl-n"><a href="#ctrl-n" class="headerlink" title="ctrl n"></a>ctrl n</h3><blockquote><p>向下显示历史的命令</p></blockquote><h3 id="ctrl-d-1"><a href="#ctrl-d-1" class="headerlink" title="ctrl d"></a>ctrl d</h3><blockquote><p>关闭终端</p></blockquote><h3 id="shift"><a href="#shift" class="headerlink" title="shift +-"></a>shift +-</h3><blockquote><p>终端页面上下滚动</p></blockquote><p>参考 <a href="https://blog.csdn.net/kyjl888/article/details/70833056" target="_blank" rel="noopener">https://blog.csdn.net/kyjl888/article/details/70833056</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;tab&quot;&gt;&lt;a href=&quot;#tab&quot; class=&quot;headerlink&quot; title=&quot;tab&quot;&gt;&lt;/a&gt;tab&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;自动补全&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;ctrl-a&quot;&gt;&lt;a href=&quot;#ctrl
      
    
    </summary>
    
      <category term="Linux" scheme="https://qijianguo.com/categories/Linux/"/>
    
    
      <category term="linux" scheme="https://qijianguo.com/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>Springboot项目Netty做服务端并自定义Gson配置类解析数据包</title>
    <link href="https://qijianguo.com/Netty/2019/04/17/Springboot%E9%A1%B9%E7%9B%AENetty%E5%81%9A%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%B9%B6%E8%87%AA%E5%AE%9A%E4%B9%89Gson%E9%85%8D%E7%BD%AE%E7%B1%BB%E8%A7%A3%E6%9E%90%E6%95%B0%E6%8D%AE%E5%8C%85.html"/>
    <id>https://qijianguo.com/Netty/2019/04/17/Springboot项目Netty做服务端并自定义Gson配置类解析数据包.html</id>
    <published>2019-04-17T06:18:44.231Z</published>
    <updated>2019-04-17T07:47:05.628Z</updated>
    
    <content type="html"><![CDATA[<p>简述</p><blockquote><p>Springboot项目中使用 <strong><em>Netty</em></strong> 作为服务端，接收并处理其他平台发送的 <strong><em>Json数据包</em></strong>，处理拆包、粘包及数据包中时间类型是 <strong><em>long</em></strong> 类型需转成 <strong><em>Date</em></strong>的情况。</p></blockquote><p>项目流程</p><ol><li>启动项目，开启Netty服务端口11111</li><li>加载Bean</li><li>本地开启socket tool，模拟发送惊悚数据包</li><li>Netty解析json包，处理特殊情况，例如 <strong><em>拆包</em></strong>、<strong><em>粘包</em></strong>。</li><li>Gson按照配置文件处理json文件，并转换成JavaBeen</li><li>入库。</li></ol><p>项目结构（下载即可：<a href="https://download.csdn.net/download/qq_35974759/10850042" target="_blank" rel="noopener">传送门</a>）</p><p><img src="https://img-blog.csdnimg.cn/20181214105924997.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>pom.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span><span class="meta">?&gt;</span></span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.angus.demo<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>externalDataConnector<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.5.6.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.5.4.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.jboss.netty<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>netty<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2.10.Final<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>net.sf.json-lib<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>json-lib<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">classifier</span>&gt;</span>jdk15<span class="tag">&lt;/<span class="name">classifier</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.16.18<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger-ui<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-codec<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-codec<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.google.code.gson<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>gson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.8.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.data<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-data-mongodb<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.10.6.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.21<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-jpa<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.5.6.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.httpcomponents<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fluent-hc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.5.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.netty<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>netty-all<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.1.30.Final<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">mainClass</span>&gt;</span>cn.angus.demo.Application<span class="tag">&lt;/<span class="name">mainClass</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>true<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><p>Listener</p><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.angus.demo.listener;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.angus.demo.consts.Ports;</span><br><span class="line"><span class="keyword">import</span> cn.angus.demo.<span class="keyword">handler</span>.VehicleGasSyncHandler;</span><br><span class="line"><span class="keyword">import</span> io.netty.bootstrap.ServerBootstrap;</span><br><span class="line"><span class="keyword">import</span> io.netty.channel.*;</span><br><span class="line"><span class="keyword">import</span> io.netty.channel.nio.NioEventLoopGroup;</span><br><span class="line"><span class="keyword">import</span> io.netty.channel.socket.nio.NioServerSocketChannel;</span><br><span class="line"><span class="keyword">import</span> io.netty.<span class="keyword">handler</span>.timeout.ReadTimeoutHandler;</span><br><span class="line"><span class="keyword">import</span> io.netty.util.concurrent.DefaultEventExecutorGroup;</span><br><span class="line"><span class="keyword">import</span> io.netty.util.concurrent.EventExecutorGroup;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> io.netty.<span class="keyword">handler</span>.codec.json.JsonObjectDecoder;</span><br><span class="line"><span class="keyword">import</span> javax.annotation.PostConstruct;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">VehicleGasSyncListener</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> VehicleGasSyncHandler vehicleGasSyncHandler;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostConstruct</span></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">void</span> <span class="title">startNettyServerAsync</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">this</span>::startNettyServer).start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">void</span> <span class="title">startNettyServer</span><span class="params">()</span></span>&#123;</span><br><span class="line">        EventLoopGroup bossGroup = <span class="keyword">new</span> NioEventLoopGroup();</span><br><span class="line">        EventLoopGroup workerGroup = <span class="keyword">new</span> NioEventLoopGroup();</span><br><span class="line">        <span class="keyword">final</span> EventExecutorGroup businessGroup = <span class="keyword">new</span> DefaultEventExecutorGroup(<span class="number">10</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            ServerBootstrap b = <span class="keyword">new</span> ServerBootstrap();</span><br><span class="line">            b.group(bossGroup, workerGroup)</span><br><span class="line">                    .channel(NioServerSocketChannel.class)</span><br><span class="line">                    .option(ChannelOption.SO_BACKLOG, <span class="number">1024</span>)</span><br><span class="line">                    .childOption(ChannelOption.SO_KEEPALIVE, <span class="keyword">true</span>)</span><br><span class="line">                    .childHandler(<span class="keyword">new</span> ChannelInitializer() &#123;</span><br><span class="line">                        <span class="meta">@Override</span></span><br><span class="line">                        <span class="keyword">protected</span> <span class="function"><span class="keyword">void</span> <span class="title">initChannel</span><span class="params">(Channel channel)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                        <span class="comment">// 设置连接超时时间（很重要）</span></span><br><span class="line">                            channel.pipeline().addLast(<span class="string">"readtime"</span>,<span class="keyword">new</span> ReadTimeoutHandler(<span class="number">60</span>));</span><br><span class="line">                            <span class="comment">// 解决粘包问题</span></span><br><span class="line">                            channel.pipeline().addLast(<span class="keyword">new</span> JsonObjectDecoder());</span><br><span class="line">                            channel.pipeline().addLast(businessGroup, <span class="string">"executer"</span>, vehicleGasSyncHandler);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);</span><br><span class="line">            ChannelFuture f = b.bind(Ports.VEHICLE_GAS_PORT).sync();</span><br><span class="line">            f.channel().closeFuture().sync();</span><br><span class="line">        &#125; <span class="keyword">catch</span>(Exception e) &#123;</span><br><span class="line">            log.<span class="keyword">error</span>(e.getMessage(), e);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            bossGroup.shutdownGracefully();</span><br><span class="line">            workerGroup.shutdownGracefully();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Handler</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.angus.demo.handler;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.angus.demo.dao.<span class="type">SpotDao</span>;</span><br><span class="line"><span class="keyword">import</span> cn.angus.demo.domain.<span class="type">Request</span>;</span><br><span class="line"><span class="keyword">import</span> cn.angus.demo.domain.<span class="type">Spot</span>;</span><br><span class="line"><span class="keyword">import</span> com.google.gson.<span class="type">Gson</span>;</span><br><span class="line"><span class="keyword">import</span> io.netty.buffer.<span class="type">ByteBuf</span>;</span><br><span class="line"><span class="keyword">import</span> io.netty.buffer.<span class="type">Unpooled</span>;</span><br><span class="line"><span class="keyword">import</span> io.netty.channel.<span class="type">ChannelFutureListener</span>;</span><br><span class="line"><span class="keyword">import</span> io.netty.channel.<span class="type">ChannelHandler</span>;</span><br><span class="line"><span class="keyword">import</span> io.netty.channel.<span class="type">ChannelHandlerContext</span>;</span><br><span class="line"><span class="keyword">import</span> io.netty.channel.<span class="type">ChannelInboundHandlerAdapter</span>;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.<span class="type">Slf4j</span>;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.<span class="type">Autowired</span>;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.<span class="type">Component</span>;</span><br><span class="line"><span class="keyword">import</span> java.nio.charset.<span class="type">Charset</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ChannelHandler</span>.<span class="type">Sharable</span></span><br><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">VehicleGasSyncHandler</span> <span class="keyword">extends</span> <span class="title">ChannelInboundHandlerAdapter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">Gson</span> gson;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">SpotDao</span> spotDao;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> static <span class="keyword">final</span> <span class="type">String</span> <span class="type">SPOT</span> = <span class="string">"spot"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    public <span class="type">VehicleGasSyncHandler</span>(<span class="type">Gson</span> gson) &#123;</span><br><span class="line">        <span class="keyword">this</span>.gson = gson;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    public void channelRead(<span class="type">ChannelHandlerContext</span> ctx, <span class="type">Object</span> msg)&#123;</span><br><span class="line">        <span class="type">ByteBuf</span> m = (<span class="type">ByteBuf</span>) msg;</span><br><span class="line">        <span class="type">String</span> rawMsg = m.toString(<span class="type">Charset</span>.forName(<span class="string">"utf-8"</span>));</span><br><span class="line">        log.info(<span class="string">"VehicleGasSyncHandler Receive message: "</span> +  rawMsg);</span><br><span class="line">        <span class="keyword">if</span> (rawMsg.length() == <span class="number">0</span> || rawMsg.length() <span class="number">-1</span> != rawMsg.lastIndexOf(<span class="string">"&#125;"</span>))</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        <span class="type">String</span> response = persistAndResponse(rawMsg);</span><br><span class="line">        <span class="keyword">if</span> (response != <span class="literal">null</span>) &#123;</span><br><span class="line">            ctx.writeAndFlush(<span class="type">Unpooled</span>.wrappedBuffer(response.getBytes()))</span><br><span class="line">                    .addListener(<span class="type">ChannelFutureListener</span>.<span class="type">FIRE_EXCEPTION_ON_FAILURE</span>)</span><br><span class="line">                    .addListener((<span class="type">ChannelFutureListener</span>) channelFuture -&gt; log.info(<span class="string">"VehicleGasSyncHandler 成功发送响应&#123;&#125;"</span>, response));</span><br><span class="line">            m.release();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> persistAndResponse(<span class="type">String</span> rawMsg) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            gson.fromJson(rawMsg, <span class="type">Spot</span>.<span class="keyword">class</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (<span class="type">Exception</span> e) &#123;</span><br><span class="line">            log.error(e.getMessage(), e);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 省略返回结果。</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>GsonConfig.java</p><figure class="highlight moonscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">package</span> cn.angus.demo.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.google.gson.*;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line">@Configuration</span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">GsonConfig</span> &#123;</span></span><br><span class="line">    @Bean</span><br><span class="line">    public Gson gson()&#123;</span><br><span class="line">        <span class="keyword">return</span> new GsonBuilder()</span><br><span class="line">                .setFieldNamingPolicy(FieldNamingPolicy.LOWER_CASE_WITH_UNDERSCORES)</span><br><span class="line">                // Date 类型适配器</span><br><span class="line">                .registerTypeAdapter(Date.<span class="keyword">class</span>, <span class="function"><span class="params">(JsonDeserializer&lt;Date&gt;)</span> <span class="params">(json, typeOfT, context)</span> -&gt;</span> new Date(json.getAsJsonPrimitive().getAsLong()))</span><br><span class="line">                .registerTypeAdapter(Date.<span class="keyword">class</span>, <span class="function"><span class="params">(JsonSerializer&lt;Date&gt;)</span> <span class="params">(date, <span class="built_in">type</span>, jsonSerializationContext)</span> -&gt;</span> new JsonPrimitive(date.getTime()))</span><br><span class="line">                .create();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>实体类（createTime：将long转成Date）</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Document</span>(collection = <span class="string">"vehicle_spot"</span>)</span><br><span class="line"><span class="meta">@JsonIgnoreProperties</span>(ignoreUnknown = <span class="literal">true</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> Spot &#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">String</span> id;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">String</span> area;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">String</span> address;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">String</span> longitude;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">String</span> latitude;</span><br><span class="line">    <span class="keyword">private</span> Double slope;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">Date</span> createTime;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">Boolean</span> inUse;</span><br><span class="line">    <span class="keyword">private</span> Integer fuelTypeId;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">String</span> code;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Ports.java</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Ports</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> VEHICLE_GAS_PORT = <span class="number">11111</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>测试用例：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"_id"</span> : <span class="string">"297e0587671b749801671b754b020000"</span>,</span><br><span class="line">    <span class="attr">"area"</span> : <span class="string">"京"</span>,</span><br><span class="line">    <span class="attr">"address"</span> : <span class="string">"北京"</span>,</span><br><span class="line">    <span class="attr">"longitude"</span> : <span class="string">"489"</span>,</span><br><span class="line">    <span class="attr">"latitude"</span> : <span class="string">"125"</span>,</span><br><span class="line">    <span class="attr">"slope"</span> : <span class="number">5.0</span>,</span><br><span class="line">    <span class="attr">"create_time"</span> :<span class="number">1544756993000</span>,</span><br><span class="line">    <span class="attr">"fuel_type_id"</span> : <span class="number">1</span>,</span><br><span class="line">    <span class="attr">"code"</span> : <span class="string">"testCode"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>mongo 入库：<br><img src="https://img-blog.csdnimg.cn/20181214112637648.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>项目下载： <a href="https://download.csdn.net/download/qq_35974759/10850042" target="_blank" rel="noopener">https://download.csdn.net/download/qq_35974759/10850042</a><br>下载后导入到Idea中，配置maven，修改application-dev中的数据库地址改为你的，启动项目，利用SocketTool模拟发送数据包。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;简述&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Springboot项目中使用 &lt;strong&gt;&lt;em&gt;Netty&lt;/em&gt;&lt;/strong&gt; 作为服务端，接收并处理其他平台发送的 &lt;strong&gt;&lt;em&gt;Json数据包&lt;/em&gt;&lt;/strong&gt;，处理拆包、粘包及数据包中时
      
    
    </summary>
    
      <category term="Netty" scheme="https://qijianguo.com/categories/Netty/"/>
    
    
      <category term="netty" scheme="https://qijianguo.com/tags/netty/"/>
    
  </entry>
  
  <entry>
    <title>书签</title>
    <link href="https://qijianguo.com/Other/2019/04/17/%E4%B9%A6%E7%AD%BE.html"/>
    <id>https://qijianguo.com/Other/2019/04/17/书签.html</id>
    <published>2019-04-17T06:18:44.228Z</published>
    <updated>2019-04-17T07:33:43.378Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Json格式化"><a href="#Json格式化" class="headerlink" title="Json格式化"></a>Json格式化</h3><p>很全的json工具 <a href="http://www.bejson.com" target="_blank" rel="noopener">http://www.bejson.com</a><br>比较智能的json工具<a href="https://www.json.cn/" target="_blank" rel="noopener">https://www.json.cn/</a></p><h3 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h3><p>Java8 API <a href="https://docs.oracle.com/javase/8/docs/api/" target="_blank" rel="noopener">https://docs.oracle.com/javase/8/docs/api/</a><br>MongoDB API <a href="https://docs.spring.io/spring-data/data-mongo/docs/1.7.0.RC1/reference/html/#mongodb-connectors" target="_blank" rel="noopener">https://docs.spring.io/spring-data/data-mongo/docs/1.7.0.RC1/reference/html/#mongodb-connectors</a><br>简明Python教程 <a href="http://wiki.jikexueyuan.com/project/simple-python-course" target="_blank" rel="noopener">http://wiki.jikexueyuan.com/project/simple-python-course</a><br>知乎Python库<a href="https://www.zhihu.com/question/24590883" target="_blank" rel="noopener">https://www.zhihu.com/question/24590883</a></p><h3 id="UI"><a href="#UI" class="headerlink" title="UI"></a>UI</h3><p>iconfont <a href="http://iconfont.cn/collections/detail?cid=918" target="_blank" rel="noopener">http://iconfont.cn/collections/detail?cid=918</a></p><h3 id="学习资源"><a href="#学习资源" class="headerlink" title="学习资源"></a>学习资源</h3><p>itsource <a href="http://www.itsource.com.cn/forum.php" target="_blank" rel="noopener">http://www.itsource.com.cn/forum.php</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;Json格式化&quot;&gt;&lt;a href=&quot;#Json格式化&quot; class=&quot;headerlink&quot; title=&quot;Json格式化&quot;&gt;&lt;/a&gt;Json格式化&lt;/h3&gt;&lt;p&gt;很全的json工具 &lt;a href=&quot;http://www.bejson.com&quot; target=&quot;
      
    
    </summary>
    
      <category term="Other" scheme="https://qijianguo.com/categories/Other/"/>
    
    
      <category term="other" scheme="https://qijianguo.com/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>阿里Android开发手册</title>
    <link href="https://qijianguo.com/Android/2019/04/17/%E9%98%BF%E9%87%8CAndroid%E5%BC%80%E5%8F%91%E6%89%8B%E5%86%8C.html"/>
    <id>https://qijianguo.com/Android/2019/04/17/阿里Android开发手册.html</id>
    <published>2019-04-17T06:18:44.225Z</published>
    <updated>2019-04-17T07:47:32.962Z</updated>
    
    <content type="html"><![CDATA[<p>阿里巴巴Android开发手册  <a href="https://alitech-private.oss-cn-beijing.aliyuncs.com/1520478361732/Android_v9.pdf?Expires=1545024845&amp;OSSAccessKeyId=LTAIgu8IHyutlWfc&amp;Signature=babkFy428i2J/u6I6JSwNHr3Ac4=" target="_blank" rel="noopener">传送门</a> 在浏览器中打开即可浏览。<br><img src="https://img-blog.csdnimg.cn/20181217124458501.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;阿里巴巴Android开发手册  &lt;a href=&quot;https://alitech-private.oss-cn-beijing.aliyuncs.com/1520478361732/Android_v9.pdf?Expires=1545024845&amp;amp;OSSAcce
      
    
    </summary>
    
      <category term="Android" scheme="https://qijianguo.com/categories/Android/"/>
    
    
      <category term="android" scheme="https://qijianguo.com/tags/android/"/>
    
  </entry>
  
  <entry>
    <title>阿里Java开发手册</title>
    <link href="https://qijianguo.com/Java/2019/04/17/%E9%98%BF%E9%87%8CJava%E5%BC%80%E5%8F%91%E6%89%8B%E5%86%8C.html"/>
    <id>https://qijianguo.com/Java/2019/04/17/阿里Java开发手册.html</id>
    <published>2019-04-17T06:18:44.222Z</published>
    <updated>2019-04-17T07:47:36.475Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://img-blog.csdnimg.cn/20181217125434472.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>传送门<br>pdf <a href="https://alitech-private.oss-cn-beijing.aliyuncs.com/1528269849853/Java_manual.pdf?Expires=1545026045&amp;OSSAccessKeyId=LTAIgu8IHyutlWfc&amp;Signature=DeK2I9/0f5KfxlulJpdYQmhHYTI%3D" target="_blank" rel="noopener">阿里巴巴Java开发手册</a><br>github <a href="https://github.com/alibaba/p3c/blob/master/%E9%98%BF%E9%87%8C%E5%B7%B4%E5%B7%B4Java%E5%BC%80%E5%8F%91%E6%89%8B%E5%86%8C%EF%BC%88%E8%AF%A6%E5%B0%BD%E7%89%88%EF%BC%89.pdf" target="_blank" rel="noopener">阿里巴巴Java开发手册（详尽版）.pdf </a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20181217125434472.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM
      
    
    </summary>
    
      <category term="Java" scheme="https://qijianguo.com/categories/Java/"/>
    
    
      <category term="java" scheme="https://qijianguo.com/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>Windows server部署项目（前后端分离）</title>
    <link href="https://qijianguo.com/winsw/2019/04/17/Windows%20server%E9%83%A8%E7%BD%B2%E9%A1%B9%E7%9B%AE%EF%BC%88%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%EF%BC%89.html"/>
    <id>https://qijianguo.com/winsw/2019/04/17/Windows server部署项目（前后端分离）.html</id>
    <published>2019-04-17T06:18:44.219Z</published>
    <updated>2019-04-17T07:47:25.585Z</updated>
    
    <content type="html"><![CDATA[<h3 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h3><h4 id="后端："><a href="#后端：" class="headerlink" title="后端："></a>后端：</h4><blockquote><p>安装 jdk，maven，配置环境变量<br>安装 nginx，并配置代理模式<br>安装Git</p></blockquote><h4 id="前端："><a href="#前端：" class="headerlink" title="前端："></a>前端：</h4><blockquote><p>安装node， cnpm， 配置node及cnpm环境变量</p></blockquote><h4 id="安装JDK-下载传送门"><a href="#安装JDK-下载传送门" class="headerlink" title="安装JDK 下载传送门"></a>安装JDK <a href="https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html" target="_blank" rel="noopener">下载传送门</a></h4><p><img src="https://img-blog.csdnimg.cn/20181218112016574.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><blockquote><ol><li>选择 jdk版本  2. 同意协议   3. 选择32位或64位版本。</li></ol></blockquote><p>安装：按提示进行安装，安装过程省略。最好创建一个专门的文件夹，例如我的<br><img src="https://img-blog.csdnimg.cn/20181218112315361.png" alt="在这里插入图片描述"><br>添加环境变量<br>我的电脑 -&gt;  属性 -&gt; 高级系统设置 -&gt; 环境变量 -&gt;<br><img src="https://img-blog.csdnimg.cn/20181218112544357.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><img src="https://img-blog.csdnimg.cn/20181218112902711.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述">新建JAVA_HOME<br><img src="https://img-blog.csdnimg.cn/20181218112711795.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述">添加JAVA_HOME到Path中</p><p><img src="https://img-blog.csdnimg.cn/20181218112821321.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>测试：<br><img src="https://img-blog.csdnimg.cn/20181218113102778.png" alt="在这里插入图片描述">#### </p><h4 id="安装Maven-（略）参考"><a href="#安装Maven-（略）参考" class="headerlink" title="安装Maven （略）参考"></a>安装Maven （略）<a href="https://blog.csdn.net/cs4380/article/details/79158268" target="_blank" rel="noopener">参考</a></h4><h4 id="安装MySQL-（略）参考"><a href="#安装MySQL-（略）参考" class="headerlink" title="安装MySQL （略）参考"></a>安装MySQL （略）<a href="https://blog.csdn.net/weixin_40396510/article/details/79277731" target="_blank" rel="noopener">参考</a></h4><h4 id="安装Nginx"><a href="#安装Nginx" class="headerlink" title="安装Nginx"></a>安装Nginx</h4><p>参考的两篇文章<br><a href="https://www.cnblogs.com/edward2013/p/5506588.html" target="_blank" rel="noopener">Windows2012中安装Nginx并创建为Windows服务</a><br><a href="http://www.cnblogs.com/qianzf/p/6809427.html" target="_blank" rel="noopener">Windows下Nginx的启动、停止等命令</a><br>nginx.conf配置前后端分离（最底部的server）</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">events</span> &#123;</span><br><span class="line">    <span class="attribute">worker_connections</span>  <span class="number">1024</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">http</span> &#123;</span><br><span class="line">    <span class="attribute">include</span>       mime.types;</span><br><span class="line">    <span class="attribute">default_type</span>  application/octet-stream;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">keepalive_timeout</span>  <span class="number">65</span>;</span><br><span class="line"></span><br><span class="line">    <span class="section">server</span> &#123;</span><br><span class="line">        <span class="attribute">listen</span>       <span class="number">80</span>;</span><br><span class="line">        <span class="attribute">server_name</span>  localhost;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">location</span> / &#123;</span><br><span class="line">            <span class="attribute">root</span>   html;</span><br><span class="line">            <span class="attribute">index</span>  index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="attribute">error_page</span>   <span class="number">500</span> <span class="number">502</span> <span class="number">503</span> <span class="number">504</span>  /50x.html;</span><br><span class="line">        <span class="attribute">location</span> = /50x.html &#123;</span><br><span class="line">            <span class="attribute">root</span>   html;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"># 新增</span></span><br><span class="line">    <span class="section">server</span> &#123;</span><br><span class="line">        <span class="comment"># 监听9999端口，指向root所指的文件。</span></span><br><span class="line">        <span class="attribute">listen</span> <span class="number">9999</span>;</span><br><span class="line">        <span class="attribute">location</span> / &#123;</span><br><span class="line">            <span class="comment"># 前端Vue生成的dist文件地址</span></span><br><span class="line">            <span class="attribute">root</span> D:\workspace\WebStorm17\SUBWAY\subway2\dist;</span><br><span class="line">    <span class="attribute">index</span> index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line">         <span class="comment"># 前端访问的Api是http://127.0.0.1:18080/subway/...</span></span><br><span class="line">        <span class="attribute">location</span> /subway &#123;</span><br><span class="line">            <span class="attribute">proxy_pass</span> http://127.0.0.1:18080/;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>将Nginx设置为Windows服务</p><ol><li>需要借助”Windows Service Wrapper”小工具，项目地址： <a href="https://github.com/kohsuke/winsw" target="_blank" rel="noopener">https://github.com/kohsuke/winsw</a><br>下载地址： <a href="http://repo.jenkins-ci.org/releases/com/sun/winsw/winsw/1.18/winsw-1.18-bin.exe" target="_blank" rel="noopener">http://repo.jenkins-ci.org/releases/com/sun/winsw/winsw/1.18/winsw-1.18-bin.exe</a><br>下载该工具后，将其放在 Nginx安装目录下，并重命名为nginx-service.exe，创建配置文件nginx-service.xml（名字要和工具名一样），</li><li>nginx-service.xml</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">service</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span>&gt;</span>nginx<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>Nginx Service<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">description</span>&gt;</span>High Performance Nginx Service<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">logpath</span>&gt;</span>D:\xampp\nginx\logs<span class="tag">&lt;/<span class="name">logpath</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">log</span> <span class="attr">mode</span>=<span class="string">"roll-by-size"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sizeThreshold</span>&gt;</span>10240<span class="tag">&lt;/<span class="name">sizeThreshold</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">keepFiles</span>&gt;</span>8<span class="tag">&lt;/<span class="name">keepFiles</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">log</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">executable</span>&gt;</span>D:\develop\Java\nginx\nginx-1.12.2\nginx.exe<span class="tag">&lt;/<span class="name">executable</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">startarguments</span>&gt;</span>-p D:\develop\Java\nginx\nginx-1.12.2<span class="tag">&lt;/<span class="name">startarguments</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">stopexecutable</span>&gt;</span>D:\develop\Java\nginx\nginx-1.12.2\nginx.exe<span class="tag">&lt;/<span class="name">stopexecutable</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">stoparguments</span>&gt;</span>-p D:\develop\Java\nginx\nginx-1.12.2 -s stop<span class="tag">&lt;/<span class="name">stoparguments</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">service</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="3"><li>nginx-service.exe.config</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">startup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">supportedRuntime</span> <span class="attr">version</span>=<span class="string">"v2.0.50727"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">supportedRuntime</span> <span class="attr">version</span>=<span class="string">"v4.0"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">startup</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">runtime</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">generatePublisherEvidence</span> <span class="attr">enabled</span>=<span class="string">"false"</span>/&gt;</span> </span><br><span class="line">  <span class="tag">&lt;/<span class="name">runtime</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="4"><li>在cmd中运行如下命令安装windows服务</li></ol><figure class="highlight taggerscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">D:<span class="symbol">\d</span>evelop<span class="symbol">\J</span>ava<span class="symbol">\n</span>ginx<span class="symbol">\n</span>ginx-1.12.2<span class="symbol">\c</span>onf&gt;  D:<span class="symbol">\d</span>evelop<span class="symbol">\J</span>ava<span class="symbol">\n</span>ginx<span class="symbol">\n</span>ginx-1.12.2<span class="symbol">\n</span>ginx-service.exe install</span><br></pre></td></tr></table></figure><p>启动nginx</p><figure class="highlight taggerscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">D:<span class="symbol">\d</span>evelop<span class="symbol">\J</span>ava<span class="symbol">\n</span>ginx<span class="symbol">\n</span>ginx-1.12.2<span class="symbol">\c</span>onf&gt;  start nginx</span><br></pre></td></tr></table></figure><p>重启<br><figure class="highlight taggerscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">D:<span class="symbol">\d</span>evelop<span class="symbol">\J</span>ava<span class="symbol">\n</span>ginx<span class="symbol">\n</span>ginx-1.12.2<span class="symbol">\c</span>onf&gt;  nginx.exe -s reload</span><br></pre></td></tr></table></figure></p><p>验证：打开浏览器输入</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">http:</span><span class="comment">//127.0.0.1</span></span><br></pre></td></tr></table></figure><p>默认nginx端口是80，如果启动失败，请修改nginx.conf中的监听端口为其他1000-65535之间的数</p><p><img src="https://img-blog.csdnimg.cn/20181218114705594.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h4 id="安装-Node-下载传送门"><a href="#安装-Node-下载传送门" class="headerlink" title="安装 Node 下载传送门"></a>安装 Node <a href="https://nodejs.org/dist/v10.14.2/node-v10.14.2-x64.msi" target="_blank" rel="noopener">下载传送门</a></h4><p>按照安装步骤安装即可！<br>检查node和npm是否安装成功</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\Administrator&gt; <span class="keyword">node</span> <span class="title">-v</span></span><br><span class="line">v7.<span class="number">6.0</span></span><br><span class="line"></span><br><span class="line">C:\Users\Administrator&gt;npm -v</span><br><span class="line"><span class="number">4.1</span>.<span class="number">2</span></span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20181218125512859.png" alt="在这里插入图片描述"></p><h4 id="安装cnpm"><a href="#安装cnpm" class="headerlink" title="安装cnpm"></a>安装cnpm</h4><p><a href="https://blog.csdn.net/u011342720/article/details/81267908" target="_blank" rel="noopener">参考博客https://blog.csdn.net/u011342720/article/details/81267908</a></p><p>启动Vue项目</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;  cnpm install</span><br><span class="line"><span class="built_in">..</span>.</span><br><span class="line">&gt; npm <span class="builtin-name">run</span> dev</span><br><span class="line"><span class="built_in">..</span>.</span><br></pre></td></tr></table></figure><p>访问9999端口</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;环境搭建&quot;&gt;&lt;a href=&quot;#环境搭建&quot; class=&quot;headerlink&quot; title=&quot;环境搭建&quot;&gt;&lt;/a&gt;环境搭建&lt;/h3&gt;&lt;h4 id=&quot;后端：&quot;&gt;&lt;a href=&quot;#后端：&quot; class=&quot;headerlink&quot; title=&quot;后端：&quot;&gt;&lt;/a&gt;后端
      
    
    </summary>
    
      <category term="winsw" scheme="https://qijianguo.com/categories/winsw/"/>
    
    
      <category term="winsw" scheme="https://qijianguo.com/tags/winsw/"/>
    
  </entry>
  
  <entry>
    <title>IntelliJ IDEA插件（Java）</title>
    <link href="https://qijianguo.com/Idea/2019/04/17/IntelliJ%20IDEA%E6%8F%92%E4%BB%B6%EF%BC%88Java%EF%BC%89.html"/>
    <id>https://qijianguo.com/Idea/2019/04/17/IntelliJ IDEA插件（Java）.html</id>
    <published>2019-04-17T06:18:44.216Z</published>
    <updated>2019-04-17T07:45:24.586Z</updated>
    
    <content type="html"><![CDATA[<h4 id="Maven-Helper"><a href="#Maven-Helper" class="headerlink" title="Maven Helper"></a>Maven Helper</h4><p>使用参考博文：<a href="https://blog.csdn.net/fly910905/article/details/79416878" target="_blank" rel="noopener">https://blog.csdn.net/fly910905/article/details/79416878</a></p><h4 id="FindBugs-IDEA"><a href="#FindBugs-IDEA" class="headerlink" title="FindBugs-IDEA"></a>FindBugs-IDEA</h4><p>使用参考博文：<a href="https://www.cnblogs.com/adeng/p/7154636.html" target="_blank" rel="noopener">https://www.cnblogs.com/adeng/p/7154636.html</a></p><h4 id="CheckStyle-IDEA"><a href="#CheckStyle-IDEA" class="headerlink" title="CheckStyle-IDEA"></a>CheckStyle-IDEA</h4><p>使用参考博文：<a href="http://www.cnblogs.com/zhaopengcheng/p/7016147.html" target="_blank" rel="noopener">http://www.cnblogs.com/zhaopengcheng/p/7016147.html</a></p><h4 id="Ali-CodeAnalysis"><a href="#Ali-CodeAnalysis" class="headerlink" title="Ali-CodeAnalysis"></a>Ali-CodeAnalysis</h4><p>使用参考博文：<a href="http://www.cnblogs.com/cnndevelop/p/7698032.html" target="_blank" rel="noopener">http://www.cnblogs.com/cnndevelop/p/7698032.html</a></p><h4 id="GsonFormat"><a href="#GsonFormat" class="headerlink" title="GsonFormat"></a>GsonFormat</h4><p>使用参考博文：<a href="https://www.cnblogs.com/1024zy/p/6370305.html" target="_blank" rel="noopener">https://www.cnblogs.com/1024zy/p/6370305.html</a></p><h4 id="Jrebel"><a href="#Jrebel" class="headerlink" title="Jrebel"></a>Jrebel</h4><p>激活参考博文：<a href="https://blog.csdn.net/xingbaozhen1210/article/details/81093041" target="_blank" rel="noopener">https://blog.csdn.net/xingbaozhen1210/article/details/81093041</a></p><h4 id="AceJump"><a href="#AceJump" class="headerlink" title="AceJump"></a>AceJump</h4><p>使用参考博文：<a href="https://blog.csdn.net/sunny243788557/article/details/52325444（比较全面）" target="_blank" rel="noopener">https://blog.csdn.net/sunny243788557/article/details/52325444（比较全面）</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h4 id=&quot;Maven-Helper&quot;&gt;&lt;a href=&quot;#Maven-Helper&quot; class=&quot;headerlink&quot; title=&quot;Maven Helper&quot;&gt;&lt;/a&gt;Maven Helper&lt;/h4&gt;&lt;p&gt;使用参考博文：&lt;a href=&quot;https://blog.c
      
    
    </summary>
    
      <category term="Idea" scheme="https://qijianguo.com/categories/Idea/"/>
    
    
      <category term="idea" scheme="https://qijianguo.com/tags/idea/"/>
    
  </entry>
  
  <entry>
    <title>Java Random seed伪随机</title>
    <link href="https://qijianguo.com/Java/2019/04/17/Java%20Random%20seed%E4%BC%AA%E9%9A%8F%E6%9C%BA.html"/>
    <id>https://qijianguo.com/Java/2019/04/17/Java Random seed伪随机.html</id>
    <published>2019-04-17T06:18:44.212Z</published>
    <updated>2019-04-17T07:45:25.866Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>在指定区间内获得随机数，随机的几种方式。</p></blockquote><p>方法：</p><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 在指定区间[min,max)通过种子seed设置伪随机数</span></span><br><span class="line"><span class="comment"> * @param min 最小值</span></span><br><span class="line"><span class="comment"> * @param max 最大值</span></span><br><span class="line"><span class="comment"> * @param seed 种子</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="built_in">random</span>(<span class="built_in">int</span> <span class="built_in">min</span>, <span class="built_in">int</span> <span class="built_in">max</span>, <span class="keyword">long</span> seed) &#123;</span><br><span class="line">Random <span class="built_in">random</span> = <span class="keyword">new</span> Random(seed);</span><br><span class="line"><span class="keyword">final</span> <span class="built_in">int</span> <span class="built_in">size</span> = <span class="number">100</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="built_in">size</span> ; i++) &#123;</span><br><span class="line"><span class="built_in">int</span> randomNum = <span class="built_in">random</span>.nextInt(<span class="built_in">max</span>);</span><br><span class="line"><span class="keyword">if</span> (randomNum &gt; <span class="built_in">min</span> &amp;&amp; randomNum &lt; <span class="built_in">max</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> randomNum;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 确保生成随机数。</span></span><br><span class="line"><span class="keyword">return</span> <span class="built_in">random</span>(<span class="built_in">min</span>, <span class="built_in">max</span>, send + <span class="built_in">size</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> 测试：</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main(<span class="keyword">String</span>[] args) &#123;</span><br><span class="line"><span class="built_in">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">3</span>; j++) &#123;</span><br><span class="line">System.out.<span class="built_in">println</span>(<span class="keyword">String</span>.format(<span class="string">"第%d遍"</span>, j));</span><br><span class="line"><span class="built_in">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">System.out.<span class="built_in">print</span>(<span class="built_in">random</span>(<span class="number">0</span>,<span class="number">100</span>, i) + <span class="string">""</span>);</span><br><span class="line">&#125;</span><br><span class="line">System.out.<span class="built_in">println</span>();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>结果：<br><img src="https://img-blog.csdnimg.cn/20181219095438137.png" alt="在这里插入图片描述"></p><p>Apache.commons.lang3包中也有RandomUtils生成随机数， 一般的需求足够了。但是没法加seed，无法生成可控的随机数！<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">--</span> <span class="attr">org.apache.commons.lang3</span> <span class="attr">--</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.commons<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-lang3<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.8.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>方法：<br><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="built_in">random</span>(<span class="keyword">int</span> <span class="built_in">min</span>, <span class="keyword">int</span> <span class="built_in">max</span>)  &#123;</span><br><span class="line"><span class="built_in">return</span> RandomUtils.nextInt(<span class="built_in">min</span>, <span class="built_in">max</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>测试：</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main(<span class="keyword">String</span>[] args) &#123;</span><br><span class="line"><span class="built_in">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">3</span>; j++) &#123;</span><br><span class="line">System.out.<span class="built_in">println</span>(<span class="keyword">String</span>.format(<span class="string">"第%d遍"</span>, j));</span><br><span class="line"><span class="built_in">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">System.out.<span class="built_in">print</span>(RandomUtils.nextInt(<span class="number">0</span>,<span class="number">100</span>) + <span class="string">""</span>);</span><br><span class="line">&#125;</span><br><span class="line">System.out.<span class="built_in">println</span>();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20181219100330868.png" alt="在这里插入图片描述"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;在指定区间内获得随机数，随机的几种方式。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;方法：&lt;/p&gt;
&lt;figure class=&quot;highlight processing&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;s
      
    
    </summary>
    
      <category term="Java" scheme="https://qijianguo.com/categories/Java/"/>
    
    
      <category term="java,random" scheme="https://qijianguo.com/tags/java-random/"/>
    
  </entry>
  
  <entry>
    <title>Netty中的ChannelHandler</title>
    <link href="https://qijianguo.com/Netty/2019/04/17/Netty%E4%B8%AD%E7%9A%84ChannelHandler.html"/>
    <id>https://qijianguo.com/Netty/2019/04/17/Netty中的ChannelHandler.html</id>
    <published>2019-04-17T06:18:44.209Z</published>
    <updated>2019-04-17T07:46:33.563Z</updated>
    
    <content type="html"><![CDATA[<h4 id="FixedLengthFrameDecoder"><a href="#FixedLengthFrameDecoder" class="headerlink" title="FixedLengthFrameDecoder"></a>FixedLengthFrameDecoder</h4><blockquote><p>数据包长度固定，解决拆包粘包<br>例如：一个modbus协议， 指令为如下，有 <strong><em>12个</em></strong> 字节<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"> <span class="number">00</span> <span class="number">00</span>   <span class="number">00</span> <span class="number">00</span>   <span class="number">00</span> <span class="number">06</span>     FF      <span class="number">03</span>    <span class="number">00</span> <span class="number">01</span>     <span class="number">00</span> <span class="number">00</span></span><br><span class="line">| 事务 |协议标识| 长度 | 单元标识 |功能码|起始地址|寄存器地址|</span><br></pre></td></tr></table></figure></p></blockquote><p>使用：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">channel</span><span class="selector-class">.pipeline</span>()<span class="selector-class">.addLast</span>(<span class="selector-tag">new</span> <span class="selector-tag">FixedLengthFrameDecoder</span>(<span class="selector-tag">frameLength</span>));</span><br></pre></td></tr></table></figure><h4 id="ReadTimeoutHandler"><a href="#ReadTimeoutHandler" class="headerlink" title="ReadTimeoutHandler"></a>ReadTimeoutHandler</h4><blockquote><p>读取数据超时处理, tcp长连接中常用</p></blockquote><p>使用：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> timeoutSeconds = <span class="number">10</span>;</span><br><span class="line">channel.pipeline().addLast(<span class="string">"readtime"</span>,<span class="keyword">new</span> ReadTimeoutHandler(timeoutSeconds));</span><br></pre></td></tr></table></figure><h4 id="JsonObjectDecoder"><a href="#JsonObjectDecoder" class="headerlink" title="JsonObjectDecoder"></a>JsonObjectDecoder</h4><blockquote><p>JSON格式的数据包，解决拆包粘包问题</p></blockquote><p>使用：</p><ol><li><p>不带构造方法的，数据包大小为 1048576 字节 = 1M。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">channel</span><span class="selector-class">.pipeline</span>()<span class="selector-class">.addLast</span>(<span class="selector-tag">new</span> <span class="selector-tag">JsonObjectDecoder</span>());</span><br></pre></td></tr></table></figure></li><li><p>如果JSON文件较大，比如包含多张Base64的图片，那么用无参构造就会出现收不到数据的情况，此时需要用有参构造</p></li></ol><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// JSON文件最大为10M</span></span><br><span class="line">channel.pipeline().addLast(<span class="keyword">new</span> <span class="type">JsonObjectDecoder</span>(<span class="number">1048576</span> * <span class="number">10</span>));</span><br></pre></td></tr></table></figure><p>pom.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.netty<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>netty-all<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>4.1.30.Final<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h4 id=&quot;FixedLengthFrameDecoder&quot;&gt;&lt;a href=&quot;#FixedLengthFrameDecoder&quot; class=&quot;headerlink&quot; title=&quot;FixedLengthFrameDecoder&quot;&gt;&lt;/a&gt;FixedLengthFrameD
      
    
    </summary>
    
      <category term="Netty" scheme="https://qijianguo.com/categories/Netty/"/>
    
    
      <category term="netty" scheme="https://qijianguo.com/tags/netty/"/>
    
  </entry>
  
  <entry>
    <title>Vim 操作（一）</title>
    <link href="https://qijianguo.com/Vim/2019/04/17/Vim%20%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%80%EF%BC%89.html"/>
    <id>https://qijianguo.com/Vim/2019/04/17/Vim 操作（一）.html</id>
    <published>2019-04-17T06:18:44.206Z</published>
    <updated>2019-04-17T07:47:18.643Z</updated>
    
    <content type="html"><![CDATA[<h5 id="上下左右"><a href="#上下左右" class="headerlink" title="上下左右"></a>上下左右</h5><blockquote><pre><code>左 h     下 j    上 k    右 l</code></pre></blockquote><hr><h4 id="翻页"><a href="#翻页" class="headerlink" title="翻页"></a>翻页</h4><blockquote><p>向下翻一页：ctrl  f<br>想下翻半页：ctrl  d<br>向上翻一页：ctrl  b<br>向上翻半页：ctrl  u</p></blockquote><h4 id="移动光标"><a href="#移动光标" class="headerlink" title="移动光标"></a>移动光标</h4><blockquote><p>w 移到下一个单词的开始<br>W 移到下一个单词的开始（以空格区分是否到上一个单词）</p></blockquote><blockquote><p>b 移到上一个单词的开始<br>B  移到上一个单词的开始（以空格区分是否到上一个单词）</p></blockquote><blockquote><p>0(零）移到行首<br>$ 移到到行末<br>^ 移动到当前行的第一个非空字符处（如果该行首没有空格，那么效果与0是一样的）<br>g_：移动到当前行的最后一个非空格字符处</p></blockquote><h4 id="插入、追加字符"><a href="#插入、追加字符" class="headerlink" title="插入、追加字符"></a>插入、追加字符</h4><blockquote><p>i 当前光标处插入字符<br>o 当前行下面插入新的一行<br>O 当前行上面插入新的一行<br>a 在当前光标后追加字符<br>R  替换当前光标位置的字符<br>:r file 把文件file的内容插入到当前行的下一行<br>:r! command：把command返回的结果插入到当前行的下一行</p></blockquote><h4 id="拷贝一个单词、行首、行尾、整行"><a href="#拷贝一个单词、行首、行尾、整行" class="headerlink" title="拷贝一个单词、行首、行尾、整行"></a>拷贝一个单词、行首、行尾、整行</h4><blockquote><p>yw 拷贝光标所在的单词<br>y0 拷贝光标到行首的内容<br>y$ 拷贝光标到行末的内容<br>yy 拷贝当前行<br>nyy 拷贝从当前行到n行的内容</p></blockquote><h4 id="删除一个单词，行首、行尾、整行"><a href="#删除一个单词，行首、行尾、整行" class="headerlink" title="删除一个单词，行首、行尾、整行"></a>删除一个单词，行首、行尾、整行</h4><blockquote><p>x 删除光标后的字符<br>dw 删除光标处的一个单词<br>d0：删除光标处到行首的字符<br>d$：删除光标处到行尾的字符<br>dd：删除整行<br>ndd：删除n行（同样n代表数字）   </p></blockquote><h4 id="移动到某一行"><a href="#移动到某一行" class="headerlink" title="移动到某一行"></a>移动到某一行</h4><blockquote><p>G 移动到最后一行<br>nG 移动到n行</p></blockquote><h4 id="搜索"><a href="#搜索" class="headerlink" title="搜索"></a>搜索</h4><blockquote><p>? 向上搜索<br>/ 想下搜索<br>n 跳到下一个搜索结果<br>：set ignorecase 忽略大小写<br>：set hlsearch</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h5 id=&quot;上下左右&quot;&gt;&lt;a href=&quot;#上下左右&quot; class=&quot;headerlink&quot; title=&quot;上下左右&quot;&gt;&lt;/a&gt;上下左右&lt;/h5&gt;&lt;blockquote&gt;
&lt;pre&gt;&lt;code&gt;左 h     下 j    上 k    右 l
&lt;/code&gt;&lt;/pre&gt;&lt;/
      
    
    </summary>
    
      <category term="Vim" scheme="https://qijianguo.com/categories/Vim/"/>
    
    
      <category term="vim" scheme="https://qijianguo.com/tags/vim/"/>
    
  </entry>
  
  <entry>
    <title>Vim 操作（二）</title>
    <link href="https://qijianguo.com/Vim/2019/04/17/Vim%20%E6%93%8D%E4%BD%9C%EF%BC%88%E4%BA%8C%EF%BC%89.html"/>
    <id>https://qijianguo.com/Vim/2019/04/17/Vim 操作（二）.html</id>
    <published>2019-04-17T06:18:44.203Z</published>
    <updated>2019-04-17T07:47:14.119Z</updated>
    
    <content type="html"><![CDATA[<h4 id="操作多文件"><a href="#操作多文件" class="headerlink" title="操作多文件"></a>操作多文件</h4><blockquote><p>vi 1.txt  2.txt  3.txt 同时打开或创建多个文件<br>:next 切换到下一个文件<br>:previous 切换到上一个文件<br>:last 切换到最后一个文件<br>:first 切换到第一个文件<br>:wnext 保存并切换到下一个文件<br>:wprevious 保存并切换到上一个文件<br>:hide e file 切换到file文件，当完成操作wq后按entry会切换回来</p></blockquote><h4 id="保存"><a href="#保存" class="headerlink" title="保存"></a>保存</h4><blockquote><p>:w file 将修改后的文件另存为file2，源文件内容不更改<br>:20,$w file 将文件20行到末尾的另存为file<br>:.,20w file 将文件20行之前的内容另存为file<br>:1,2w file 将1,2行的内容另存为file</p></blockquote><h4 id="拷贝"><a href="#拷贝" class="headerlink" title="拷贝"></a>拷贝</h4><blockquote><p>:r file 将file文件内容拷贝到当前光标的下一行<br>:3r file 将file文件内容拷贝到当前文件第三行的下一行<br>:$r file 将file文件内容拷贝到当前文件的行尾<br>:0r file 将file文件内容拷贝到当前文件的行首<br>:/parttern/r filename ：还可以使用正则表达式，插入到匹配出的后面一行，需要注意的是如果有多处匹配，它只插入到首个匹配</p></blockquote><h4 id="模版-ab"><a href="#模版-ab" class="headerlink" title="模版 ab"></a>模版 ab</h4><blockquote><p>ab  attr  phrase </p><blockquote><p>例如： <strong>:ab psvm public static void main(String[] args) {}</strong> </p></blockquote><p>ab 列出所有的模版</p></blockquote><h4 id="模版map"><a href="#模版map" class="headerlink" title="模版map"></a>模版map</h4>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h4 id=&quot;操作多文件&quot;&gt;&lt;a href=&quot;#操作多文件&quot; class=&quot;headerlink&quot; title=&quot;操作多文件&quot;&gt;&lt;/a&gt;操作多文件&lt;/h4&gt;&lt;blockquote&gt;
&lt;p&gt;vi 1.txt  2.txt  3.txt 同时打开或创建多个文件&lt;br&gt;:next 切
      
    
    </summary>
    
      <category term="Vim" scheme="https://qijianguo.com/categories/Vim/"/>
    
    
      <category term="vim" scheme="https://qijianguo.com/tags/vim/"/>
    
  </entry>
  
  <entry>
    <title>No accelerator found - failed to create HAX VM</title>
    <link href="https://qijianguo.com/Java/2019/04/17/No%20accelerator%20found%20-%20failed%20to%20create%20HAX%20VM.html"/>
    <id>https://qijianguo.com/Java/2019/04/17/No accelerator found - failed to create HAX VM.html</id>
    <published>2019-04-17T06:18:44.199Z</published>
    <updated>2019-04-17T07:46:44.801Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="number">13</span>:<span class="number">56</span>Executing tasks: [:app:assembleDebug]</span><br><span class="line"></span><br><span class="line"><span class="number">13</span>:<span class="number">56</span>Emulator: Incompatible HAX module version <span class="number">3</span>,requires minimum version <span class="number">4</span></span><br><span class="line"></span><br><span class="line"><span class="number">13</span>:<span class="number">56</span>Emulator: No accelerator found.</span><br><span class="line"></span><br><span class="line"><span class="number">13</span>:<span class="number">56</span>Emulator: D:\develop\android\android-sdk-windows\emulator\qemu\windows-x86_64\qemu-system-i386.exe: failed to initialize HAX: Invalid argument</span><br><span class="line"></span><br><span class="line"><span class="number">13</span>:<span class="number">56</span>Emulator: Process finished with <span class="keyword">exit</span> code <span class="number">0</span></span><br></pre></td></tr></table></figure><p>完美解决：<br><img src="https://img-blog.csdnimg.cn/20190108140759101.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><p>参考：<a href="https://stackoverflow.com/questions/39087532/no-accelerator-found-failed-to-create-hax-vm" target="_blank" rel="noopener">https://stackoverflow.com/questions/39087532/no-accelerator-found-failed-to-create-hax-vm</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;highlight awk&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;
      
    
    </summary>
    
      <category term="Java" scheme="https://qijianguo.com/categories/Java/"/>
    
    
      <category term="java" scheme="https://qijianguo.com/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>Android技术分享</title>
    <link href="https://qijianguo.com/Android/2019/04/17/Android%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB.html"/>
    <id>https://qijianguo.com/Android/2019/04/17/Android技术分享.html</id>
    <published>2019-04-17T06:18:44.196Z</published>
    <updated>2019-04-17T07:44:25.020Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Android入门实践"><a href="#Android入门实践" class="headerlink" title="Android入门实践"></a>Android入门实践</h2><h4 id="什么是Android"><a href="#什么是Android" class="headerlink" title="什么是Android"></a>什么是Android</h4><blockquote><p>Android是基于Linux内核开发、主要以Java为开发语言的一个开源的操作系统，主要用于移动设备，如智能手机和平板电脑、可穿戴设备等，当然还有更多的领域使用到了Android系统，例如电视、机顶盒等<br><a href="https://www.cnblogs.com/hejing-swust/articles/7821968.html" target="_blank" rel="noopener">为什么选用Linux内核</a></p></blockquote><h4 id="Android的历史"><a href="#Android的历史" class="headerlink" title="Android的历史"></a>Android的历史</h4><p>（这儿把红框内容做成一个图片，例如乔布斯图、Linux图、Java图）<br><img src="https://img-blog.csdnimg.cn/20190108173528186.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><strong> <a href="https://www.talkandroid.com/6793-steve-jobs-no-one-is-going-to-buy-a-big-phone/" target="_blank" rel="noopener">Steve Jobs – “No One Is Going To Buy A Big Phone”</a></strong> <a href="http://www.cnblogs.com/hoys/archive/2012/02/17/2356446.html" target="_blank" rel="noopener">Linux团队从Linux内核主线中除名</a><br>** Oracle起诉Google，称未取得授权。</p><blockquote><p>你可能看到今日辉煌的Android，移动操作系统市场90%的占有率，他的历史可谓是相当曲折、一言难尽的<br>关键字： 2003年、Andy Rubin、Linux内核、Java、 google、2007开源、2008发布第一个版本</p></blockquote><h4 id="Android的架构"><a href="#Android的架构" class="headerlink" title="Android的架构"></a>Android的架构</h4><p><img src="https://img-blog.csdnimg.cn/2019010817373248.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h4 id="Android版本"><a href="#Android版本" class="headerlink" title="Android版本"></a>Android版本</h4><p><a href="http://developer.android.com/abort/dashboards/" target="_blank" rel="noopener">http://developer.android.com/abort/dashboards/</a><br><img src="https://img-blog.csdnimg.cn/20190108174634497.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><a href="https://developer.android.com/about/dashboards/?hl=zh-cn" target="_blank" rel="noopener">统计</a></p><h4 id="Android系统提供了哪些东西给developer？"><a href="#Android系统提供了哪些东西给developer？" class="headerlink" title="Android系统提供了哪些东西给developer？"></a>Android系统提供了哪些东西给developer？</h4><h6 id="四大组件"><a href="#四大组件" class="headerlink" title="四大组件"></a>四大组件</h6><ul><li>Activity 活动<blockquote></blockquote></li><li>Service服务<blockquote><p>塞班挂QQ，IOS和Windows Phone期初是不支持后台运行的，后来慢慢的认识到其重要性所以后台慢慢加入了，而安卓从一开始就支持后台功能，既使应用程序在关闭的情况下也会在后台运行。</p></blockquote></li><li>Broadcast Receiver广播接收器<blockquote></blockquote></li><li>内容提供器<blockquote><p>用于在不同的程序之间共享数据，即将一些数据共享给他应用，这些数据是一些可以进行二次开发的基础数据，例如：电话簿、短信、多媒体等的数据，他们都实现了跨程序数据共享的功能</p></blockquote><h5 id="丰富的系统组件"><a href="#丰富的系统组件" class="headerlink" title="丰富的系统组件"></a>丰富的系统组件</h5><blockquote><p>Android为开发者提供了丰富的系统组件，可以帮助开发者设计出漂亮的界面，当然，随着也可以定制属于自己的控件。</p></blockquote><h4 id="SQLite-数据库"><a href="#SQLite-数据库" class="headerlink" title="SQLite 数据库"></a>SQLite 数据库</h4><blockquote><p>Andrid 自带的数据库，支持SQL语法，也有封装好的API，存储和读取非常方便。（在这加代码，记住用户名和密码）</p></blockquote></li></ul><h4 id="强大的多媒体"><a href="#强大的多媒体" class="headerlink" title="强大的多媒体"></a>强大的多媒体</h4><blockquote><p>音乐、视频、录音、拍照等，可以用代码进行控制。<br>连接真机。<br>通知</p></blockquote><h4 id="地理位置定位"><a href="#地理位置定位" class="headerlink" title="地理位置定位"></a>地理位置定位</h4><blockquote><p>移动设备相对于PC，地理定位功能应该可以算是一个很大的亮点，结合强大的地图功能，<a href="https://baike.baidu.com/item/LBS/1742?fr=aladdin" target="_blank" rel="noopener">LBS</a> 这一领域潜力非常大。例如外卖、打车、团购、社交、侦查等。</p></blockquote><h4 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h4><ol><li>挑选一个顺手的开发工具。开发工具有Eclipse和Android Studio，Android项目早期是用Eclipse开发的，需要安装很多插件，开发Android需要安装ADT。而Android Studio是基于Intellij IDEA开发的，插件安装非常简单，还集成了很多工具。比较推荐<a href="https://developer.android.google.cn/studio/" target="_blank" rel="noopener">Android Studio</a></li><li><a href="https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html" target="_blank" rel="noopener">JDK</a>：Java开发工具包</li><li><a href="https://blog.csdn.net/zzy1078689276/article/details/80380118#sdk%E5%8F%8A%E5%85%B6%E7%9B%B8%E5%85%B3%E8%B5%84%E6%BA%90%E7%9A%84%E4%B8%8B%E8%BD%BD%E5%9C%B0%E5%9D%80" target="_blank" rel="noopener">Android SDK</a>：谷歌提供的Android开发工具包。在开发时我们需要引入该工具包来使用相关API</li></ol><h2 id="Hello-World"><a href="#Hello-World" class="headerlink" title="Hello World"></a>Hello World</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"Hello,World!\n"</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>开始Hello World之路</p><ul><li>分析Hello World案例</li><li>项目结构分析</li><li>Android Studio使用</li></ul><h2 id="详细介绍"><a href="#详细介绍" class="headerlink" title="详细介绍"></a>详细介绍</h2><h4 id="UI开发"><a href="#UI开发" class="headerlink" title="UI开发"></a>UI开发</h4><ol><li>如何编写程序界面</li><li>常用控件的使用<br>2.1 TextView<br>2.2 Button<br>2.3 EditView<br>2.4 ImageView<br>2.5 ListView<br>2.6 …</li><li>4种基本布局<br>3.1 线性<br>3.2 相对<br>3.3 帧布局<br>3.4 百分比布局</li></ol><p>####0【‘<br> Activity</p><ol><li>TextView 、Button、EditText、Spinner、LinearLayout、自定义View等</li><li>活动的生命周期</li><li>活动间的信息传递</li></ol><h4 id="Boardcast"><a href="#Boardcast" class="headerlink" title="Boardcast"></a>Boardcast</h4><ol><li>静态活动</li><li>动态活动</li><li>自定义活动</li></ol><h4 id="Content-Provider"><a href="#Content-Provider" class="headerlink" title="Content Provider"></a>Content Provider</h4><h4 id="Service"><a href="#Service" class="headerlink" title="Service"></a>Service</h4><h4 id="网络"><a href="#网络" class="headerlink" title="网络"></a>网络</h4><ul><li>子线程<blockquote><p>将耗时的操作放到子线程中去，这里就需要用到java的多线程操作</p></blockquote></li><li>更新UI<blockquote><p>不允许在子线程中更新UI，因为UI是线程不安全的，必须在主线程中更新，否则会异常。</p></blockquote></li><li>异步消息处理机制<br><img src="https://img-blog.csdnimg.cn/20190109151332630.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></li><li>AsyncTask</li></ul><p>#### </p><h4 id="权限"><a href="#权限" class="headerlink" title="权限"></a>权限</h4><p><a href="http://developer.android.com/reference/android/Manifest.permission.html" target="_blank" rel="noopener">http://developer.android.com/reference/android/Manifest.permission.html</a></p><h2 id="应用上线"><a href="#应用上线" class="headerlink" title="应用上线"></a>应用上线</h2><p>Android系统要求所有的应用软件必须有一个签名文件，直接通过AS运行程序会使用一个默认的签名文件(仅仅适用于开发阶段)<br><img src="https://img-blog.csdnimg.cn/2019011814113460.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述">AS生成签名<br><img src="https://img-blog.csdnimg.cn/20190118141413206.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述">Gradle生成签名<br><img src="https://img-blog.csdnimg.cn/20190118141739246.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h2 id="分享"><a href="#分享" class="headerlink" title="分享"></a>分享</h2><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><h3 id="提问"><a href="#提问" class="headerlink" title="提问"></a>提问</h3><ul><li><a href="https://www.cnblogs.com/zhuwenlubin/p/5483046.html" target="_blank" rel="noopener">安卓为什么会越来越卡</a><br>超出了硬件的范畴，</li></ul><p>一方面：<br>IOS 是基于Unix的，而Unix不是开源的操作系统，iOS同样也没有开源。 iPhone之所以不会出现“越用越卡”的情况，是因为苹果公司对它的手机从硬件到软件拥有最高的管理权限，在封闭式的环境中，来自第三方的应用程序无法调用超过iPhone承受限度的指令，自然也不可能造成持续性的系统损伤。</p><p>而安卓是基于LInux，由于Linux核心设定应用在调取系统功能时一定要取得ROOT权限，这也导致大量应用因为单一功能的实现需求而获得整个ROOT层面的支配，可以在Android手机的任意储存位置进行读写，这种高自由度无异于开启了潘多拉魔盒，让Android手机无法对恶意App事先设防</p><p>另一方面：<br>一个是宏内核，一个是微内核，宏内核会把每个应用程序当成是系统自身的一部分，而微内核会将CPU分为几部分，当分配的CPU足够支撑应用时其他空闲CPU不会参与。房子的模型。。</p><p>如何解决：</p><ol><li>android在4.4后将应用程序的运行模式由Dalvik换成了ART，简单理解就是预编译。在安装的时候就编译成本地的机器码，减少了启动和运行中的时间</li><li>定制系统，例如小米的MIUI、华为的。。都是在Linux内核上打补丁。</li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Android入门实践&quot;&gt;&lt;a href=&quot;#Android入门实践&quot; class=&quot;headerlink&quot; title=&quot;Android入门实践&quot;&gt;&lt;/a&gt;Android入门实践&lt;/h2&gt;&lt;h4 id=&quot;什么是Android&quot;&gt;&lt;a href=&quot;#什么是Andr
      
    
    </summary>
    
      <category term="Android" scheme="https://qijianguo.com/categories/Android/"/>
    
    
      <category term="android" scheme="https://qijianguo.com/tags/android/"/>
    
  </entry>
  
  <entry>
    <title>JPA中的could not initialize proxy - no Session异常分析与解决</title>
    <link href="https://qijianguo.com/Java/2019/04/17/JPA%E4%B8%AD%E7%9A%84could%20not%20initialize%20proxy%20-%20no%20Session%E5%BC%82%E5%B8%B8%E5%88%86%E6%9E%90%E4%B8%8E%E8%A7%A3%E5%86%B3.html"/>
    <id>https://qijianguo.com/Java/2019/04/17/JPA中的could not initialize proxy - no Session异常分析与解决.html</id>
    <published>2019-04-17T06:18:44.193Z</published>
    <updated>2019-04-17T07:45:47.830Z</updated>
    
    <content type="html"><![CDATA[<p>转载自：<a href="https://blog.csdn.net/blueheart20/article/details/52912023" target="_blank" rel="noopener">https://blog.csdn.net/blueheart20/article/details/52912023</a></p><p>引言： JPA是一种非常流行和常用的持久化框架标准，其下可以对接若干种不同的实现，在不同的父子表管理中，经常会碰到no Session的问题，该如何解决呢？</p><ol><li><p>问题的引出</p><p>在进行基于JPA的单元测试中，我们使用JUnit来进行测试数据库的关联表信息读取，结果得到如下错误信息：</p></li></ol><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">org<span class="selector-class">.hibernate</span><span class="selector-class">.LazyInitializationException</span>: failed to lazily initialize <span class="selector-tag">a</span> collection of role: com<span class="selector-class">.rain</span><span class="selector-class">.wx</span><span class="selector-class">.meal</span><span class="selector-class">.model</span><span class="selector-class">.DishCategory</span><span class="selector-class">.dishes</span>, could not initialize proxy - no Session</span><br><span class="line">at org<span class="selector-class">.hibernate</span><span class="selector-class">.collection</span><span class="selector-class">.internal</span><span class="selector-class">.AbstractPersistentCollection</span><span class="selector-class">.throwLazyInitializationException</span>(AbstractPersistentCollection<span class="selector-class">.java</span>:<span class="number">587</span>)</span><br><span class="line">at org<span class="selector-class">.hibernate</span><span class="selector-class">.collection</span><span class="selector-class">.internal</span><span class="selector-class">.AbstractPersistentCollection</span><span class="selector-class">.withTemporarySessionIfNeeded</span>(AbstractPersistentCollection<span class="selector-class">.java</span>:<span class="number">204</span>)</span><br><span class="line">at org<span class="selector-class">.hibernate</span><span class="selector-class">.collection</span><span class="selector-class">.internal</span><span class="selector-class">.AbstractPersistentCollection</span><span class="selector-class">.initialize</span>(AbstractPersistentCollection<span class="selector-class">.java</span>:<span class="number">566</span>)</span><br><span class="line">at org<span class="selector-class">.hibernate</span><span class="selector-class">.collection</span><span class="selector-class">.internal</span><span class="selector-class">.AbstractPersistentCollection</span><span class="selector-class">.read</span>(AbstractPersistentCollection<span class="selector-class">.java</span>:<span class="number">135</span>)</span><br><span class="line">at org<span class="selector-class">.hibernate</span><span class="selector-class">.collection</span><span class="selector-class">.internal</span><span class="selector-class">.PersistentBag</span><span class="selector-class">.get</span>(PersistentBag<span class="selector-class">.java</span>:<span class="number">449</span>)</span><br><span class="line">at com<span class="selector-class">.rain</span><span class="selector-class">.wx</span><span class="selector-class">.meal</span><span class="selector-class">.service</span><span class="selector-class">.DishServiceTest</span><span class="selector-class">.testDishes</span>(DishServiceTest<span class="selector-class">.java</span>:<span class="number">86</span>)</span><br><span class="line">at sun<span class="selector-class">.reflect</span><span class="selector-class">.NativeMethodAccessorImpl</span><span class="selector-class">.invoke0</span>(Native Method)</span><br><span class="line">at sun<span class="selector-class">.reflect</span><span class="selector-class">.NativeMethodAccessorImpl</span><span class="selector-class">.invoke</span>(NativeMethodAccessorImpl<span class="selector-class">.java</span>:<span class="number">62</span>)</span><br><span class="line">at sun<span class="selector-class">.reflect</span><span class="selector-class">.DelegatingMethodAccessorImpl</span><span class="selector-class">.invoke</span>(DelegatingMethodAccessorImpl<span class="selector-class">.java</span>:<span class="number">43</span>)</span><br><span class="line">at java<span class="selector-class">.lang</span><span class="selector-class">.reflect</span><span class="selector-class">.Method</span><span class="selector-class">.invoke</span>(Method<span class="selector-class">.java</span>:<span class="number">497</span>)</span><br><span class="line">at org<span class="selector-class">.junit</span><span class="selector-class">.runners</span><span class="selector-class">.model</span><span class="selector-class">.FrameworkMethod</span>$<span class="number">1</span>.runReflectiveCall(FrameworkMethod<span class="selector-class">.java</span>:<span class="number">50</span>)</span><br><span class="line">at org<span class="selector-class">.junit</span><span class="selector-class">.internal</span><span class="selector-class">.runners</span><span class="selector-class">.model</span><span class="selector-class">.ReflectiveCallable</span><span class="selector-class">.run</span>(ReflectiveCallable<span class="selector-class">.java</span>:<span class="number">12</span>)</span><br><span class="line">at org<span class="selector-class">.junit</span><span class="selector-class">.runners</span><span class="selector-class">.model</span><span class="selector-class">.FrameworkMethod</span><span class="selector-class">.invokeExplosively</span>(FrameworkMethod<span class="selector-class">.java</span>:<span class="number">47</span>)</span><br><span class="line">at org<span class="selector-class">.junit</span><span class="selector-class">.internal</span><span class="selector-class">.runners</span><span class="selector-class">.statements</span><span class="selector-class">.InvokeMethod</span><span class="selector-class">.evaluate</span>(InvokeMethod<span class="selector-class">.java</span>:<span class="number">17</span>)</span><br><span class="line">at org<span class="selector-class">.springframework</span><span class="selector-class">.test</span><span class="selector-class">.context</span><span class="selector-class">.junit4</span><span class="selector-class">.statements</span><span class="selector-class">.RunBeforeTestMethodCallbacks</span><span class="selector-class">.evaluate</span>(RunBeforeTestMethodCallbacks<span class="selector-class">.java</span>:<span class="number">75</span>)</span><br><span class="line">at org<span class="selector-class">.springframework</span><span class="selector-class">.test</span><span class="selector-class">.context</span><span class="selector-class">.junit4</span><span class="selector-class">.statements</span><span class="selector-class">.RunAfterTestMethodCallbacks</span><span class="selector-class">.evaluate</span>(RunAfterTestMethodCallbacks<span class="selector-class">.java</span>:<span class="number">86</span>)</span><br><span class="line">at org<span class="selector-class">.springframework</span><span class="selector-class">.test</span><span class="selector-class">.context</span><span class="selector-class">.junit4</span><span class="selector-class">.statements</span><span class="selector-class">.SpringRepeat</span><span class="selector-class">.evaluate</span>(SpringRepeat<span class="selector-class">.java</span>:<span class="number">84</span>)</span><br><span class="line">at org<span class="selector-class">.junit</span><span class="selector-class">.runners</span><span class="selector-class">.ParentRunner</span><span class="selector-class">.runLeaf</span>(ParentRunner<span class="selector-class">.java</span>:<span class="number">325</span>)</span><br><span class="line">at org<span class="selector-class">.springframework</span><span class="selector-class">.test</span><span class="selector-class">.context</span><span class="selector-class">.junit4</span><span class="selector-class">.SpringJUnit4ClassRunner</span><span class="selector-class">.runChild</span>(SpringJUnit4ClassRunner<span class="selector-class">.java</span>:<span class="number">252</span>)</span><br><span class="line">at org<span class="selector-class">.springframework</span><span class="selector-class">.test</span><span class="selector-class">.context</span><span class="selector-class">.junit4</span><span class="selector-class">.SpringJUnit4ClassRunner</span><span class="selector-class">.runChild</span>(SpringJUnit4ClassRunner<span class="selector-class">.java</span>:<span class="number">94</span>)</span><br><span class="line">at org<span class="selector-class">.junit</span><span class="selector-class">.runners</span><span class="selector-class">.ParentRunner</span>$<span class="number">3</span>.run(ParentRunner<span class="selector-class">.java</span>:<span class="number">290</span>)</span><br><span class="line">at org<span class="selector-class">.junit</span><span class="selector-class">.runners</span><span class="selector-class">.ParentRunner</span>$<span class="number">1</span>.schedule(ParentRunner<span class="selector-class">.java</span>:<span class="number">71</span>)</span><br><span class="line">at org<span class="selector-class">.junit</span><span class="selector-class">.runners</span><span class="selector-class">.ParentRunner</span><span class="selector-class">.runChildren</span>(ParentRunner<span class="selector-class">.java</span>:<span class="number">288</span>)</span><br><span class="line">at org<span class="selector-class">.junit</span><span class="selector-class">.runners</span><span class="selector-class">.ParentRunner</span><span class="selector-class">.access</span>$<span class="number">000</span>(ParentRunner<span class="selector-class">.java</span>:<span class="number">58</span>)</span><br><span class="line">at org<span class="selector-class">.junit</span><span class="selector-class">.runners</span><span class="selector-class">.ParentRunner</span>$<span class="number">2</span>.evaluate(ParentRunner<span class="selector-class">.java</span>:<span class="number">268</span>)</span><br><span class="line">at org<span class="selector-class">.springframework</span><span class="selector-class">.test</span><span class="selector-class">.context</span><span class="selector-class">.junit4</span><span class="selector-class">.statements</span><span class="selector-class">.RunBeforeTestClassCallbacks</span><span class="selector-class">.evaluate</span>(RunBeforeTestClassCallbacks<span class="selector-class">.java</span>:<span class="number">61</span>)</span><br><span class="line">at org<span class="selector-class">.springframework</span><span class="selector-class">.test</span><span class="selector-class">.context</span><span class="selector-class">.junit4</span><span class="selector-class">.statements</span><span class="selector-class">.RunAfterTestClassCallbacks</span><span class="selector-class">.evaluate</span>(RunAfterTestClassCallbacks<span class="selector-class">.java</span>:<span class="number">70</span>)</span><br><span class="line">at org<span class="selector-class">.junit</span><span class="selector-class">.runners</span><span class="selector-class">.ParentRunner</span><span class="selector-class">.run</span>(ParentRunner<span class="selector-class">.java</span>:<span class="number">363</span>)</span><br><span class="line">at org<span class="selector-class">.springframework</span><span class="selector-class">.test</span><span class="selector-class">.context</span><span class="selector-class">.junit4</span><span class="selector-class">.SpringJUnit4ClassRunner</span><span class="selector-class">.run</span>(SpringJUnit4ClassRunner<span class="selector-class">.java</span>:<span class="number">191</span>)</span><br><span class="line">at org<span class="selector-class">.eclipse</span><span class="selector-class">.jdt</span><span class="selector-class">.internal</span><span class="selector-class">.junit4</span><span class="selector-class">.runner</span><span class="selector-class">.JUnit4TestReference</span><span class="selector-class">.run</span>(JUnit4TestReference<span class="selector-class">.java</span>:<span class="number">86</span>)</span><br><span class="line">at org<span class="selector-class">.eclipse</span><span class="selector-class">.jdt</span><span class="selector-class">.internal</span><span class="selector-class">.junit</span><span class="selector-class">.runner</span><span class="selector-class">.TestExecution</span><span class="selector-class">.run</span>(TestExecution<span class="selector-class">.java</span>:<span class="number">38</span>)</span><br><span class="line">at org<span class="selector-class">.eclipse</span><span class="selector-class">.jdt</span><span class="selector-class">.internal</span><span class="selector-class">.junit</span><span class="selector-class">.runner</span><span class="selector-class">.RemoteTestRunner</span><span class="selector-class">.runTests</span>(RemoteTestRunner<span class="selector-class">.java</span>:<span class="number">459</span>)</span><br><span class="line">at org<span class="selector-class">.eclipse</span><span class="selector-class">.jdt</span><span class="selector-class">.internal</span><span class="selector-class">.junit</span><span class="selector-class">.runner</span><span class="selector-class">.RemoteTestRunner</span><span class="selector-class">.runTests</span>(RemoteTestRunner<span class="selector-class">.java</span>:<span class="number">678</span>)</span><br><span class="line">at org<span class="selector-class">.eclipse</span><span class="selector-class">.jdt</span><span class="selector-class">.internal</span><span class="selector-class">.junit</span><span class="selector-class">.runner</span><span class="selector-class">.RemoteTestRunner</span><span class="selector-class">.run</span>(RemoteTestRunner<span class="selector-class">.java</span>:<span class="number">382</span>)</span><br><span class="line">at org<span class="selector-class">.eclipse</span><span class="selector-class">.jdt</span><span class="selector-class">.internal</span><span class="selector-class">.junit</span><span class="selector-class">.runner</span><span class="selector-class">.RemoteTestRunner</span><span class="selector-class">.main</span>(RemoteTestRunner<span class="selector-class">.java</span>:<span class="number">192</span>)</span><br></pre></td></tr></table></figure><p>  经过分析，其中的关键词是： could not initialize proxy - no Session; 基于JPA的实现来分析，就是在进行数据库访问之时，当前针对数据库的访问与操作session已经关闭且释放了，故提示no Session可用。</p><ol start="2"><li><p>代码实现分析</p><p>让我们来看看具体的代码吧</p></li></ol><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Table</span>(name=<span class="string">"dish_category"</span>)</span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@EqualsAndHashCode</span>(callSuper=<span class="literal">false</span>)</span><br><span class="line"><span class="meta">@JsonRootName</span>(value=<span class="string">"category"</span>) </span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">DishCategory</span> <span class="keyword">extends</span> <span class="title">BaseEntity</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> static <span class="keyword">final</span> long serialVersionUID = <span class="number">-7189824224534351030</span>L;</span><br><span class="line"> </span><br><span class="line"><span class="meta">@Column</span></span><br><span class="line"><span class="keyword">private</span> <span class="type">String</span> name;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Column</span></span><br><span class="line"><span class="keyword">private</span> <span class="type">String</span> description;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@OneToMany</span></span><br><span class="line"><span class="meta">@JoinColumn</span>(name=<span class="string">"category_id"</span>,referencedColumnName=<span class="string">"id"</span>)</span><br><span class="line"><span class="keyword">private</span> <span class="type">List</span>&lt;<span class="type">MealDish</span>&gt; dishes;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> 另外一个实体Bean为MealDish, 其代码为：</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Table</span>(name = <span class="string">"dish"</span>)</span><br><span class="line"><span class="meta">@JsonRootName</span>(value=<span class="string">"dish"</span>) </span><br><span class="line"><span class="comment">//@Lazy(value=false)</span></span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">MealDish</span> <span class="keyword">extends</span> <span class="title">BaseEntity</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> static <span class="keyword">final</span> long serialVersionUID = <span class="number">-3982356728880195795</span>L;</span><br><span class="line"> </span><br><span class="line"><span class="meta">@Column</span></span><br><span class="line"><span class="keyword">private</span> <span class="type">String</span> name;</span><br><span class="line"> </span><br><span class="line"><span class="meta">@Column</span></span><br><span class="line"><span class="keyword">private</span> float price;</span><br><span class="line"> </span><br><span class="line"><span class="meta">@Column</span>(name = <span class="string">"img_url"</span>)</span><br><span class="line"><span class="keyword">private</span> <span class="type">String</span> imgUrl;</span><br><span class="line"> </span><br><span class="line"><span class="meta">@Column</span>(name=<span class="string">"category_id"</span>)</span><br><span class="line"><span class="keyword">private</span> long categoryId;</span><br><span class="line"> </span><br><span class="line"><span class="meta">@Column</span></span><br><span class="line"><span class="keyword">private</span> boolean active;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 销售数量</span></span><br><span class="line"><span class="meta">@Column</span></span><br><span class="line"><span class="keyword">private</span> int soldCount;</span><br><span class="line">        .......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>其中Repository/Service的代码分别如下：  </p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@Service</span></span><br><span class="line">public class DishServiceImpl implements DishService &#123; </span><br><span class="line">       <span class="variable">@Transactional</span></span><br><span class="line"><span class="variable">@Override</span></span><br><span class="line">public List&lt;DishCategory&gt; getDishCategory() &#123;</span><br><span class="line"><span class="selector-tag">return</span> <span class="selector-tag">this</span><span class="selector-class">.dishCategoryRepo</span><span class="selector-class">.findAll</span>();</span><br><span class="line">&#125;</span><br><span class="line">   ........</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>Repository相关的代码都是空代码，无实际的实现，这里再次忽略。</p><p>单元测试的代码内容：</p><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">   <span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">testDishes</span><span class="params">()</span> <span class="keyword">throws</span> JsonProcessingException </span>&#123;</span><br><span class="line">   ObjectMapper mapper = <span class="keyword">new</span> ObjectMapper();</span><br><span class="line">   </span><br><span class="line">   List&lt;DishCategory&gt; categories = <span class="keyword">this</span>.dishService.getDishCategory();</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">for</span> (DishCategory category  : categories) &#123;</span><br><span class="line">       <span class="comment">// log.debug(String.valueOf(category.getDishes().get(0)));</span></span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   String jsonStr = mapper.writeValueAsString(categories);</span><br><span class="line">   </span><br><span class="line">   log.info(jsonStr);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><ol start="3"><li><p>问题分析</p><p>基于对Hibernate和JPA的理解，在ORM中，其为了提升性能使用了Lazy加载，就是在使用的时候，才会加载额外的数据，故导致了在使用之时再加载数据之时， session失效的问题出现。所以问题的目标点实现提前加载数据。</p></li><li><p>问题的解决</p><p> 尝试1：  在Service方法中新增了@Transactional进行事务添加</p><p> 结果1：  无效</p><p>尝试2： 在@OneToMany的方法上，使用@Lazy(false)</p><p> 结果2：  无效</p><p> 尝试3： 在@OneToMany的参数中使用fetch=FetchType=Eager</p><p> 结果3:   问题解决</p><p> 尝试4： 在application.properties的配置文件中新增spring.jpa.open-in-view=true</p><p> 结果4： 问题解决</p><p>方法3的正确的代码内容：</p></li></ol><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Table</span>(name=<span class="string">"dish_category"</span>)</span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@EqualsAndHashCode</span>(callSuper=<span class="literal">false</span>)</span><br><span class="line"><span class="meta">@JsonRootName</span>(value=<span class="string">"category"</span>) </span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">DishCategory</span> <span class="keyword">extends</span> <span class="title">BaseEntity</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> static <span class="keyword">final</span> long serialVersionUID = <span class="number">-7189824224534351030</span>L;</span><br><span class="line"> </span><br><span class="line"><span class="meta">@Column</span></span><br><span class="line"><span class="keyword">private</span> <span class="type">String</span> name;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Column</span></span><br><span class="line"><span class="keyword">private</span> <span class="type">String</span> description;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@OneToMany</span>(fetch=<span class="type">FetchType</span>.<span class="type">EAGER</span>)</span><br><span class="line"><span class="meta">@JoinColumn</span>(name=<span class="string">"category_id"</span>,referencedColumnName=<span class="string">"id"</span>)</span><br><span class="line"><span class="keyword">private</span> <span class="type">List</span>&lt;<span class="type">MealDish</span>&gt; dishes;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>方法4的解释与说明：</p><p>   这个设置选项:</p><p>spring.jpa.open-in-view=true</p><p>  其实是之前的openEntityManagerInViewInterceptor，解决在Spring MVC与JPA之间Session的声明周期问题</p><ol start="5"><li><p>总结</p><p> 核心问题在于解决延迟加载为及时加载，及时加载会消耗一定的资源，将其程序的性能，请注意这个问题。</p></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;转载自：&lt;a href=&quot;https://blog.csdn.net/blueheart20/article/details/52912023&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://blog.csdn.net/blueheart20
      
    
    </summary>
    
      <category term="Java" scheme="https://qijianguo.com/categories/Java/"/>
    
    
      <category term="java" scheme="https://qijianguo.com/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>Springboot自定义分页工具类</title>
    <link href="https://qijianguo.com/SpringBoot/2019/04/17/Springbo%E8%87%AA%E5%AE%9A%E4%B9%89%E5%88%86%E9%A1%B5%E5%B7%A5%E5%85%B7%E7%B1%BB.html"/>
    <id>https://qijianguo.com/SpringBoot/2019/04/17/Springbo自定义分页工具类.html</id>
    <published>2019-04-17T06:18:44.191Z</published>
    <updated>2019-04-17T07:47:10.538Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight zephir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">import org.springframework.data.domain.Page;</span><br><span class="line">import org.springframework.data.domain.PageImpl;</span><br><span class="line">import org.springframework.data.domain.PageRequest;</span><br><span class="line"></span><br><span class="line">import java.util.<span class="keyword">List</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PageUtil</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 分页</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> list</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> page</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> pageSize</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &lt;T&gt;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; Page&lt;T&gt; page(<span class="keyword">List</span>&lt;T&gt; <span class="keyword">list</span>, <span class="keyword">int</span> page, <span class="keyword">int</span> pageSize) &#123;</span><br><span class="line">        <span class="keyword">int</span> totalElements = <span class="keyword">list</span>.size();</span><br><span class="line">        <span class="keyword">int</span> start = page * pageSize;</span><br><span class="line">        <span class="keyword">int</span> end = Math.min(start + pageSize, totalElements);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> PageImpl&lt;&gt;(<span class="keyword">list</span>.subList(start, end),</span><br><span class="line">                <span class="keyword">new</span> PageRequest(page, pageSize),</span><br><span class="line">                totalElements);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; Page&lt;T&gt; builidPage(<span class="keyword">List</span>&lt;T&gt; <span class="keyword">list</span>, <span class="keyword">long</span> totalElements, <span class="keyword">int</span> page, <span class="keyword">int</span> pageSize) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> PageImpl&lt;&gt;(<span class="keyword">list</span>,</span><br><span class="line">                <span class="keyword">new</span> PageRequest(page, pageSize),</span><br><span class="line">                totalElements);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>pom.xml<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;highlight zephir&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span clas
      
    
    </summary>
    
      <category term="SpringBoot" scheme="https://qijianguo.com/categories/SpringBoot/"/>
    
    
      <category term="springboot" scheme="https://qijianguo.com/tags/springboot/"/>
    
  </entry>
  
  <entry>
    <title>Spring Boot的启动器Starter大全及自定义Starter</title>
    <link href="https://qijianguo.com/Java/2019/04/17/Spring%20Boot%E7%9A%84%E5%90%AF%E5%8A%A8%E5%99%A8Starter%E5%A4%A7%E5%85%A8%E5%8F%8A%E8%87%AA%E5%AE%9A%E4%B9%89Starter.html"/>
    <id>https://qijianguo.com/Java/2019/04/17/Spring Boot的启动器Starter大全及自定义Starter.html</id>
    <published>2019-04-17T06:18:44.184Z</published>
    <updated>2019-04-17T07:46:54.291Z</updated>
    
    <content type="html"><![CDATA[<p>转载自：<a href="https://www.cnblogs.com/shamo89/p/8051966.html" target="_blank" rel="noopener">https://www.cnblogs.com/shamo89/p/8051966.html</a></p><p>现有启动器Starter目录<br>Spring Boot应用启动器基本的一共有44种，具体如下：</p><p>1）spring-boot-starter<br>这是Spring Boot的核心启动器，包含了自动配置、日志和YAML。</p><p>2）spring-boot-starter-actuator<br>帮助监控和管理应用。</p><p>3）spring-boot-starter-amqp<br>通过spring-rabbit来支持AMQP协议（Advanced Message Queuing Protocol）。</p><p>4）spring-boot-starter-aop<br>支持面向方面的编程即AOP，包括spring-aop和AspectJ。</p><p>5）spring-boot-starter-artemis<br>通过Apache Artemis支持JMS的API（Java Message Service API）。</p><p>6）spring-boot-starter-batch<br>支持Spring Batch，包括HSQLDB数据库。</p><p>7）spring-boot-starter-cache<br>支持Spring的Cache抽象。</p><p>8）spring-boot-starter-cloud-connectors<br>支持Spring Cloud Connectors，简化了在像Cloud Foundry或Heroku这样的云平台上连接服务。</p><p>9）spring-boot-starter-data-elasticsearch<br>支持ElasticSearch搜索和分析引擎，包括spring-data-elasticsearch。</p><p>10）spring-boot-starter-data-gemfire<br>支持GemFire分布式数据存储，包括spring-data-gemfire。</p><p>11）spring-boot-starter-data-jpa<br>支持JPA（Java Persistence API），包括spring-data-jpa、spring-orm、Hibernate。</p><p>12）spring-boot-starter-data-mongodb<br>支持MongoDB数据，包括spring-data-mongodb。</p><p>13）spring-boot-starter-data-rest<br>通过spring-data-rest-webmvc，支持通过REST暴露Spring Data数据仓库。</p><p>14）spring-boot-starter-data-solr<br>支持Apache Solr搜索平台，包括spring-data-solr。</p><p>15）spring-boot-starter-freemarker<br>支持FreeMarker模板引擎。</p><p>16）spring-boot-starter-groovy-templates<br>支持Groovy模板引擎。</p><p>17）spring-boot-starter-hateoas<br>通过spring-hateoas支持基于HATEOAS的RESTful Web服务。</p><p>18）spring-boot-starter-hornetq<br>通过HornetQ支持JMS。</p><p>19）spring-boot-starter-integration<br>支持通用的spring-integration模块。</p><p>20）spring-boot-starter-jdbc<br>支持JDBC数据库。</p><p>21）spring-boot-starter-jersey<br>支持Jersey RESTful Web服务框架。</p><p>22）spring-boot-starter-jta-atomikos<br>通过Atomikos支持JTA分布式事务处理。</p><p>23）spring-boot-starter-jta-bitronix<br>通过Bitronix支持JTA分布式事务处理。</p><p>24）spring-boot-starter-mail<br>支持javax.mail模块。</p><p>25）spring-boot-starter-mobile<br>支持spring-mobile。</p><p>26）spring-boot-starter-mustache<br>支持Mustache模板引擎。</p><p>27）spring-boot-starter-redis<br>支持Redis键值存储数据库，包括spring-redis。</p><p>28）spring-boot-starter-security<br>支持spring-security。</p><p>29）spring-boot-starter-social-facebook<br>支持spring-social-facebook</p><p>30）spring-boot-starter-social-linkedin<br>支持pring-social-linkedin</p><p>31）spring-boot-starter-social-twitter<br>支持pring-social-twitter</p><p>32）spring-boot-starter-test<br>支持常规的测试依赖，包括JUnit、Hamcrest、Mockito以及spring-test模块。</p><p>33）spring-boot-starter-thymeleaf<br>支持Thymeleaf模板引擎，包括与Spring的集成。</p><p>34）spring-boot-starter-velocity<br>支持Velocity模板引擎。</p><p>35）spring-boot-starter-web<br>S支持全栈式Web开发，包括Tomcat和spring-webmvc。</p><p>36）spring-boot-starter-websocket<br>支持WebSocket开发。</p><p>37）spring-boot-starter-ws<br>支持Spring Web Services。</p><p>Spring Boot应用启动器面向生产环境的还有2种，具体如下：</p><p>1）spring-boot-starter-actuator<br>增加了面向产品上线相关的功能，比如测量和监控。</p><p>2）spring-boot-starter-remote-shell<br>增加了远程ssh shell的支持。</p><p>最后，Spring Boot应用启动器还有一些替换技术的启动器，具体如下：</p><p>1）spring-boot-starter-jetty<br>引入了Jetty HTTP引擎（用于替换Tomcat）。</p><p>2）spring-boot-starter-log4j<br>支持Log4J日志框架。</p><p>3）spring-boot-starter-logging<br>引入了Spring Boot默认的日志框架Logback。</p><p>4）spring-boot-starter-tomcat<br>引入了Spring Boot默认的HTTP引擎Tomcat。</p><p>5）spring-boot-starter-undertow<br>引入了Undertow HTTP引擎（用于替换Tomcat）。</p><h4 id="自定义SpringBoot-Starter"><a href="#自定义SpringBoot-Starter" class="headerlink" title="自定义SpringBoot-Starter"></a>自定义SpringBoot-Starter</h4><h5 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h5><p>我们都知道可以使用SpringBoot快速的开发基于Spring框架的项目。由于围绕SpringBoot存在很多开箱即用的Starter依赖，使得我们在开发业务代码时能够非常方便的、不需要过多关注框架的配置，而只需要关注业务即可。</p><p>例如我想要在SpringBoot项目中集成Redis，那么我只需要加入spring-data-redis-starter的依赖，并简单配置一下连接信息以及Jedis连接池配置就可以。这为我们省去了之前很多的配置操作。甚至有些功能的开启只需要在启动类或配置类上增加一个注解即可完成。</p><p>那么如果我们想要自己实现自己的Starter需要做些什么呢？下面就开始介绍如何实现自己的SpringBoot-xxx-starter。</p><h5 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h5><p>首先说说原理，我们知道使用一个公用的starter的时候，只需要将相应的依赖添加的Maven的配置文件当中即可，免去了自己需要引用很多依赖类，并且SpringBoot会自动进行类的自动配置。那么 SpringBoot 是如何知道要实例化哪些类，并进行自动配置的呢？ 下面简单说一下。</p><p>第一步，SpringBoot 在启动时会去依赖的starter包中寻找 resources/META-INF/spring.factories 文件，然后根据文件中配置的Jar包去扫描项目所依赖的Jar包，这类似于 Java 的 SPI 机制。(spi介绍参阅：Java的spi介绍和简单应用)</p><p>第二步，根据 spring.factories配置加载AutoConfigure类。</p><p>最后，根据 @Conditional注解的条件，进行自动配置并将Bean注入Spring Context 上下文当中。</p><p>我们也可以使用@ImportAutoConfiguration({MyServiceAutoConfiguration.class}) 指定自动配置哪些类。</p><h5 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h5><p>终于到了代码实现的步骤，接下来就开始编码我们自己的SpringBoot-starter。</p><p>第一步创建一个SpringBoot 项目，并添加下面两个依赖到pom.xml文件当中</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-autoconfigure<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><p>其中 spring-boot-configuration-processor 的作用是编译时生成 spring-configuration-metadata.json ，此文件主要给IDE使用。如当配置此jar相关配置属性在 application.yml ，你可以用ctlr+鼠标左键点击属性名，IDE会跳转到你配置此属性的类中。</p><p>我们日常使用的Spring官方的Starter一般采取spring-boot-starter-{name} 的命名方式，如 spring-boot-starter-web 。</p><p>而非官方的Starter，官方建议 artifactId 命名应遵循{name}-spring-boot-starter 的格式。 例如：mybatis-spring-boot-starter  。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.ysc<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>simple-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br></pre></td></tr></table></figure><p>第二步编写我们的Service类<br>这里讲一下我们的Starter要实现的功能，很简单，提供一个Service，包含一个能够将配置文件中配置的字符串根据传入的字符进行分割的方法String[] split(String separatorChar)。</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class StarterService &#123;</span><br><span class="line">    private String config;</span><br><span class="line"></span><br><span class="line">    public StarterService(String config) &#123;</span><br><span class="line">        this.config = config;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public String[] split(String separatorChar) &#123;</span><br><span class="line">        return StringUtils.split(this.config, separatorChar);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>第三步编写配置文件读取类</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">@ConfigurationProperties(<span class="string">"example.service"</span>)</span><br><span class="line"><span class="keyword">public</span> class StarterServiceProperties &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">String</span> <span class="built_in">config</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> setConfig(<span class="keyword">String</span> <span class="built_in">config</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.<span class="built_in">config</span> = <span class="built_in">config</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">String</span> getConfig() &#123;</span><br><span class="line">        <span class="built_in">return</span> <span class="built_in">config</span>;</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>第四步，编写AutoConfigure类 ，这步是关键点</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@Configuration</span></span><br><span class="line"><span class="variable">@ConditionalOnClass</span>(StarterService.class)</span><br><span class="line"><span class="variable">@EnableConfigurationProperties</span>(StarterServiceProperties.class)</span><br><span class="line">public class StarterAutoConfigure &#123;</span><br><span class="line"></span><br><span class="line">    <span class="variable">@Autowired</span></span><br><span class="line">    private StarterServiceProperties properties;</span><br><span class="line"></span><br><span class="line">    <span class="variable">@Bean</span></span><br><span class="line">    <span class="variable">@ConditionalOnMissingBean</span></span><br><span class="line">    <span class="variable">@ConditionalOnProperty</span>(prefix = <span class="string">"example.service"</span>, value = <span class="string">"enabled"</span>, havingValue = <span class="string">"true"</span>)</span><br><span class="line">    StarterService starterService ()&#123;</span><br><span class="line">        <span class="selector-tag">return</span> <span class="selector-tag">new</span> <span class="selector-tag">StarterService</span>(properties.getConfig());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>解释一下代码中用到的几个注解：</p><p>@ConditionalOnClass，当classpath下发现该类的情况下进行自动配置。<br>@ConditionalOnMissingBean，当Spring Context中不存在该Bean时。<br>@ConditionalOnProperty(prefix = “example.service”,value = “enabled”,havingValue = “true”)，当配置文件中example.service.enabled=true时。<br>下面列举SpringBoot中的所有@Conditional注解及作用</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@ConditionalOnBean:</span>当容器中有指定的Bean的条件下  </span><br><span class="line"><span class="variable">@ConditionalOnClass</span>：当类路径下有指定的类的条件下  </span><br><span class="line"><span class="variable">@ConditionalOnExpression</span>:基于SpEL表达式作为判断条件  </span><br><span class="line"><span class="variable">@ConditionalOnJava</span>:基于JVM版本作为判断条件  </span><br><span class="line"><span class="variable">@ConditionalOnJndi</span>:在JNDI存在的条件下查找指定的位置  </span><br><span class="line"><span class="variable">@ConditionalOnMissingBean</span>:当容器中没有指定Bean的情况下  </span><br><span class="line"><span class="variable">@ConditionalOnMissingClass</span>:当类路径下没有指定的类的条件下  </span><br><span class="line"><span class="variable">@ConditionalOnNotWebApplication</span>:当前项目不是Web项目的条件下  </span><br><span class="line"><span class="variable">@ConditionalOnProperty</span>:指定的属性是否有指定的值  </span><br><span class="line"><span class="variable">@ConditionalOnResource</span>:类路径下是否有指定的资源  </span><br><span class="line"><span class="variable">@ConditionalOnSingleCandidate</span>:当指定的Bean在容器中只有一个，或者在有多个Bean的情况下，用来指定首选的Bean <span class="variable">@ConditionalOnWebApplication</span>:当前项目是Web项目的条件下</span><br></pre></td></tr></table></figure><p>最后一步，在resources/META-INF/下创建spring.factories文件，并添加如下内容：</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">org<span class="selector-class">.springframework</span><span class="selector-class">.boot</span><span class="selector-class">.autoconfigure</span><span class="selector-class">.EnableAutoConfiguration</span>=com<span class="selector-class">.example</span><span class="selector-class">.autocinfigure</span><span class="selector-class">.StarterAutoConfigure</span></span><br></pre></td></tr></table></figure><p>至此，我们的一个Starter代码部分就是完成了，下面将项目安装到本地Maven仓库中。</p><p>发布<br>在项目根目录执行 mvn install 进行打包安装。</p><p>测试<br>将Starter项目的依赖添加到我们自己的SpringBoot项目中</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.ysc<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>simple-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>在application.yml 配置文件中添加配置信息：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">example</span><br><span class="line">  service</span><br><span class="line">    enabled: <span class="literal">true</span></span><br><span class="line">    config： abc-des-dde,SSS-DRS-RE,SDR-SDFR-XXX</span><br></pre></td></tr></table></figure><p>在本地使用JUnit进行代码测试</p><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> StarterService starterService;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">starterTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    String[] splitArray = starterService.split(<span class="string">","</span>);</span><br><span class="line">    System.out.println(splitArray);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>好，到这我们的一个自定义Stater就完成了</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;转载自：&lt;a href=&quot;https://www.cnblogs.com/shamo89/p/8051966.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://www.cnblogs.com/shamo89/p/8051966.htm
      
    
    </summary>
    
      <category term="Java" scheme="https://qijianguo.com/categories/Java/"/>
    
    
      <category term="java, springboot" scheme="https://qijianguo.com/tags/java-springboot/"/>
    
  </entry>
  
  <entry>
    <title>Nginx启动、重启、关闭</title>
    <link href="https://qijianguo.com/Nginx/2019/04/17/nginx%E5%90%AF%E5%8A%A8%E3%80%81%E9%87%8D%E5%90%AF%E3%80%81%E5%85%B3%E9%97%AD.html"/>
    <id>https://qijianguo.com/Nginx/2019/04/17/nginx启动、重启、关闭.html</id>
    <published>2019-04-17T06:18:44.181Z</published>
    <updated>2019-04-17T07:46:42.054Z</updated>
    
    <content type="html"><![CDATA[<p>转载自： <a href="https://blog.csdn.net/helloxiaozhe/article/details/80596138" target="_blank" rel="noopener">https://blog.csdn.net/helloxiaozhe/article/details/80596138</a></p><h4 id="方式一：传统方法"><a href="#方式一：传统方法" class="headerlink" title="方式一：传统方法"></a>方式一：传统方法</h4><h5 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> usr/<span class="built_in">local</span>/nginx/sbin</span><br><span class="line">./nginx</span><br></pre></td></tr></table></figure><h5 id="重启"><a href="#重启" class="headerlink" title="重启"></a>重启</h5><p><strong>更改配置重启nginx</strong><br><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">kill -HUP 主进程号或进程号文件路径</span><br><span class="line">或者使用</span><br><span class="line"><span class="keyword">cd</span> <span class="string">/usr/local/nginx/sbin</span></span><br><span class="line"><span class="string">./nginx</span> -s <span class="keyword">reload</span></span><br></pre></td></tr></table></figure></p><p><strong>判断配置文件是否正确</strong></p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">nginx -t -c /usr/<span class="keyword">local</span>/nginx/<span class="keyword">conf</span>/nginx.<span class="keyword">conf</span></span><br><span class="line">或者</span><br><span class="line"><span class="keyword">cd</span>  /usr/<span class="keyword">local</span>/nginx/sbin</span><br><span class="line">./nginx -t</span><br></pre></td></tr></table></figure><p><strong>关闭</strong></p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">查询nginx主进程号</span><br><span class="line"></span><br><span class="line">ps -ef | <span class="keyword">grep</span> nginx</span><br><span class="line"></span><br><span class="line">从容停止   <span class="keyword">kill</span> -QUIT 主进程号</span><br><span class="line"></span><br><span class="line">快速停止   <span class="keyword">kill</span> -TERM 主进程号</span><br><span class="line"></span><br><span class="line">强制停止   <span class="keyword">kill</span> -<span class="number">9</span> nginx</span><br><span class="line"></span><br><span class="line">若nginx.conf配置了pid文件路径，如果没有，则在logs目录下</span><br><span class="line"></span><br><span class="line"><span class="keyword">kill</span> -信号类型 <span class="string">'/usr/local/nginx/logs/nginx.pid'</span></span><br></pre></td></tr></table></figure><h4 id="方式二：通过配置-etc-init-d-nginx文件来控制"><a href="#方式二：通过配置-etc-init-d-nginx文件来控制" class="headerlink" title="方式二：通过配置/etc/init.d/nginx文件来控制"></a>方式二：通过配置/etc/init.d/nginx文件来控制</h4><p>这里使用的是编写shell脚本的方式来处理</p><p>vi /etc/init.d/nginx  (输入下面的代码)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># nginx Startup script for the Nginx HTTP Server</span></span><br><span class="line"><span class="comment"># it is v.0.0.2 version.</span></span><br><span class="line"><span class="comment"># chkconfig: - 85 15</span></span><br><span class="line"><span class="comment"># description: Nginx is a high-performance web and proxy server.</span></span><br><span class="line"><span class="comment">#              It has a lot of features, but it's not for everyone.</span></span><br><span class="line"><span class="comment"># processname: nginx</span></span><br><span class="line"><span class="comment"># pidfile: /var/run/nginx.pid</span></span><br><span class="line"><span class="comment"># config: /usr/local/nginx/conf/nginx.conf</span></span><br><span class="line">nginxd=/usr/<span class="built_in">local</span>/nginx/sbin/nginx</span><br><span class="line">nginx_config=/usr/<span class="built_in">local</span>/nginx/conf/nginx.conf</span><br><span class="line">nginx_pid=/var/run/nginx.pid</span><br><span class="line">RETVAL=0</span><br><span class="line">prog=<span class="string">"nginx"</span></span><br><span class="line"><span class="comment"># Source function library.</span></span><br><span class="line">. /etc/rc.d/init.d/<span class="built_in">functions</span></span><br><span class="line"><span class="comment"># Source networking configuration.</span></span><br><span class="line">. /etc/sysconfig/network</span><br><span class="line"><span class="comment"># Check that networking is up.</span></span><br><span class="line">[ <span class="variable">$&#123;NETWORKING&#125;</span> = <span class="string">"no"</span> ] &amp;&amp; <span class="built_in">exit</span> 0</span><br><span class="line">[ -x <span class="variable">$nginxd</span> ] || <span class="built_in">exit</span> 0</span><br><span class="line"><span class="comment"># Start nginx daemons functions.</span></span><br><span class="line"><span class="function"><span class="title">start</span></span>() &#123;</span><br><span class="line"><span class="keyword">if</span> [ -e <span class="variable">$nginx_pid</span> ];<span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">"nginx already running...."</span></span><br><span class="line">   <span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">   <span class="built_in">echo</span> -n $<span class="string">"Starting <span class="variable">$prog</span>: "</span></span><br><span class="line">   daemon <span class="variable">$nginxd</span> -c <span class="variable">$&#123;nginx_config&#125;</span></span><br><span class="line">   RETVAL=$?</span><br><span class="line">   <span class="built_in">echo</span></span><br><span class="line">   [ <span class="variable">$RETVAL</span> = 0 ] &amp;&amp; touch /var/lock/subsys/nginx</span><br><span class="line">   <span class="built_in">return</span> <span class="variable">$RETVAL</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># Stop nginx daemons functions.</span></span><br><span class="line"><span class="function"><span class="title">stop</span></span>() &#123;</span><br><span class="line">        <span class="built_in">echo</span> -n $<span class="string">"Stopping <span class="variable">$prog</span>: "</span></span><br><span class="line">        killproc <span class="variable">$nginxd</span></span><br><span class="line">        RETVAL=$?</span><br><span class="line">        <span class="built_in">echo</span></span><br><span class="line">        [ <span class="variable">$RETVAL</span> = 0 ] &amp;&amp; rm -f /var/lock/subsys/nginx /var/run/nginx.pid</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># reload nginx service functions.</span></span><br><span class="line"><span class="function"><span class="title">reload</span></span>() &#123;</span><br><span class="line">    <span class="built_in">echo</span> -n $<span class="string">"Reloading <span class="variable">$prog</span>: "</span></span><br><span class="line">    <span class="comment">#kill -HUP `cat $&#123;nginx_pid&#125;`</span></span><br><span class="line">    killproc <span class="variable">$nginxd</span> -HUP</span><br><span class="line">    RETVAL=$?</span><br><span class="line">    <span class="built_in">echo</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># See how we were called.</span></span><br><span class="line"><span class="keyword">case</span> <span class="string">"<span class="variable">$1</span>"</span> <span class="keyword">in</span></span><br><span class="line">start)</span><br><span class="line">        start</span><br><span class="line">        ;;</span><br><span class="line">stop)</span><br><span class="line">        stop</span><br><span class="line">        ;;</span><br><span class="line">reload)</span><br><span class="line">        reload</span><br><span class="line">        ;;</span><br><span class="line">restart)</span><br><span class="line">        stop</span><br><span class="line">        start</span><br><span class="line">        ;;</span><br><span class="line">status)</span><br><span class="line">        status <span class="variable">$prog</span></span><br><span class="line">        RETVAL=$?</span><br><span class="line">        ;;</span><br><span class="line">*)</span><br><span class="line">        <span class="built_in">echo</span> $<span class="string">"Usage: <span class="variable">$prog</span> &#123;start|stop|restart|reload|status|help&#125;"</span></span><br><span class="line">        <span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">esac</span></span><br><span class="line"><span class="built_in">exit</span> <span class="variable">$RETVAL</span></span><br></pre></td></tr></table></figure><p>:wq  保存并退出</p><p><strong><em>注意： nginxd和nginxconfig中写自己nginx位置！！！</em></strong></p><p>设置文件的访问权限</p><p>chmod a+x /etc/init.d/nginx   (a+x ==&gt; all user can execute  所有用户可执行)</p><p>这样在控制台就很容易的操作nginx了：查看Nginx当前状态、启动Nginx、停止Nginx、重启Nginx…</p><p><img src="https://img-blog.csdnimg.cn/20190307163714967.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>同样的修改了nginx的配置文件nginx.conf，也可以使用上面的命令重新加载新的配置文件并运行，</p><h5 id="配置开机自启动："><a href="#配置开机自启动：" class="headerlink" title="配置开机自启动："></a>配置开机自启动：</h5><p>方式一：在/etc/rc.local中配置</p><p>可以将此命令加入到rc.local文件中，这样开机的时候nginx就默认启动了</p><p>vi /etc/rc.local</p><p>加入一行  /etc/init.d/nginx start    保存并退出，下次重启会生效。</p><h5 id="将nginx配置成自启动的服务"><a href="#将nginx配置成自启动的服务" class="headerlink" title="将nginx配置成自启动的服务"></a>将nginx配置成自启动的服务</h5><h6 id="添加至服务管理列表，并让其开机自动启动"><a href="#添加至服务管理列表，并让其开机自动启动" class="headerlink" title="添加至服务管理列表，并让其开机自动启动"></a>添加至服务管理列表，并让其开机自动启动</h6><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="symbol">@nginx</span> ~]<span class="meta"># chkconfig --add nginx</span></span><br><span class="line">[root<span class="symbol">@nginx</span> ~]<span class="meta"># chkconfig nginx on </span></span><br><span class="line">[root<span class="symbol">@nginx</span> ~]<span class="meta"># chkconfig nginx --list </span></span><br><span class="line">nginx              <span class="number">0</span>:关闭    <span class="number">1</span>:关闭    <span class="number">2</span>:启用    <span class="number">3</span>:启用    <span class="number">4</span>:启用    <span class="number">5</span>:启用    <span class="number">6</span>:关闭</span><br></pre></td></tr></table></figure><h6 id="nginx启动、停止、无间断服务重启"><a href="#nginx启动、停止、无间断服务重启" class="headerlink" title="nginx启动、停止、无间断服务重启"></a>nginx启动、停止、无间断服务重启</h6><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@example ~]#<span class="built_in"> service </span>nginx start</span><br><span class="line"></span><br><span class="line">[root@example ~]#<span class="built_in"> service </span>nginx stop</span><br><span class="line"></span><br><span class="line">[root@example ~]#<span class="built_in"> service </span>nginx reload</span><br></pre></td></tr></table></figure><h6 id="查看一下端口"><a href="#查看一下端口" class="headerlink" title="查看一下端口"></a>查看一下端口</h6><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@nginx ~]# netstat -ntlp | grep :<span class="number">80</span></span><br><span class="line">tcp        <span class="number">0</span>      <span class="number">0</span> <span class="number">0.0</span><span class="meta">.0</span><span class="meta">.0</span>:<span class="number">80</span>                  <span class="number">0.0</span><span class="meta">.0</span><span class="meta">.0</span>:*                   LISTEN      <span class="number">3889</span>/nginx</span><br></pre></td></tr></table></figure><p>对于其他服务也同样适用，比如Mysql,php-fpm等等</p><h6 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h6><p><img src="https://img-blog.csdnimg.cn/20190307163951737.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;转载自： &lt;a href=&quot;https://blog.csdn.net/helloxiaozhe/article/details/80596138&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://blog.csdn.net/helloxiao
      
    
    </summary>
    
      <category term="Nginx" scheme="https://qijianguo.com/categories/Nginx/"/>
    
    
      <category term="nginx" scheme="https://qijianguo.com/tags/nginx/"/>
    
  </entry>
  
  <entry>
    <title>Git修改已经提交的注释或日志</title>
    <link href="https://qijianguo.com/Git/2019/04/17/Git%E4%BF%AE%E6%94%B9%E5%B7%B2%E7%BB%8F%E6%8F%90%E4%BA%A4%E7%9A%84%E6%B3%A8%E9%87%8A%E6%88%96%E6%97%A5%E5%BF%97.html"/>
    <id>https://qijianguo.com/Git/2019/04/17/Git修改已经提交的注释或日志.html</id>
    <published>2019-04-17T06:18:44.177Z</published>
    <updated>2019-04-17T07:45:15.901Z</updated>
    
    <content type="html"><![CDATA[<p>转自：<a href="http://www.cnblogs.com/tocy/p/git_commit_log_modify.html" target="_blank" rel="noopener">http://www.cnblogs.com/tocy/p/git_commit_log_modify.html</a></p><blockquote><p>对于已经修改提交过的注释，如果需要修改，可以借助 git commit –amend 来进行。（注意：修改日志的功能在svn中需要server支持，在git中可以独立修改）<br>注意：必须是最近提交，还没有push的注释。    </p></blockquote><p>例如，在base 里最新的提交就是 <strong><em>resolving the crash problem</em></strong>，现在需要将其改为resolving the <strong><em>crash problem to fix bug xxx</em></strong><br>在base目录下，输入 <strong><em>git commit –amend</em></strong>，就会进入一个文本编辑界面（如下），在注释的地方修改 ，保存然后退出，这样注释就修改了，再重新 <strong><em>push.</em></strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">resolving the crash problem</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Please enter the commit message <span class="keyword">for</span> your changes. Lines starting</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> with <span class="string">'#'</span> will be ignored, and an empty message aborts the commit.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Date:      Sat Dec 12 08:44:59 2015 +0800</span></span><br><span class="line"><span class="meta">#</span><span class="bash"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> On branch master</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Your branch and <span class="string">'origin/master'</span> have diverged,</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> and have 1 and 1 different commit each, respectively.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">   (use <span class="string">"git pull"</span> to merge the remote branch into yours)</span></span><br><span class="line"><span class="meta">#</span><span class="bash"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Changes to be committed:</span></span><br><span class="line"><span class="meta">#</span><span class="bash">       modified:   c_c++/1-c-invoke-cpp-main.c</span></span><br><span class="line"><span class="meta">#</span><span class="bash">       modified:   c_c++/1-c-invoke-cpp.cpp</span></span><br><span class="line"><span class="meta">#</span><span class="bash"></span></span><br></pre></td></tr></table></figure><p>注意以上界面使用vi操作习惯。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;转自：&lt;a href=&quot;http://www.cnblogs.com/tocy/p/git_commit_log_modify.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;http://www.cnblogs.com/tocy/p/git_co
      
    
    </summary>
    
      <category term="Git" scheme="https://qijianguo.com/categories/Git/"/>
    
    
      <category term="git" scheme="https://qijianguo.com/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>Git基础</title>
    <link href="https://qijianguo.com/Git/2019/04/17/Git%E5%9F%BA%E7%A1%80.html"/>
    <id>https://qijianguo.com/Git/2019/04/17/Git基础.html</id>
    <published>2019-04-17T06:18:44.174Z</published>
    <updated>2019-04-17T07:44:59.452Z</updated>
    
    <content type="html"><![CDATA[<h1 id="1-1-获取项目的git仓库"><a href="#1-1-获取项目的git仓库" class="headerlink" title="1.1 获取项目的git仓库"></a>1.1 获取项目的git仓库</h1><p>有两种取得git仓库的方法。</p><h2 id="1-1-1-从当前目录初始化"><a href="#1-1-1-从当前目录初始化" class="headerlink" title="1.1.1 从当前目录初始化"></a>1.1.1 从当前目录初始化</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 创建项目文件夹</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> mkdir  git_practice</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 进入文件夹下</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> <span class="built_in">cd</span> git_practice</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 初始化</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> git init</span></span><br></pre></td></tr></table></figure><h2 id="1-1-2-从现有仓库克隆"><a href="#1-1-2-从现有仓库克隆" class="headerlink" title="1.1.2 从现有仓库克隆"></a>1.1.2 从现有仓库克隆</h2><p>语法</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="keyword">clone</span> <span class="title">[url</span>]</span><br></pre></td></tr></table></figure><p>自定义项目名称：只需要再 url 后自定义项目名<br><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="keyword">clone</span> <span class="title">[url</span>]  mygrit</span><br></pre></td></tr></table></figure></p><h1 id="1-2-记录更新到仓库"><a href="#1-2-记录更新到仓库" class="headerlink" title="1.2 记录更新到仓库"></a>1.2 记录更新到仓库</h1><p>工作区下的文件状态分为：未跟踪 / 已跟踪。 文件的状态变化周期如下：<br><img src="https://img-blog.csdnimg.cn/20190308154121432.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="文件的状态变化周期"></p><h2 id="1-2-1-查看文件的状态"><a href="#1-2-1-查看文件的状态" class="headerlink" title="1.2.1 查看文件的状态"></a>1.2.1 查看文件的状态</h2><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line"><span class="keyword">On</span> branch master</span><br><span class="line">Your branch <span class="keyword">is</span> up <span class="keyword">to</span> <span class="built_in">date</span> <span class="keyword">with</span> <span class="comment">'origin/master'.</span></span><br><span class="line"></span><br><span class="line"><span class="literal">nothing</span> <span class="keyword">to</span> commit, working tree clean</span><br></pre></td></tr></table></figure><p>注：没有查找到跟踪着的文件。</p><p>用vim新建一个README</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> vi README</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看状态</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git status</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> On branch master</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Untracked files:</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> (use <span class="string">"git add &lt;file&gt;..."</span> to include <span class="keyword">in</span> what will be committed)</span></span><br><span class="line"><span class="meta">#</span><span class="bash"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> README</span></span><br><span class="line">nothing added to commit but untracked files present (use "git add" to track)</span><br></pre></td></tr></table></figure><p>注：untracked files表示未跟踪， 即不会被git跟踪。</p><h2 id="1-2-2-跟踪新文件"><a href="#1-2-2-跟踪新文件" class="headerlink" title="1.2.2 跟踪新文件"></a>1.2.2 跟踪新文件</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git add README</span></span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> git status</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> On branch master</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Changes to be committed:</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> (use <span class="string">"git reset HEAD &lt;file&gt;..."</span> to unstage)</span></span><br><span class="line"><span class="meta">#</span><span class="bash"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> new file: README</span></span><br><span class="line"><span class="meta">#</span><span class="bash"></span></span><br></pre></td></tr></table></figure><p>注：README 文件已被跟踪，并处于暂存状态。</p><p>“Changes to be committed” 这行下面的，就说明是已暂存状态。如果此时提交，那么该文件此<br>时此刻的版本将被留存在历史记录中</p><h2 id="1-2-3-忽略文件"><a href="#1-2-3-忽略文件" class="headerlink" title="1.2.3 忽略文件"></a>1.2.3 忽略文件</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 添加git忽略文件</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> vi .gitignore</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 忽略所有以 .o 或 .a 结尾的文件</span></span><br><span class="line">*.[oa]</span><br><span class="line"></span><br><span class="line"> 忽略所有以波浪符（~）结尾的文件</span><br><span class="line">*~</span><br></pre></td></tr></table></figure><p>文件 .gitignore 的格式规范如下：</p><pre><code>• 所有空行或者以注释符号 ＃ 开头的行都会被 Git 忽略。• 可以使用标准的 glob 模式匹配。    • 匹配模式最后跟反斜杠（/）说明要忽略的是目录。    • 要忽略指定模式以外的文件或目录，可以在模式前加上惊叹号（!）取反</code></pre><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">所谓的 glob 模式是指 shell 所使用的简化了的正则表达式。星号（*）匹配零个或多个任意字符；[abc] 匹配</span><br><span class="line">任何一个列在方括号中的字符（这个例子要么匹配一个 a，要么匹配一个 b，要么匹配一个 c）；问号（?）</span><br><span class="line">只匹配一个任意字符；如果在方括号中使用短划线分隔两个字符，表示所有在这两个字符范围内的都可以匹配</span><br><span class="line">（比如 [<span class="number">0</span><span class="number">-9</span>] 表示匹配所有 <span class="number">0</span> 到 <span class="number">9</span> 的数字）。</span><br></pre></td></tr></table></figure><p>再看一个 .gitignore 文件的例子：</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 此为注释 – 将被 Git 忽略</span></span><br><span class="line">*.a <span class="comment"># 忽略所有 .a 结尾的文件</span></span><br><span class="line">!<span class="class"><span class="keyword">lib</span>.<span class="title">a</span> <span class="comment"># 但 lib.a 除外</span></span></span><br><span class="line">/TODO <span class="comment"># 仅仅忽略项目根目录下的 TODO 文件，不包括 subdir/TODO</span></span><br><span class="line">build/ <span class="comment"># 忽略 build/ 目录下的所有文件</span></span><br><span class="line">doc/*.txt <span class="comment"># 会忽略 doc/notes.txt 但不包括 doc/server/arch.txt</span></span><br></pre></td></tr></table></figure><h2 id="1-2-4-查看已暂存和未暂存的更新"><a href="#1-2-4-查看已暂存和未暂存的更新" class="headerlink" title="1.2.4 查看已暂存和未暂存的更新"></a>1.2.4 查看已暂存和未暂存的更新</h2><h2 id="1-2-5-提交更新"><a href="#1-2-5-提交更新" class="headerlink" title="1.2.5 提交更新"></a>1.2.5 提交更新</h2><p>在每次commit之前先用 git status 文件是否都 git add 了（即暂存过了），否则不会被记录。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git commit -m <span class="string">" update message "</span></span></span><br></pre></td></tr></table></figure><h2 id="1-2-6-跳过使用暂存"><a href="#1-2-6-跳过使用暂存" class="headerlink" title="1.2.6 跳过使用暂存"></a>1.2.6 跳过使用暂存</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git commit -a -m <span class="string">" update message "</span></span></span><br><span class="line">或</span><br><span class="line"><span class="meta">$</span><span class="bash"> git commit -am <span class="string">" update message "</span></span></span><br></pre></td></tr></table></figure><h2 id="1-2-7-移除文件"><a href="#1-2-7-移除文件" class="headerlink" title="1.2.7 移除文件"></a>1.2.7 移除文件</h2><p>删除未暂存的文件</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> rm 1.txt</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git rm 1.txt</span></span><br></pre></td></tr></table></figure><p>强制删除<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git rm 1.txt  -f</span></span><br></pre></td></tr></table></figure></p><h2 id="1-2-8-移动文件"><a href="#1-2-8-移动文件" class="headerlink" title="1.2.8 移动文件"></a>1.2.8 移动文件</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git move file_from file_to</span></span><br></pre></td></tr></table></figure><p>相当于</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> mv README.txt README</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git rm README.txt</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git add READ</span></span><br></pre></td></tr></table></figure><h2 id="1-3-查看提交历史"><a href="#1-3-查看提交历史" class="headerlink" title="1.3 查看提交历史"></a>1.3 查看提交历史</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">log</span></span></span><br></pre></td></tr></table></figure><p><strong>-p</strong> 显示提交的差异， <strong>-2</strong> 显示最近的两次提交<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">log</span> -p -2</span></span><br></pre></td></tr></table></figure></p><p><strong>–stat</strong> 仅显示简要的增改行数统计</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">log</span> --<span class="built_in">stat</span></span></span><br></pre></td></tr></table></figure><p>还有个常用的 <strong>–pretty</strong> 选项，可以指定使用完全不同于默认格式的方式展示提交历史。比如用 <strong>oneline</strong> 将每个提交放在一行显示，这在提交数很大时非常有用。另外还有 <strong>short</strong>，<strong>full</strong> 和 <strong>fuller</strong> 可以用，展示的信息或多或少有些不同</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 每条记录显示一行</span></span><br><span class="line">git <span class="built_in">log</span> <span class="comment">--pretty=oneline</span></span><br></pre></td></tr></table></figure><p>自定义输出格式<br><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="keyword">log</span> --pretty=<span class="keyword">format</span>:<span class="string">"%h - %an, %ar : %s"</span></span><br><span class="line">a8876b9 - angus, <span class="number">18</span> minutes ago : 添加README</span><br><span class="line">f191557 - angus, <span class="number">24</span> minutes ago : 删除README.md</span><br></pre></td></tr></table></figure></p><p>常用格式占位符<br><img src="https://img-blog.csdnimg.cn/20190308165706103.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h1 id="1-4-撤消操作"><a href="#1-4-撤消操作" class="headerlink" title="1.4 撤消操作"></a>1.4 撤消操作</h1><h2 id="1-4-1-修改最后一次提交"><a href="#1-4-1-修改最后一次提交" class="headerlink" title="1.4.1 修改最后一次提交"></a>1.4.1 修改最后一次提交</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="keyword">commit</span> <span class="comment">--amend</span></span><br></pre></td></tr></table></figure><p>如果<strong>commit</strong>后发现还有未 <strong>add</strong> 的文件，则</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git commit -m <span class="string">"修改文件"</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git add 1.txt</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git commit --amend</span></span><br></pre></td></tr></table></figure><p>上面的三条命令最终得到一个提交，第二个提交命令修正了第一个的提交内容。</p><h2 id="1-4-2-取消暂存的文件"><a href="#1-4-2-取消暂存的文件" class="headerlink" title="1.4.2 取消暂存的文件"></a>1.4.2 取消暂存的文件</h2><p>暂存的文件即已执行 <strong>git add</strong> </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git add *</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git status</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> On branch master</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Changes to be committed:</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> (use <span class="string">"git reset HEAD &lt;file&gt;..."</span> to unstage)</span></span><br><span class="line"><span class="meta">#</span><span class="bash"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> modified: README.txt</span></span><br></pre></td></tr></table></figure><p>输出告诉我们应该用 <strong>git reset HEAD \<file> </file></strong> </p><p>例如撤销README.txt</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git reset HEAD README.txt</span></span><br></pre></td></tr></table></figure><h2 id="1-4-3-取消对文件的修改"><a href="#1-4-3-取消对文件的修改" class="headerlink" title="1.4.3 取消对文件的修改"></a>1.4.3 取消对文件的修改</h2><p>撤销单个文件的修改<br><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">$</span> git checkout --&lt;<span class="keyword">file</span>&gt;</span><br></pre></td></tr></table></figure></p><p>撤销所有文件的修改<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git checkout .</span></span><br></pre></td></tr></table></figure></p><h1 id="1-5-远程仓库的使用"><a href="#1-5-远程仓库的使用" class="headerlink" title="1.5 远程仓库的使用"></a>1.5 远程仓库的使用</h1><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="keyword">clone</span> <span class="title">&lt;url</span>&gt;</span><br></pre></td></tr></table></figure><h2 id="1-5-1-查看当前的远程库"><a href="#1-5-1-查看当前的远程库" class="headerlink" title="1.5.1 查看当前的远程库"></a>1.5.1 查看当前的远程库</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git remote </span></span><br><span class="line">origin</span><br></pre></td></tr></table></figure><p>也可以加上 -v 选项（译注：此为—verbose 的简写，取首字母），显示对应的克隆地址：</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git remote --<span class="keyword">verbose</span></span><br><span class="line">origin  http<span class="variable">s:</span>//github.<span class="keyword">com</span>/qijianguo/git_practice.git (fetch)</span><br><span class="line">origin  http<span class="variable">s:</span>//github.<span class="keyword">com</span>/qijianguo/git_practice.git (push)</span><br></pre></td></tr></table></figure><h2 id="1-5-2-添加远程仓库"><a href="#1-5-2-添加远程仓库" class="headerlink" title="1.5.2 添加远程仓库"></a>1.5.2 添加远程仓库</h2><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote add <span class="string">[shortname]</span> <span class="string">[url]</span></span><br></pre></td></tr></table></figure><p>要添加一个新的远程仓库，可以指定一个简单的名字，以便将来引用<br><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git remote</span><br><span class="line">origin</span><br><span class="line">$ git remote <span class="built_in">add</span> pb gi<span class="variable">t:</span>//github.<span class="keyword">com</span>/paulboone/ticgit.git</span><br><span class="line">$ git remote -v</span><br><span class="line">origin gi<span class="variable">t:</span>//github.<span class="keyword">com</span>/schacon/ticgit.git</span><br><span class="line">pb gi<span class="variable">t:</span>//github.<span class="keyword">com</span>/paulboone/ticgit.git</span><br></pre></td></tr></table></figure></p><p>现在可以用字串 pb 指代对应的仓库地址了。比如说，要抓取所有 Paul 有的，但本地仓库没有的信息，可以运行 git fetch pb：</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ git fetch pb</span><br><span class="line"><span class="string">remote:</span> Counting <span class="string">objects:</span> <span class="number">58</span>, done.</span><br><span class="line"><span class="string">remote:</span> Compressing <span class="string">objects:</span> <span class="number">100</span>% (<span class="number">41</span>/<span class="number">41</span>), done.</span><br><span class="line"><span class="string">remote:</span> Total <span class="number">44</span> (delta <span class="number">24</span>), reused <span class="number">1</span> (delta <span class="number">0</span>)</span><br><span class="line">Unpacking <span class="string">objects:</span> <span class="number">100</span>% (<span class="number">44</span>/<span class="number">44</span>), done.</span><br><span class="line">From <span class="string">git:</span><span class="comment">//github.com/paulboone/ticgit</span></span><br><span class="line">* [<span class="keyword">new</span> branch] master -&gt; pb/master</span><br><span class="line">* [<span class="keyword">new</span> branch] ticgit -&gt; pb/ticgit</span><br></pre></td></tr></table></figure><p>现在，Paul 的主干分支（master）已经完全可以在本地访问了，对应的名字是 pb/master，你可以将它合并到自己的某个分支，或者切换到这个分支，看看有些什么有趣的更新。</p><h2 id="1-5-3-从远程抓取"><a href="#1-5-3-从远程抓取" class="headerlink" title="1.5.3 从远程抓取"></a>1.5.3 从远程抓取</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git fetch [remote-nam]</span></span><br></pre></td></tr></table></figure><h2 id="1-5-4-推送数据到远程仓库"><a href="#1-5-4-推送数据到远程仓库" class="headerlink" title="1.5.4 推送数据到远程仓库"></a>1.5.4 推送数据到远程仓库</h2><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git push <span class="string">[remote-name]</span> <span class="string">[branch-name]</span></span><br></pre></td></tr></table></figure><h2 id="1-5-5-查看远程仓库信息"><a href="#1-5-5-查看远程仓库信息" class="headerlink" title="1.5.5 查看远程仓库信息"></a>1.5.5 查看远程仓库信息</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git remote</span></span><br><span class="line">origin</span><br><span class="line"><span class="meta">$</span><span class="bash"> git remote show origin</span></span><br></pre></td></tr></table></figure><h2 id="1-5-6-远程仓库的删除和重命名"><a href="#1-5-6-远程仓库的删除和重命名" class="headerlink" title="1.5.6 远程仓库的删除和重命名"></a>1.5.6 远程仓库的删除和重命名</h2><p>在新版 Git 中可以用 git remote rename 命令修改某个远程仓库的简短名称，比如想把 pb 改成 paul，可以这么运行：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git remote rename pb paul</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git remote</span></span><br><span class="line">origin</span><br><span class="line">paul</span><br></pre></td></tr></table></figure><p>注意，对远程仓库的重命名，也会使对应的分支名称发生变化，原来的 pb/master 分支现在成了<br>paul/master。<br>    碰到远端仓库服务器迁移，或者原来的克隆镜像不再使用，又或者某个参与者不再贡献代码，那么需要移除对应的远端仓库，可以运行 git remote rm 命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git remote rm paul</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git remote</span></span><br><span class="line">origin</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;1-1-获取项目的git仓库&quot;&gt;&lt;a href=&quot;#1-1-获取项目的git仓库&quot; class=&quot;headerlink&quot; title=&quot;1.1 获取项目的git仓库&quot;&gt;&lt;/a&gt;1.1 获取项目的git仓库&lt;/h1&gt;&lt;p&gt;有两种取得git仓库的方法。&lt;/p&gt;
&lt;h2
      
    
    </summary>
    
      <category term="Git" scheme="https://qijianguo.com/categories/Git/"/>
    
    
      <category term="git" scheme="https://qijianguo.com/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>吐血推荐 _ 那些提升开发人员工作效率的在线工具</title>
    <link href="https://qijianguo.com/Tool/2019/04/17/%E5%90%90%E8%A1%80%E6%8E%A8%E8%8D%90%20_%20%E9%82%A3%E4%BA%9B%E6%8F%90%E5%8D%87%E5%BC%80%E5%8F%91%E4%BA%BA%E5%91%98%E5%B7%A5%E4%BD%9C%E6%95%88%E7%8E%87%E7%9A%84%E5%9C%A8%E7%BA%BF%E5%B7%A5%E5%85%B7.html"/>
    <id>https://qijianguo.com/Tool/2019/04/17/吐血推荐 _ 那些提升开发人员工作效率的在线工具.html</id>
    <published>2019-04-17T06:18:44.172Z</published>
    <updated>2019-04-17T07:33:56.798Z</updated>
    
    <content type="html"><![CDATA[<p>转自：<a href="https://mp.weixin.qq.com/s/AJKA1LYR6TgqGMbsclC6wQ" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/AJKA1LYR6TgqGMbsclC6wQ</a></p><p>作为一个Java开发人员，经常要和各种各样的工具打交道，除了我们常用的IDE工具以外，其实还有很多工具是我们在日常开发及学习过程中要经常使用到的。</p><p>Hollis偏爱使用在线工具，因为个人觉得这样比较方便。本文就总结了一下我常用的在线工具。欢迎纠正及补充。</p><h1 id="Java源代码搜索"><a href="#Java源代码搜索" class="headerlink" title="Java源代码搜索"></a>Java源代码搜索</h1><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">http:</span><span class="comment">//grepcode.com/</span></span><br></pre></td></tr></table></figure><p>Grepcode是一个面向于Java开发人员的网站，在这里你可以通过Java的projects、classes等各种关键字在线查看它对应的源码，知道对应的project、classes等信息。 更方便的是，能提供非常多不同版本的源码在线查看、jar包、源码jar包、doc的下载。 同样，你也可以之间使用xxx-1.1.1.jar类似这样的名字直接找到对应的jar包，从而下载。<br><img src="https://img-blog.csdnimg.cn/20190311103935370.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h1 id="开源代码及文档搜索"><a href="#开源代码及文档搜索" class="headerlink" title="开源代码及文档搜索"></a>开源代码及文档搜索</h1><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">https:</span><span class="comment">//searchcode.com/</span></span><br></pre></td></tr></table></figure><p>SearchCode 是一个源码搜索引擎，目前支持从 Github、Bitbucket、Google Code、CodePlex、SourceForge 和 Fedora Project 平台搜索公开的源码。<br><img src="https://img-blog.csdnimg.cn/20190311104010761.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h1 id="电子书搜索"><a href="#电子书搜索" class="headerlink" title="电子书搜索"></a>电子书搜索</h1><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">https:</span><span class="comment">//www.jiumodiary.com/</span></span><br></pre></td></tr></table></figure><p>鸠摩搜书是一个比较不错的电子书搜索网站。内容也比较全。</p><p><img src="https://img-blog.csdnimg.cn/20190311104045643.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h1 id="网盘资源搜索"><a href="#网盘资源搜索" class="headerlink" title="网盘资源搜索"></a>网盘资源搜索</h1><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">http:</span><span class="comment">//pansou.com/</span></span><br></pre></td></tr></table></figure><p>这个大家都懂的，可以通过这个网站搜索百度网盘上面的各种资源。<br><img src="https://img-blog.csdnimg.cn/2019031110411749.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h1 id="无版权图片搜索"><a href="#无版权图片搜索" class="headerlink" title="无版权图片搜索"></a>无版权图片搜索</h1><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">https:</span><span class="comment">//unsplash.com</span></span><br></pre></td></tr></table></figure><p>不知道有没有人和我一样，经常需要一些无版权的图片，比如公众号配图。</p><p>unsplash是我用过的最好的网站，不需要登录，图片很高请，也比较全。唯一的缺点就是需要英文搜搜。<br><img src="https://img-blog.csdnimg.cn/20190311104149732.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h1 id="在线UML制图"><a href="#在线UML制图" class="headerlink" title="在线UML制图"></a>在线UML制图</h1><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">https:</span><span class="comment">//www.processon.com/</span></span><br></pre></td></tr></table></figure><p>ProcessOn是一个在线协作绘图平台，为用户提供最强大、易用的作图工具!支持在线创作流程图、<br>BPMN、UML图、UI界面原型设计、iOS界面原型设计等。<br><img src="https://img-blog.csdnimg.cn/20190311104228574.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h1 id="Json在线验证及格式化"><a href="#Json在线验证及格式化" class="headerlink" title="Json在线验证及格式化"></a>Json在线验证及格式化</h1><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">https:</span><span class="comment">//www.json.cn/</span></span><br></pre></td></tr></table></figure><p>我用过很多json在线格式化的工具，经过实践，json.cn是比较不错的，不仅支持json格式的验证及格式化，还可以将json格式压缩成普通文本等好用功能。<br><img src="https://img-blog.csdnimg.cn/2019031110430455.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h1 id="Diff-Check"><a href="#Diff-Check" class="headerlink" title="Diff Check"></a>Diff Check</h1><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">https:</span><span class="comment">//www.diffchecker.com/</span></span><br></pre></td></tr></table></figure><p>使用过svn或者git的人对diffcheck肯定不陌生，但有时候我们修改的文本内容并没有被版本控制，那么就可以使用在线的网站查看文件的修改情况。diffchecker很不错。<br><img src="https://img-blog.csdnimg.cn/20190311104338557.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h1 id="MarkDown编辑器"><a href="#MarkDown编辑器" class="headerlink" title="MarkDown编辑器"></a>MarkDown编辑器</h1><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">MaHua ：<span class="string">http:</span><span class="comment">//mahua.jser.me/</span></span><br><span class="line"></span><br><span class="line">马克飞象 ：<span class="string">https:</span><span class="comment">//maxiang.io/</span></span><br><span class="line"></span><br><span class="line">Cmd ：<span class="string">https:</span><span class="comment">//www.zybuluo.com/mdeditor</span></span><br></pre></td></tr></table></figure><p>以上这几个我都用过，都还好吧，因为我一般都喜欢把自己写过的东西保存下来，所以就用了客户端的，我是用的是MacDown<br><img src="https://img-blog.csdnimg.cn/20190311104415971.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h1 id="Maven依赖查询"><a href="#Maven依赖查询" class="headerlink" title="Maven依赖查询"></a>Maven依赖查询</h1><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">http:</span><span class="comment">//mvnrepository.com/</span></span><br></pre></td></tr></table></figure><p>mvnrepository这个不用详细解释了，就是查询maven的gav信息一类的。因为我们公司有内部的Nexus仓库，所以很少用这个。<br><img src="https://img-blog.csdnimg.cn/20190311104442532.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h1 id="在线代码运行"><a href="#在线代码运行" class="headerlink" title="在线代码运行"></a>在线代码运行</h1><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//</span>tool.lu<span class="regexp">/coderunner/</span></span><br></pre></td></tr></table></figure><p>coderunner可以在线运行php,c,c++,go,python,java,groovy等代码。当我们在外面，没有IDE又想执行个小程序的时候是个不错的选择。<br><img src="https://img-blog.csdnimg.cn/20190311104513843.png" alt="在这里插入图片描述"></p><h1 id="在线翻译"><a href="#在线翻译" class="headerlink" title="在线翻译"></a>在线翻译</h1><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Google翻译 ：<span class="string">https:</span><span class="comment">//translate.google.cn/</span></span><br><span class="line"></span><br><span class="line">百度翻译 ：<span class="string">http:</span><span class="comment">//fanyi.baidu.com/</span></span><br><span class="line"></span><br><span class="line">有道翻译 ：<span class="string">http:</span><span class="comment">//fanyi.youdao.com/</span></span><br></pre></td></tr></table></figure><p>说不出具体哪个好，其实都不太准确，还是需要自己根据语境进行翻译。</p><p>不过忍不住吐槽一句国内的这几个翻译网站，既然是做翻译的，域名竟然用拼音，我也是醉了。<br><img src="https://img-blog.csdnimg.cn/20190311104552780.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h1 id="SQL自动生成Java代码"><a href="#SQL自动生成Java代码" class="headerlink" title="SQL自动生成Java代码"></a>SQL自动生成Java代码</h1><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="regexp">//</span>www.autojcode.com<span class="regexp">/code/</span>sql2class.jsp</span><br></pre></td></tr></table></figure><p>AutoJCode可以从sql的建表语句中生成一个DO类。<br><img src="https://img-blog.csdnimg.cn/20190311104621862.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h1 id="json生成java类"><a href="#json生成java类" class="headerlink" title="json生成java类"></a>json生成java类</h1><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">http:</span><span class="comment">//www.bejson.com/json2javapojo</span></span><br></pre></td></tr></table></figure><p>json是目前JavaWeb中数据传输的主要格式，很多时候会有把json转成Java对象的需求。有时候合作方会提供一个json的样例，需要我们自己定义Java类，这时候这个工具就派上用场了。</p><p><img src="https://img-blog.csdnimg.cn/20190311104649747.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h1 id="SQL美化-格式化-压缩"><a href="#SQL美化-格式化-压缩" class="headerlink" title="SQL美化/格式化/压缩"></a>SQL美化/格式化/压缩</h1><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//</span>tool.lu<span class="regexp">/sql/</span></span><br></pre></td></tr></table></figure><p>sql在线美化，格式化，压缩：<br><img src="https://img-blog.csdnimg.cn/20190311104721341.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h1 id="编码转换"><a href="#编码转换" class="headerlink" title="编码转换"></a>编码转换</h1><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="regexp">//</span>tool.chinaz.com<span class="regexp">/tools/u</span>nicode.aspx</span><br></pre></td></tr></table></figure><p>站长工具的编码转换比较全面，提供了Unicode编码、UFT8编码、URL编码/解码等功能。<br><img src="https://img-blog.csdnimg.cn/20190311104751609.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h1 id="Corn表达式生成"><a href="#Corn表达式生成" class="headerlink" title="Corn表达式生成"></a>Corn表达式生成</h1><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="regexp">//</span>www.pdtools.net<span class="regexp">/tools/</span>becron.jsp</span><br></pre></td></tr></table></figure><p>Cron 一般用于配置定时任务的执行。</p><p><img src="https://img-blog.csdnimg.cn/20190311104824473.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h1 id="正则验证"><a href="#正则验证" class="headerlink" title="正则验证"></a>正则验证</h1><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">http:</span><span class="comment">//tool.chinaz.com/regex</span></span><br></pre></td></tr></table></figure><p>Java开发对正则表达式肯定不陌生。站长工具提供的正则验证还不错。<br><img src="https://img-blog.csdnimg.cn/20190311104902757.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h1 id="正则代码生成"><a href="#正则代码生成" class="headerlink" title="正则代码生成"></a>正则代码生成</h1><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="regexp">//</span>tool.chinaz.com<span class="regexp">/tools/</span>regexgenerate</span><br></pre></td></tr></table></figure><p>站长工具提供的正则代码生成。可以一键生成身份证号、邮箱、手机号等验证的正则表达式。<br><img src="https://img-blog.csdnimg.cn/20190311104941195.png" alt="在这里插入图片描述"></p><h1 id="时间戳转换"><a href="#时间戳转换" class="headerlink" title="时间戳转换"></a>时间戳转换</h1><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="regexp">//</span>tool.chinaz.com<span class="regexp">/Tools/u</span>nixtime.aspx</span><br></pre></td></tr></table></figure><p>时间戳(英语：Timestamp）是指在一连串的资料中加入辨识文字，如时间或日期，用以保障本地端（local）资料更新顺序与远端（remote）一致。</p><p>Java中很多地方都会用到时间戳，也经常会使用这种转换工具。<br><img src="https://img-blog.csdnimg.cn/20190311105009835.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h1 id="世界时间转换"><a href="#世界时间转换" class="headerlink" title="世界时间转换"></a>世界时间转换</h1><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="regexp">//</span>www.timebie.com<span class="regexp">/cn/</span>easternbeijing.php</span><br></pre></td></tr></table></figure><p>世界各地时间转换，我之前做国际业务的时候，比较常用的是北京时间转纽约时间，北京时间转洛杉矶时间。 timebie提供了世界时间相互转换的功能。<br><img src="https://img-blog.csdnimg.cn/20190311105046966.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h1 id="加密解密"><a href="#加密解密" class="headerlink" title="加密解密"></a>加密解密</h1><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="regexp">//</span>tool.chinaz.com<span class="regexp">/tools/</span>textencrypt.aspx</span><br></pre></td></tr></table></figure><p>加密解密也是JavaWeb可能会经常遇到的，有的时候我们需要验证加密算法是否正确，或者要解密等场景，就需要一个在线工具。<br><img src="https://img-blog.csdnimg.cn/20190311105116593.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h1 id="查看网页源代码"><a href="#查看网页源代码" class="headerlink" title="查看网页源代码"></a>查看网页源代码</h1><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="regexp">//</span>s.tool.chinaz.com<span class="regexp">/tools/</span>pagecode.aspx</span><br></pre></td></tr></table></figure><p>这个工具，可以输入一个网站，直接查看网站的源码。具体有什么用，大家可以发挥各种想象。<br><img src="https://img-blog.csdnimg.cn/20190311105200126.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h1 id="单位换算"><a href="#单位换算" class="headerlink" title="单位换算"></a>单位换算</h1><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">https:</span>//www.convertworld.com/<span class="built_in">zh</span>-hans/</span><br></pre></td></tr></table></figure><p>convertworld是一个比较全的单位换算的网站。我经常用它进行时间单位和货币单位的换算。<br><img src="https://img-blog.csdnimg.cn/20190311105227429.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h1 id="在线调色板"><a href="#在线调色板" class="headerlink" title="在线调色板"></a>在线调色板</h1><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="regexp">//</span>tool.chinaz.com<span class="regexp">/Tools/</span>OnlineColor.aspx</span><br></pre></td></tr></table></figure><p>这个对前端开发比较有用，可以在线调色。<br><img src="https://img-blog.csdnimg.cn/20190311105309971.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h1 id="ASCII-ART生成"><a href="#ASCII-ART生成" class="headerlink" title="ASCII ART生成"></a>ASCII ART生成</h1><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="regexp">//</span>patorjk.com<span class="regexp">/software/</span>taag<span class="regexp">/</span></span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20190311105406891.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h1 id="常用对照表"><a href="#常用对照表" class="headerlink" title="常用对照表"></a>常用对照表</h1><p>ASCII对照表 ： <a href="http://tool.oschina.net/commons?type=4" target="_blank" rel="noopener">http://tool.oschina.net/commons?type=4</a></p><p>HTTP状态码 ： <a href="http://tool.oschina.net/commons?type=5" target="_blank" rel="noopener">http://tool.oschina.net/commons?type=5</a></p><p>HTTP Content-type ： <a href="http://tool.oschina.net/commons" target="_blank" rel="noopener">http://tool.oschina.net/commons</a></p><p>TCP/UDP常见端口参考 ： <a href="http://tool.oschina.net/commons?type=7" target="_blank" rel="noopener">http://tool.oschina.net/commons?type=7</a></p><p>HTML转义字符 ： <a href="http://tool.oschina.net/commons?type=2" target="_blank" rel="noopener">http://tool.oschina.net/commons?type=2</a></p><p>RGB颜色参考 ： <a href="http://tool.oschina.net/commons?type=3" target="_blank" rel="noopener">http://tool.oschina.net/commons?type=3</a></p><p>网页字体参考 ： <a href="http://tool.oschina.net/commons?type=8" target="_blank" rel="noopener">http://tool.oschina.net/commons?type=8</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;转自：&lt;a href=&quot;https://mp.weixin.qq.com/s/AJKA1LYR6TgqGMbsclC6wQ&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://mp.weixin.qq.com/s/AJKA1LYR6TgqGMbs
      
    
    </summary>
    
      <category term="Tool" scheme="https://qijianguo.com/categories/Tool/"/>
    
    
      <category term="tool" scheme="https://qijianguo.com/tags/tool/"/>
    
  </entry>
  
  <entry>
    <title>《EffctiveJava》创建和销毁对象</title>
    <link href="https://qijianguo.com/EffctiveJava%E5%AD%A6%E4%B9%A0/2019/04/17/%E3%80%8AEffctiveJava%E3%80%8B%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1.html"/>
    <id>https://qijianguo.com/EffctiveJava学习/2019/04/17/《EffctiveJava》创建和销毁对象.html</id>
    <published>2019-04-17T06:18:44.169Z</published>
    <updated>2019-04-17T07:49:19.176Z</updated>
    
    <content type="html"><![CDATA[<h1 id="创建和销毁对象"><a href="#创建和销毁对象" class="headerlink" title="创建和销毁对象"></a>创建和销毁对象</h1><h2 id="用静态工厂方法代替构造器"><a href="#用静态工厂方法代替构造器" class="headerlink" title="用静态工厂方法代替构造器"></a>用静态工厂方法代替构造器</h2><p>相比构造器的<strong>优点</strong>：</p><ul><li>有名称：可以更明确方法的功能；</li><li>不必在调用时重复创建实例：使不可变类预先创建实例，或将实例缓存起来，避免重复创建对象，提高性能。</li><li>返回原返回类型的子类型的对象。</li><li>在创建参数化类型实例时，代码更简洁<figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt;&gt; <span class="built_in">map</span> = <span class="literal">new</span> HashMap&lt;<span class="built_in">String</span>, <span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt;&gt;();</span><br><span class="line"><span class="comment">// 用静态工厂方法实现</span></span><br><span class="line"><span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">String</span>&gt; <span class="built_in">map</span> = HashMap.newInstence();</span><br></pre></td></tr></table></figure></li></ul><p>相比构造器的<strong>缺点</strong>：</p><ul><li>类如果不含共有的或者受保护的构造器，将不能被子类化。</li><li>与其他的静态方法没任何区别。<br>静态工厂方法的一些命名习惯<br>– valueOf：类型转换方法<br>– of：更简洁的替代，在EnumSet中使用并流行起来<br>– getInstance：对于Singleton来说，该方法没有参数，只会返回一个实例。<br>– newInstance：与getInstance一样，但newInstance能够确保每个新实例与其他实例不同。<br>– getType：像getInstance一样，返回对象类型<br>– newType：想newInstance一样，返回对象类型</li></ul><p>综上：构造器和静态工厂方法各有优缺点，优先使用静态工厂方法。</p><h2 id="遇到多个构造器参数时要考虑用构建器"><a href="#遇到多个构造器参数时要考虑用构建器" class="headerlink" title="遇到多个构造器参数时要考虑用构建器"></a>遇到多个构造器参数时要考虑用构建器</h2><blockquote><p>Builder模式：利用多个builder构建多个对象。推荐在多参数且参数大多数都是可选的的情况下使用。</p></blockquote><ul><li>优点：易于阅读和编写，比JavaBean更安全。</li><li>缺点：比重叠构造器冗长。</li></ul><p>Builder模式示例：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NutritionFacts</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> servingSize;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> servings;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> colorings;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> fat;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> sodium;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> carbohydrate;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Builder</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 必须的</span></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> servingSize = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> servings = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 非必须的</span></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> colorings = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> fat = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> sodium = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> carbohydrate = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Builder</span><span class="params">(<span class="keyword">int</span> servingSize, <span class="keyword">int</span> servings)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.servings = servings;</span><br><span class="line">            <span class="keyword">this</span>.servingSize = servingSize;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Builder <span class="title">calories</span><span class="params">(<span class="keyword">int</span> colorings)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.colorings = colorings;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Builder <span class="title">carbohydrate</span><span class="params">(<span class="keyword">int</span> carbohydrate)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.carbohydrate = carbohydrate;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Builder <span class="title">sodium</span><span class="params">(<span class="keyword">int</span> sodium)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.sodium = sodium;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Builder <span class="title">fat</span><span class="params">(<span class="keyword">int</span> fat)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.fat = fat;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> NutritionFacts <span class="title">build</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> NutritionFacts(<span class="keyword">this</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">NutritionFacts</span><span class="params">(Builder builder)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.servingSize = builder.servingSize;</span><br><span class="line">        <span class="keyword">this</span>.servings =  builder.servings;</span><br><span class="line">        <span class="keyword">this</span>.colorings =  builder.colorings;</span><br><span class="line">        <span class="keyword">this</span>.fat =  builder.fat;</span><br><span class="line">        <span class="keyword">this</span>.sodium =  builder.sodium;</span><br><span class="line">        <span class="keyword">this</span>.carbohydrate =  builder.carbohydrate;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>调用：</p><figure class="highlight pony"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">NutritionFacts</span> nutritionFacts = <span class="function"><span class="keyword">new</span> <span class="title">NutritionFacts</span>.<span class="title">Builder</span>(<span class="number">1</span>, <span class="number">2</span>)</span></span><br><span class="line"><span class="function">.<span class="title">calories</span>(<span class="number">3</span>).<span class="title">carbohydrate</span>(<span class="number">4</span>).<span class="title">fat</span>(<span class="number">5</span>).<span class="title">sodium</span>(<span class="number">6</span>)</span></span><br><span class="line"><span class="function">               .<span class="title">build</span>();</span></span><br></pre></td></tr></table></figure><h2 id="用私有构造器或枚举类型强化Singleton属性"><a href="#用私有构造器或枚举类型强化Singleton属性" class="headerlink" title="用私有构造器或枚举类型强化Singleton属性"></a>用私有构造器或枚举类型强化Singleton属性</h2><blockquote><p>Singleton是指仅仅被实例化一次的类。Singleton通常被用来表示那些本质上唯一的系统组件，例如窗口管理器或文件系统。</p></blockquote><p>方式一：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Elvis</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Elvis</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 初始化相关操作</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Elvis INSTANCE = <span class="keyword">new</span> Elvis();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">leaveTheBuilding</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>使用：</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Elvis.INSTANCE<span class="comment">;</span></span><br></pre></td></tr></table></figure><p>方式二：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Elvis</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Elvis</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 初始化相关操作</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Elvis INSTANCE = <span class="keyword">new</span> Elvis();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Elvis <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> INSTANCE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用：<br><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Elvis.getInstance()<span class="comment">;</span></span><br></pre></td></tr></table></figure></p><h2 id="通过私有构造器强化不可实例化的能力"><a href="#通过私有构造器强化不可实例化的能力" class="headerlink" title="通过私有构造器强化不可实例化的能力"></a>通过私有构造器强化不可实例化的能力</h2><p>一些工具类不希望被实例化，实例化对它没有任何意义。</p><figure class="highlight zephir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UtilityClass</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 私有构造方法，保证在任何情况下都不会被实例化</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> UtilityClass() &#123;</span><br><span class="line">        <span class="comment">// 防止在当前类调用构造方法</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> AssertionError();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="keyword">empty</span>(String message) &#123;</span><br><span class="line">        <span class="keyword">if</span> (message == <span class="keyword">null</span> || <span class="string">""</span>.equals(message)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">Boolean</span>.<span class="keyword">TRUE</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">Boolean</span>.<span class="keyword">FALSE</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用：</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UtilityClass.empty(<span class="string">"hello Word"</span>)<span class="comment">;</span></span><br></pre></td></tr></table></figure><h2 id="避免创建不必要的对象"><a href="#避免创建不必要的对象" class="headerlink" title="避免创建不必要的对象"></a>避免创建不必要的对象</h2><ul><li>正确使用String<br>反例：</li></ul><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">String</span> s  = <span class="keyword">new</span> <span class="keyword">String</span>(<span class="string">"hello"</span>);<span class="comment">// hello本来就是字符串</span></span><br></pre></td></tr></table></figure><p>正确：</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">String s</span> = <span class="string">"hello"</span>;</span><br></pre></td></tr></table></figure><ul><li>自动装箱<br>优先使用基本类型。</li></ul><h2 id="消除过期的对象引用"><a href="#消除过期的对象引用" class="headerlink" title="消除过期的对象引用"></a>消除过期的对象引用</h2><p>一般而言，只要类是自己管理内存，就应该警惕内存泄漏的问题。</p><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> class Stack &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">Object</span>[] elements;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">int</span> <span class="built_in">size</span> = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="built_in">int</span> DEFAULT_INITIAL_CAPACITY = <span class="number">16</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Stack() &#123;</span><br><span class="line">        elements = <span class="keyword">new</span> <span class="keyword">Object</span>[DEFAULT_INITIAL_CAPACITY];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> push(<span class="keyword">Object</span> e) &#123;</span><br><span class="line">        ensureCapacity();</span><br><span class="line">        elements[<span class="built_in">size</span> ++] = e;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">Object</span> pop() &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">size</span> == <span class="number">0</span>) &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">Object</span> e = elements[--<span class="built_in">size</span>];</span><br><span class="line">        elements[<span class="built_in">size</span>] = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">return</span> e;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> ensureCapacity() &#123;</span><br><span class="line">        <span class="keyword">if</span> (elements.length == <span class="built_in">size</span>) &#123;</span><br><span class="line">            elements = Arrays.copyOf(elements, <span class="number">2</span> * <span class="built_in">size</span>+<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="避免使用终结方法"><a href="#避免使用终结方法" class="headerlink" title="避免使用终结方法"></a>避免使用终结方法</h2><p>try finally</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;创建和销毁对象&quot;&gt;&lt;a href=&quot;#创建和销毁对象&quot; class=&quot;headerlink&quot; title=&quot;创建和销毁对象&quot;&gt;&lt;/a&gt;创建和销毁对象&lt;/h1&gt;&lt;h2 id=&quot;用静态工厂方法代替构造器&quot;&gt;&lt;a href=&quot;#用静态工厂方法代替构造器&quot; class=&quot;
      
    
    </summary>
    
      <category term="EffctiveJava学习" scheme="https://qijianguo.com/categories/EffctiveJava%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="java" scheme="https://qijianguo.com/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>《EffctiveJava》对于所有对象都通用的方法</title>
    <link href="https://qijianguo.com/EffctiveJava%E5%AD%A6%E4%B9%A0/2019/04/17/%E3%80%8AEffctiveJava%E3%80%8B%E5%AF%B9%E4%BA%8E%E6%89%80%E6%9C%89%E5%AF%B9%E8%B1%A1%E9%83%BD%E9%80%9A%E7%94%A8%E7%9A%84%E6%96%B9%E6%B3%95.html"/>
    <id>https://qijianguo.com/EffctiveJava学习/2019/04/17/《EffctiveJava》对于所有对象都通用的方法.html</id>
    <published>2019-04-17T06:18:44.166Z</published>
    <updated>2019-04-17T07:49:00.112Z</updated>
    
    <content type="html"><![CDATA[<h1 id="对于所有对象都通用的方法"><a href="#对于所有对象都通用的方法" class="headerlink" title="对于所有对象都通用的方法"></a>对于所有对象都通用的方法</h1><h2 id="覆盖equals"><a href="#覆盖equals" class="headerlink" title="覆盖equals"></a>覆盖equals</h2><ul><li>不覆盖equals方法，每个类只与他本身相等</li></ul><p>什么时候应该覆盖equals方法呢？</p><ul><li>类具有自己的 “逻辑相等”，通常属于“值类（value class）”，例如Integer和Date，必须覆盖equals方法，而且可以用作映射表（map)的键（key），或者集合（set）的元素。</li><li>有一种“值类”不需要覆盖equals方法，即用实例受控确保“每个值至多只存在一个对象”的类。例如枚举，对于这样的类，逻辑相同与对象相同是一回事，因此Object的equals方法等同于逻辑意义上的equals方法。</li></ul><p>覆盖equals需要注意哪些约定？</p><ul><li>自反性（reflexive）：if  x != null ，x.equals(x) == true；</li><li>对称性（symmetric）：x.equals(y) == y.equals(x)</li><li>传递性（transitive）：x.equals(y), y.equals(z),  则 x.equals(z)</li><li>一致性（consistent）：多次调用x.equals(y),结果都一样</li><li>非空性（Non-Nullity）：对于任何非null的值调用x.equals(null) 结果为false</li></ul><p>高质量的equals诀窍：</p><ul><li>使用==操作符检查“参数是否为这个对象的引用”。如果是，则返回true。</li><li>使用instanceof检查“参数是否为正确的类型”。如果不是，则返回为false。</li><li>把参数转成正确的类型。因为转换之前用instanceof测试，确保会成功。</li><li>对于该类中的关键域，检查参数中的域与该对象中对应的域相匹配。</li><li>编写完equals，检查是否遵循对称，传递，一致性。</li></ul><p>告诫：</p><ul><li>覆盖equals总要覆盖hashCode（hashCode的通用约定）</li><li>不要让equals过于智能（复杂）</li><li>不要将equals声明中的Object对象替换为其他的类型。</li></ul><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="built_in">boolean</span> <span class="keyword">equals</span>(Object o) &#123;</span><br><span class="line"><span class="params">...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 而不是</span></span><br><span class="line"><span class="keyword">public</span> <span class="built_in">boolean</span> <span class="keyword">equals</span>(MyObject o) &#123;</span><br><span class="line"><span class="params">...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="覆盖equals方法总要覆盖hashCode"><a href="#覆盖equals方法总要覆盖hashCode" class="headerlink" title="覆盖equals方法总要覆盖hashCode"></a>覆盖equals方法总要覆盖hashCode</h2><p>覆盖equals方法时不覆盖hashCode，就会违反hashCode的通用约定，从而导致该类无法结合所有基于散列的集合一起正常运作，这样的集合包括HashMap、HashSet和HashTable。</p><h2 id="始终要覆盖toString"><a href="#始终要覆盖toString" class="headerlink" title="始终要覆盖toString"></a>始终要覆盖toString</h2><p>建议所有的子类都覆盖这个方法。</p><h2 id="考虑重写comparable接口"><a href="#考虑重写comparable接口" class="headerlink" title="考虑重写comparable接口"></a>考虑重写comparable接口</h2><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> <span class="keyword"><span class="keyword">implements</span> <span class="type">Comparable</span></span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">String</span> name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> int age;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">String</span> toString() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Person&#123;"</span> +</span><br><span class="line">                <span class="string">"name='"</span> + name + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", age="</span> + age +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> int compareTo(Object o) &#123;</span><br><span class="line">        <span class="keyword">if</span> (o instanceof Person) &#123;</span><br><span class="line">            Person o1 = (Person) o;</span><br><span class="line">            <span class="keyword">return</span> o1.getName().compareTo(name) &gt; <span class="number">0</span> ? <span class="number">1</span> : <span class="type"></span>(o1.getName().compareTo(name) == <span class="number">0</span> ? <span class="number">0</span> : <span class="type">-1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> void main(<span class="keyword">String</span>[] args) &#123;</span><br><span class="line">        List&lt;Person&gt; peoples = <span class="keyword">new</span> <span class="type">ArrayList</span>&lt;Person&gt;(</span><br><span class="line">                Arrays.asList(</span><br><span class="line">                        <span class="keyword">new</span> <span class="type">Person</span>(<span class="string">"a"</span>, <span class="number">1</span>),</span><br><span class="line">                        <span class="keyword">new</span> <span class="type">Person</span>(<span class="string">"b"</span>, <span class="number">2</span>),</span><br><span class="line">                        <span class="keyword">new</span> <span class="type">Person</span>(<span class="string">"a"</span>, <span class="number">1</span>),</span><br><span class="line">                        <span class="keyword">new</span> <span class="type">Person</span>(<span class="string">"d"</span>, <span class="number">3</span>),</span><br><span class="line">                        <span class="keyword">new</span> <span class="type">Person</span>(<span class="string">"f"</span>, <span class="number">5</span>))</span><br><span class="line">        );</span><br><span class="line">        Collections.sort(peoples);</span><br><span class="line">        peoples.forEach(people -&gt; System.out.println(people));</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>输出<br><img src="https://img-blog.csdnimg.cn/20190328150632161.png" alt="在这里插入图片描述"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;对于所有对象都通用的方法&quot;&gt;&lt;a href=&quot;#对于所有对象都通用的方法&quot; class=&quot;headerlink&quot; title=&quot;对于所有对象都通用的方法&quot;&gt;&lt;/a&gt;对于所有对象都通用的方法&lt;/h1&gt;&lt;h2 id=&quot;覆盖equals&quot;&gt;&lt;a href=&quot;#覆盖equ
      
    
    </summary>
    
      <category term="EffctiveJava学习" scheme="https://qijianguo.com/categories/EffctiveJava%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="java" scheme="https://qijianguo.com/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>Spring boot 实现Web Service</title>
    <link href="https://qijianguo.com/Java/2019/04/17/Spring%20boot%20%E5%AE%9E%E7%8E%B0Web%20Service.html"/>
    <id>https://qijianguo.com/Java/2019/04/17/Spring boot 实现Web Service.html</id>
    <published>2019-04-17T06:18:44.163Z</published>
    <updated>2019-04-17T07:46:50.695Z</updated>
    
    <content type="html"><![CDATA[<p>@<a href="Spring boot 实现Web Service">TOC</a></p><h1 id="为什么要用Web-service？"><a href="#为什么要用Web-service？" class="headerlink" title="为什么要用Web service？"></a>为什么要用Web service？</h1><p>最近公司跟其他公司有个数据对接，按照对方的传输方式来做，用的是<strong>web service</strong>方式，数据包格式为<strong>xml</strong>，业务需要双向通信，即我能发送给对方，对方也会发送给我。另外，用的是比较流行的spring boot，不了解的可以自行谷歌。</p><h1 id="什么是Web-service？"><a href="#什么是Web-service？" class="headerlink" title="什么是Web service？"></a>什么是Web service？</h1><p><a href="https://baike.baidu.com/item/Web%20Service/1215039" target="_blank" rel="noopener">百度百科</a>：Web service是一个平台独立的，低耦合的，自包含的、基于可编程的web的应用程序，可使用开放的XML（标准通用标记语言下的一个子集）标准来描述、发布、发现、协调和配置这些应用程序，用于开发分布式的互操作的应用程序。 Web Service技术， 能使得运行在不同机器上的不同应用无须借助附加的、专门的第三方软件或硬件， 就可相互交换数据或集成。依据Web Service规范实施的应用之间， 无论它们所使用的语言、 平台或内部协议是什么， 都可以相互交换数据。Web Service是自描述、 自包含的可用网络模块， 可以执行具体的业务功能。Web Service也很容易部署， 因为它们基于一些常规的产业标准以及已有的一些技术，诸如标准通用标记语言下的子集XML、HTTP。Web Service减少了应用接口的花费。Web Service为整个企业甚至多个组织之间的业务流程的集成提供了一个通用机制。</p><h1 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h1><p>省略spring boot项目搭建</p><h2 id="相关依赖"><a href="#相关依赖" class="headerlink" title="相关依赖"></a>相关依赖</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web-services<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.cxf<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>cxf-spring-boot-starter-jaxws<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.axis/axis --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.axis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>axis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/javax.xml.rpc/javax.xml.rpc-api --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.xml.rpc<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.xml.rpc-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><p>刚出差回来，太累了，改天补全！(着急的话首页加我微信，我给你讲解)</p><p>项目地址：<a href="https://github.com/qijianguo/webservice" target="_blank" rel="noopener">https://github.com/qijianguo/webservice</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;@&lt;a href=&quot;Spring boot 实现Web Service&quot;&gt;TOC&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;为什么要用Web-service？&quot;&gt;&lt;a href=&quot;#为什么要用Web-service？&quot; class=&quot;headerlink&quot; title=&quot;为什么要用W
      
    
    </summary>
    
      <category term="Java" scheme="https://qijianguo.com/categories/Java/"/>
    
    
      <category term="java, springboot" scheme="https://qijianguo.com/tags/java-springboot/"/>
    
  </entry>
  
  <entry>
    <title>Windows 关闭端口号</title>
    <link href="https://qijianguo.com/winsw/2019/04/17/Windows%20%E5%85%B3%E9%97%AD%E7%AB%AF%E5%8F%A3%E5%8F%B7.html"/>
    <id>https://qijianguo.com/winsw/2019/04/17/Windows 关闭端口号.html</id>
    <published>2019-04-17T06:18:44.161Z</published>
    <updated>2019-04-17T07:47:29.330Z</updated>
    
    <content type="html"><![CDATA[<p>查询端口号占用的进程</p><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">C:</span>\Users\Administrator&gt;netstat -ano | findstr <span class="number">8080</span></span><br><span class="line">  TCP    <span class="number">0.0</span><span class="meta">.0</span><span class="meta">.0</span>:<span class="number">8080</span>           <span class="number">0.0</span><span class="meta">.0</span><span class="meta">.0</span>:<span class="number">0</span>              LISTENING       <span class="number">9172</span></span><br><span class="line">  TCP    <span class="number">192.168</span><span class="meta">.1</span><span class="meta">.160</span>:<span class="number">60855</span>    <span class="number">47.92</span><span class="meta">.114</span><span class="meta">.119</span>:<span class="number">8080</span>     ESTABLISHED     <span class="number">9172</span></span><br><span class="line">  TCP    [::]:<span class="number">8080</span>              [::]:<span class="number">0</span>                 LISTENING       <span class="number">9172</span></span><br></pre></td></tr></table></figure><p>9172就是进程号</p><p>关闭进程<br><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">C:\Users\Administrator&gt;taskkill -PID 9172 -F</span></span><br><span class="line"><span class="section">成功: 已终止 PID 为 9172 的进程。</span></span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;查询端口号占用的进程&lt;/p&gt;
&lt;figure class=&quot;highlight x86asm&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/s
      
    
    </summary>
    
      <category term="winsw" scheme="https://qijianguo.com/categories/winsw/"/>
    
    
      <category term="winsw" scheme="https://qijianguo.com/tags/winsw/"/>
    
  </entry>
  
  <entry>
    <title>MySQL慢查询日志总结</title>
    <link href="https://qijianguo.com/MySQL/2019/04/17/MySQL%E6%85%A2%E6%9F%A5%E8%AF%A2%E6%97%A5%E5%BF%97%E6%80%BB%E7%BB%93.html"/>
    <id>https://qijianguo.com/MySQL/2019/04/17/MySQL慢查询日志总结.html</id>
    <published>2019-04-17T06:18:44.158Z</published>
    <updated>2019-04-17T07:46:21.347Z</updated>
    
    <content type="html"><![CDATA[<p>转自： <a href="https://www.cnblogs.com/saneri/p/6656161.html" target="_blank" rel="noopener">https://www.cnblogs.com/saneri/p/6656161.html</a></p><h2 id="慢查询日志概念"><a href="#慢查询日志概念" class="headerlink" title="慢查询日志概念"></a>慢查询日志概念</h2><p>MySQL的慢查询日志是MySQL提供的一种日志记录，它用来记录在MySQL中响应时间超过阀值的语句，具体指运行时间超过long_query_time值的SQL，则会被记录到慢查询日志中。long_query_time的默认值为10，意思是运行10S以上的语句。默认情况下，Mysql数据库并不启动慢查询日志，需要我们手动来设置这个参数，当然，如果不是调优需要的话，一般不建议启动该参数，因为开启慢查询日志会或多或少带来一定的性能影响。慢查询日志支持将日志记录写入文件，也支持将日志记录写入数据库表。</p><h2 id="慢查询日志相关参数"><a href="#慢查询日志相关参数" class="headerlink" title="慢查询日志相关参数"></a>慢查询日志相关参数</h2><p>MySQL 慢查询的相关参数解释：slow_query_log ：是否开启慢查询日志，1表示开启，0表示关闭。</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">slow_query_log    ：是否开启慢查询日志，1表示开启，0表示关闭。</span><br><span class="line"><span class="keyword">log</span>-slow-queries  ：旧版（5.6以下版本）MySQL数据库慢查询日志存储路径。可以不设置该参数，系统则会默认给一个缺省的文件host_name-slow.<span class="built_in">log</span></span><br><span class="line">slow-<span class="keyword">query</span>-<span class="keyword">log</span>-<span class="keyword">file</span>：新版（5.6及以上版本）MySQL数据库慢查询日志存储路径。可以不设置该参数，系统则会默认给一个缺省的文件host_name-slow.<span class="built_in">log</span></span><br><span class="line">long_query_time ：慢查询阈值，当查询时间多于设定的阈值时，记录日志。</span><br><span class="line">log_queries_not_using_indexes：未使用索引的查询也被记录到慢查询日志中（可选项）。</span><br><span class="line">log_output：日志存储方式。log_output='<span class="keyword">FILE</span>'表示将日志存入文件，默认值是'<span class="keyword">FILE</span>'。log_output='<span class="keyword">TABLE</span>'表示将日志存入数据库，这样日志信息就会被写入到mysql.slow_log表中。MySQL数据&lt;<span class="keyword">br</span>&gt;库支持同时两种日志存储方式，配置的时候以逗号隔开即可，如：log_output='<span class="keyword">FILE</span>,<span class="keyword">TABLE</span>'。日志记录到系统的专用日志表中，要比记录到文件耗费更多的系统资源，因此对于需要启用慢查询日志，又需&lt;<span class="keyword">br</span>&gt;要能够获得更高的系统性能，那么建议优先记录到文件。</span><br></pre></td></tr></table></figure><h2 id="慢查询日志配置"><a href="#慢查询日志配置" class="headerlink" title="慢查询日志配置"></a>慢查询日志配置</h2><p>默认情况下slow_query_log的值为OFF，表示慢查询日志是禁用的，可以通过设置slow_query_log的值来开启，如下所示：</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like <span class="emphasis">'%slow_query_log%'</span>;</span><br><span class="line"><span class="code">+---------------------+</span>------------------------------------------+</span><br><span class="line">| Variable<span class="emphasis">_name       | Value                                    |</span></span><br><span class="line"><span class="emphasis">+---------------------+------------------------------------------+</span></span><br><span class="line"><span class="emphasis">| slow_</span>query<span class="emphasis">_log      | OFF                                      |</span></span><br><span class="line"><span class="emphasis">| slow_</span>query<span class="emphasis">_log_</span>file | /usr/local/mysql/data/localhost-slow.log |</span><br><span class="line"><span class="code">+---------------------+</span>------------------------------------------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br><span class="line"><span class="code"> </span></span><br><span class="line">mysql&gt; set global slow<span class="emphasis">_query_</span>log=1;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"><span class="code"> </span></span><br><span class="line">mysql&gt; show variables like <span class="emphasis">'%slow_query_log%'</span>;</span><br><span class="line"><span class="code">+---------------------+</span>------------------------------------------+</span><br><span class="line">| Variable<span class="emphasis">_name       | Value                                    |</span></span><br><span class="line"><span class="emphasis">+---------------------+------------------------------------------+</span></span><br><span class="line"><span class="emphasis">| slow_</span>query<span class="emphasis">_log      | ON                                       |</span></span><br><span class="line"><span class="emphasis">| slow_</span>query<span class="emphasis">_log_</span>file | /usr/local/mysql/data/localhost-slow.log |</span><br><span class="line"><span class="code">+---------------------+</span>------------------------------------------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br><span class="line">#使用set global slow<span class="emphasis">_query_</span>log=1开启了慢查询日志只对当前数据库生效，MySQL重启后则会失效。如果要永久生效，就必须修改配置文件my.cnf（其它系统变量也是如此）</span><br></pre></td></tr></table></figure><p>修改my.cnf文件，增加或修改参数slow_query_log 和slow_query_log_file后，然后重启MySQL服务器，如下所示:</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">slow<span class="emphasis">_query_</span>log =1</span><br><span class="line">slow<span class="emphasis">_query_</span>log<span class="emphasis">_file=/usr/local/mysql/data/localhost-slow.log</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">mysql&gt; show variables like 'slow_</span>query%<span class="emphasis">';</span></span><br><span class="line"><span class="emphasis">+---------------------+---------------------+</span></span><br><span class="line"><span class="emphasis">| Variable_name       | Value               |</span></span><br><span class="line"><span class="emphasis">+---------------------+---------------------+</span></span><br><span class="line"><span class="emphasis">| slow_query_log      | ON                  |</span></span><br><span class="line"><span class="emphasis">| slow_query_log_file | /usr/local/mysql/data/localhost-slow.log |</span></span><br><span class="line"><span class="emphasis">+---------------------+---------------------+</span></span><br><span class="line"><span class="emphasis">rows in set (0.00 sec)</span></span><br><span class="line"><span class="emphasis"> </span></span><br><span class="line"><span class="emphasis">mysql&gt; </span></span><br><span class="line"><span class="emphasis">#慢查询的参数slow_query_log_file ，它指定慢查询日志文件的存放路径，系统默认会给一个缺省的文件host_name-slow.log</span></span><br></pre></td></tr></table></figure><p>  那么开启了慢查询日志后，什么样的SQL才会记录到慢查询日志里面呢？ 这个是由参数long_query_time控制，默认情况下long_query_time的值为10秒，可以使用命令修改，也可以在my.cnf参数里面修改。关于运行时间正好等于long_query_time的情况，并不会被记录下来。也就是说，在mysql源码里是判断大于long_query_time，而非大于等于。从MySQL 5.1开始，long_query_time开始以微秒记录SQL语句运行时间，之前仅用秒为单位记录。如果记录到表里面，只会记录整数部分，不会记录微秒部分。</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like <span class="emphasis">'long_query_time'</span>;</span><br><span class="line"><span class="code">+-----------------+</span>-----------+</span><br><span class="line">| Variable<span class="emphasis">_name   | Value     |</span></span><br><span class="line"><span class="emphasis">+-----------------+-----------+</span></span><br><span class="line"><span class="emphasis">| long_</span>query<span class="emphasis">_time | 10.000000 |</span></span><br><span class="line"><span class="emphasis">+-----------------+-----------+</span></span><br><span class="line"><span class="emphasis">1 row in set (0.00 sec)</span></span><br><span class="line"><span class="emphasis"> </span></span><br><span class="line"><span class="emphasis">mysql&gt;</span></span><br><span class="line"><span class="emphasis">mysql&gt; set global long_</span>query<span class="emphasis">_time=4;</span></span><br><span class="line"><span class="emphasis">Query OK, 0 rows affected (0.00 sec)</span></span><br><span class="line"><span class="emphasis"> </span></span><br><span class="line"><span class="emphasis">mysql&gt; show variables like 'long_</span>query<span class="emphasis">_time';</span></span><br><span class="line"><span class="emphasis">+-----------------+-----------+</span></span><br><span class="line"><span class="emphasis">| Variable_</span>name   | Value     |</span><br><span class="line"><span class="code">+-----------------+</span>-----------+</span><br><span class="line">| long<span class="emphasis">_query_</span>time | 10.000000 |</span><br><span class="line"><span class="code">+-----------------+</span>-----------+</span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"><span class="code"> </span></span><br><span class="line">mysql&gt;</span><br></pre></td></tr></table></figure><p>  如上所示，我修改了变量long_query_time，但是查询变量long_query_time的值还是10，难道没有修改到呢？注意：使用命令 set global long_query_time=4修改后，需要重新连接或新开一个会话才能看到修改值。你用show variables like ‘long_query_time’查看是当前会话的变量值，你也可以不用重新连接会话，而是用show global variables like ‘long_query_time’; 如下所示：　</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like <span class="emphasis">'long_query_time'</span>;</span><br><span class="line"><span class="code">+-----------------+</span>-----------+</span><br><span class="line">| Variable<span class="emphasis">_name   | Value     |</span></span><br><span class="line"><span class="emphasis">+-----------------+-----------+</span></span><br><span class="line"><span class="emphasis">| long_</span>query<span class="emphasis">_time | 10.000000 |</span></span><br><span class="line"><span class="emphasis">+-----------------+-----------+</span></span><br><span class="line"><span class="emphasis">row in set (0.00 sec)</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">mysql&gt; </span></span><br><span class="line"><span class="emphasis">mysql&gt; show global variables like 'long_</span>query<span class="emphasis">_time';</span></span><br><span class="line"><span class="emphasis">+-----------------+----------+</span></span><br><span class="line"><span class="emphasis">| Variable_</span>name   | Value    |</span><br><span class="line"><span class="code">+-----------------+</span>----------+</span><br><span class="line">| long<span class="emphasis">_query_</span>time | 4.000000 |</span><br><span class="line"><span class="code">+-----------------+</span>----------+</span><br><span class="line">row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt;</span><br></pre></td></tr></table></figure><p>log_output 参数是指定日志的存储方式。log_output=’FILE’表示将日志存入文件，默认值是’FILE’。log_output=’TABLE’表示将日志存入数据库，这样日志信息就会被写入到mysql.slow_log表中。MySQL数据库支持同时两种日志存储方式，配置的时候以逗号隔开即可，如：log_output=’FILE,TABLE’。日志记录到系统的专用日志表中，要比记录到文件耗费更多的系统资源，因此对于需要启用慢查询日志，又需要能够获得更高的系统性能，那么建议优先记录到文件.</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like <span class="emphasis">'%log_output%'</span>;</span><br><span class="line"><span class="code">+---------------+</span>-------+</span><br><span class="line">| Variable<span class="emphasis">_name | Value |</span></span><br><span class="line"><span class="emphasis">+---------------+-------+</span></span><br><span class="line"><span class="emphasis">| log_</span>output    | TABLE |</span><br><span class="line"><span class="code">+---------------+</span>-------+</span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"><span class="code"> </span></span><br><span class="line">mysql&gt;</span><br></pre></td></tr></table></figure><p>系统变量log-queries-not-using-indexes：未使用索引的查询也被记录到慢查询日志中（可选项）。如果调优的话，建议开启这个选项。另外，开启了这个参数，其实使用full index scan的sql也会被记录到慢查询日志。</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like <span class="emphasis">'log_queries_not_using_indexes'</span>;</span><br><span class="line"><span class="code">+-------------------------------+</span>-------+</span><br><span class="line">| Variable<span class="emphasis">_name                 | Value |</span></span><br><span class="line"><span class="emphasis">+-------------------------------+-------+</span></span><br><span class="line"><span class="emphasis">| log_</span>queries<span class="emphasis">_not_</span>using<span class="emphasis">_indexes | OFF   |</span></span><br><span class="line"><span class="emphasis">+-------------------------------+-------+</span></span><br><span class="line"><span class="emphasis">1 row in set (0.00 sec)</span></span><br><span class="line"><span class="emphasis">  </span></span><br><span class="line"><span class="emphasis">mysql&gt; set global log_</span>queries<span class="emphasis">_not_</span>using<span class="emphasis">_indexes=1;</span></span><br><span class="line"><span class="emphasis">Query OK, 0 rows affected (0.00 sec)</span></span><br><span class="line"><span class="emphasis">  </span></span><br><span class="line"><span class="emphasis">mysql&gt; show variables like 'log_</span>queries<span class="emphasis">_not_</span>using<span class="emphasis">_indexes';</span></span><br><span class="line"><span class="emphasis">+-------------------------------+-------+</span></span><br><span class="line"><span class="emphasis">| Variable_</span>name                 | Value |</span><br><span class="line"><span class="code">+-------------------------------+</span>-------+</span><br><span class="line">| log<span class="emphasis">_queries_</span>not<span class="emphasis">_using_</span>indexes | ON    |</span><br><span class="line"><span class="code">+-------------------------------+</span>-------+</span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"><span class="code">  </span></span><br><span class="line">mysql&gt;</span><br></pre></td></tr></table></figure><p>系统变量log_slow_admin_statements表示是否将慢管理语句例如ANALYZE TABLE和ALTER TABLE等记入慢查询日志</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like <span class="emphasis">'log_slow_admin_statements'</span>;</span><br><span class="line"><span class="code">+---------------------------+</span>-------+</span><br><span class="line">| Variable<span class="emphasis">_name             | Value |</span></span><br><span class="line"><span class="emphasis">+---------------------------+-------+</span></span><br><span class="line"><span class="emphasis">| log_</span>slow<span class="emphasis">_admin_</span>statements | OFF   |</span><br><span class="line"><span class="code">+---------------------------+</span>-------+</span><br><span class="line">row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt;</span><br></pre></td></tr></table></figure><p>另外，如果你想查询有多少条慢查询记录，可以使用系统变量。</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show global status like <span class="emphasis">'%slow_queries%'</span>;</span><br><span class="line"><span class="code">+---------------+</span>-------+</span><br><span class="line">| Variable<span class="emphasis">_name | Value |</span></span><br><span class="line"><span class="emphasis">+---------------+-------+</span></span><br><span class="line"><span class="emphasis">| Slow_</span>queries  | 0     |</span><br><span class="line"><span class="code">+---------------+</span>-------+</span><br><span class="line">row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt;</span><br></pre></td></tr></table></figure><h2 id="日志分析工具mysqldumpslow"><a href="#日志分析工具mysqldumpslow" class="headerlink" title="日志分析工具mysqldumpslow"></a>日志分析工具mysqldumpslow</h2><p>在实际生产环境中，如果要手工分析日志，查找、分析SQL，显然是个体力活，MySQL提供了日志分析工具mysqldumpslow</p><p>查看mysqldumpslow的帮助信息：</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost~]<span class="comment"># mysqldumpslow --help</span></span><br><span class="line">Usage: mysqldumpslow [ OPTS... ] [ LOGS... ]</span><br><span class="line"></span><br><span class="line">Parse <span class="keyword">and</span> <span class="built_in">summarize</span> <span class="keyword">the</span> MySQL slow query <span class="built_in">log</span>. Options are</span><br><span class="line"></span><br><span class="line">  <span class="comment">--verbose    verbose</span></span><br><span class="line">  <span class="comment">--debug      debug</span></span><br><span class="line">  <span class="comment">--help       write this text to standard output</span></span><br><span class="line"></span><br><span class="line">  -v           verbose</span><br><span class="line">  -d           debug</span><br><span class="line">  -s ORDER     what <span class="keyword">to</span> sort <span class="keyword">by</span> (al, <span class="keyword">at</span>, ar, c, l, r, t), '<span class="keyword">at</span>' <span class="keyword">is</span> default</span><br><span class="line">                al: average lock <span class="built_in">time</span></span><br><span class="line">                ar: average rows sent</span><br><span class="line">                <span class="keyword">at</span>: average query <span class="built_in">time</span></span><br><span class="line">                 c: <span class="built_in">count</span></span><br><span class="line">                 l: lock <span class="built_in">time</span></span><br><span class="line">                 r: rows sent</span><br><span class="line">                 t: query <span class="built_in">time</span>  </span><br><span class="line">  -r           <span class="built_in">reverse</span> <span class="keyword">the</span> sort order (largest <span class="keyword">last</span> <span class="keyword">instead of</span> <span class="keyword">first</span>)</span><br><span class="line">  -t NUM       just show <span class="keyword">the</span> top n queries</span><br><span class="line">  -a           don't abstract all numbers <span class="keyword">to</span> N <span class="keyword">and</span> strings <span class="keyword">to</span> 'S'</span><br><span class="line">  -n NUM       abstract numbers <span class="keyword">with</span> <span class="keyword">at</span> least n digits within names</span><br><span class="line">  -g PATTERN   grep: only consider stmts <span class="keyword">that</span> include this <span class="built_in">string</span></span><br><span class="line">  -h HOSTNAME  hostname <span class="keyword">of</span> db server <span class="keyword">for</span> *-slow.<span class="built_in">log</span> filename (can be wildcard),</span><br><span class="line">               default <span class="keyword">is</span> '*', i.e. match all</span><br><span class="line">  -i NAME      <span class="built_in">name</span> <span class="keyword">of</span> server instance (<span class="keyword">if</span> using mysql.server startup <span class="keyword">script</span>)</span><br><span class="line">  -l           don't subtract lock <span class="built_in">time</span> <span class="keyword">from</span> total <span class="built_in">time</span></span><br><span class="line"></span><br><span class="line">mysqldumpslow <span class="comment">--help</span></span><br></pre></td></tr></table></figure><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">-s, 是表示按照何种方式排序</span><br><span class="line"><span class="symbol">    c:</span> 访问计数</span><br><span class="line"> </span><br><span class="line"><span class="symbol">    l:</span> 锁定时间</span><br><span class="line"> </span><br><span class="line"><span class="symbol">    r:</span> 返回记录</span><br><span class="line"> </span><br><span class="line"><span class="symbol">    t:</span> 查询时间</span><br><span class="line"> </span><br><span class="line"><span class="symbol">    al:</span>平均锁定时间</span><br><span class="line"> </span><br><span class="line"><span class="symbol">    ar:</span>平均返回记录数</span><br><span class="line"> </span><br><span class="line"><span class="symbol">    at:</span>平均查询时间</span><br><span class="line"> </span><br><span class="line">-t, 是top n的意思，即为返回前面多少条的数据；</span><br><span class="line">-g, 后边可以写一个正则匹配模式，大小写不敏感的；</span><br><span class="line"> </span><br><span class="line">比如:</span><br><span class="line">得到返回记录集最多的<span class="number">10</span>个SQL。</span><br><span class="line">mysqldumpslow -s r -t <span class="number">10</span> <span class="meta-keyword">/database/</span>mysql/mysql06_slow.log</span><br><span class="line"> </span><br><span class="line">得到访问次数最多的<span class="number">10</span>个SQL</span><br><span class="line">mysqldumpslow -s c -t <span class="number">10</span> <span class="meta-keyword">/database/</span>mysql/mysql06_slow.log</span><br><span class="line"> </span><br><span class="line">得到按照时间排序的前<span class="number">10</span>条里面含有左连接的查询语句。</span><br><span class="line">mysqldumpslow -s t -t <span class="number">10</span> -g “left join” <span class="meta-keyword">/database/</span>mysql/mysql06_slow.log</span><br><span class="line"> </span><br><span class="line">另外建议在使用这些命令时结合 | 和more 使用 ，否则有可能出现刷屏的情况。</span><br><span class="line">mysqldumpslow -s r -t <span class="number">20</span> <span class="meta-keyword">/mysqldata/</span>mysql/mysql06-slow.log | more</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;转自： &lt;a href=&quot;https://www.cnblogs.com/saneri/p/6656161.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://www.cnblogs.com/saneri/p/6656161.html&lt;
      
    
    </summary>
    
      <category term="MySQL" scheme="https://qijianguo.com/categories/MySQL/"/>
    
    
      <category term="mysql" scheme="https://qijianguo.com/tags/mysql/"/>
    
  </entry>
  
  <entry>
    <title>Kafka总结</title>
    <link href="https://qijianguo.com/Kafka/2019/04/17/Kafka%E6%80%BB%E7%BB%93.html"/>
    <id>https://qijianguo.com/Kafka/2019/04/17/Kafka总结.html</id>
    <published>2019-04-17T06:18:44.154Z</published>
    <updated>2019-04-17T07:45:52.635Z</updated>
    
    <content type="html"><![CDATA[<h3 id="什么是Kafka"><a href="#什么是Kafka" class="headerlink" title="什么是Kafka"></a>什么是Kafka</h3><p>由LinkedIn在11年开源，还有例如：分布式数据同步系统Databus、高性能计算引擎Cubert、Java异步处理框架ParSeq。 </p><p>![* streaming platform has three key capabilities:</p><pre><code>* Publish and subscribe to streams of records, similar to a message queue or enterprise messaging system.* Store streams of records in a fault-tolerant durable way.* Process streams of records as they occur.](https://img-blog.csdnimg.cn/20190331203053858.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70)</code></pre><p><img src="https://img-blog.csdnimg.cn/20190331203206419.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h2 id="Kafka基本概念"><a href="#Kafka基本概念" class="headerlink" title="Kafka基本概念"></a>Kafka基本概念</h2><ul><li>Producer：消息和数据的生产者，向Kafka的一个topic发布消息的进程/代码/服务</li><li>Consumer：消息和数据的消费者，订阅数据（Topic）并且处理其发布的消息的进程/代码/服务。</li><li>Consumer Group：逻辑概念，对于同一个topic，会广播给不同的group，一个group中，只有一个consumer可以消费该消息。</li><li>Broker：物理概念，Kafka集群中的每个Kafka节点。</li><li>Topic：逻辑概念，Kafka消息的类别，对数据进行区分、隔离。</li><li>Partition：物理概念，Kafka下数据存储的基本单元。一个Topic数据会被分散存储到多个Partition，每个Partition是有序的。</li><li>Replication：同一个Partition可能会有多个Replica，多个Replica之间数据是一样的。</li><li>Replication Leader：一个Partition的多个Replica上，需要个Leader负责该Partition上与Producer和Consumer交互，Leader有且只有一个。</li><li>ReplicaManager：负责管理当前broker所有分区和副本的信息，处理KafkaController发起的一些请求，副本状态的切换、添加/读取消息等。</li></ul><h2 id="Kafka基本结构"><a href="#Kafka基本结构" class="headerlink" title="Kafka基本结构"></a>Kafka基本结构</h2><p><img src="https://img-blog.csdnimg.cn/20190331210155617.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt=" "><br><img src="https://img-blog.csdnimg.cn/20190331210315693.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h2 id="Kafka消息结构"><a href="#Kafka消息结构" class="headerlink" title="Kafka消息结构"></a>Kafka消息结构</h2><p><img src="https://img-blog.csdnimg.cn/20190331210426387.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h2 id="Kafka的特点"><a href="#Kafka的特点" class="headerlink" title="Kafka的特点"></a>Kafka的特点</h2><p>分布式</p><ul><li>多分区</li><li>多副本</li><li>多订阅者</li><li>基于Zookeeper消息调度</li></ul><p>高性能</p><ul><li>高吞吐量</li><li>低延迟</li><li>高并发</li><li>时间复杂度为O(1)</li></ul><p>持久性与扩展性</p><ul><li>数据可持久化</li><li>容错性</li><li>支持在线水平扩展</li><li>消息自动平衡</li></ul><h2 id="Kafka应用场景"><a href="#Kafka应用场景" class="headerlink" title="Kafka应用场景"></a>Kafka应用场景</h2><ul><li>消息队列</li><li>行为跟踪</li><li>元信息监控</li><li>日志收集</li><li>流处理</li><li>事件源</li><li>持久性日志（commit log）</li></ul><h2 id="Kafka应用案例"><a href="#Kafka应用案例" class="headerlink" title="Kafka应用案例"></a>Kafka应用案例</h2><h2 id="Kafka代码案例"><a href="#Kafka代码案例" class="headerlink" title="Kafka代码案例"></a>Kafka代码案例</h2><h2 id="Kafka高级特性之消息事务"><a href="#Kafka高级特性之消息事务" class="headerlink" title="Kafka高级特性之消息事务"></a>Kafka高级特性之消息事务</h2><h2 id="Kafka高级特性之零拷贝"><a href="#Kafka高级特性之零拷贝" class="headerlink" title="Kafka高级特性之零拷贝"></a>Kafka高级特性之零拷贝</h2>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;什么是Kafka&quot;&gt;&lt;a href=&quot;#什么是Kafka&quot; class=&quot;headerlink&quot; title=&quot;什么是Kafka&quot;&gt;&lt;/a&gt;什么是Kafka&lt;/h3&gt;&lt;p&gt;由LinkedIn在11年开源，还有例如：分布式数据同步系统Databus、高性能计算引擎C
      
    
    </summary>
    
      <category term="Kafka" scheme="https://qijianguo.com/categories/Kafka/"/>
    
    
      <category term="kafka" scheme="https://qijianguo.com/tags/kafka/"/>
    
  </entry>
  
  <entry>
    <title>Springboot JPA 实体类添加@Transient</title>
    <link href="https://qijianguo.com/Java/2019/04/17/Springboot%20JPA%20%E5%AE%9E%E4%BD%93%E7%B1%BB%E6%B7%BB%E5%8A%A0@Transient.html"/>
    <id>https://qijianguo.com/Java/2019/04/17/Springboot JPA 实体类添加@Transient.html</id>
    <published>2019-04-17T06:18:14.623Z</published>
    <updated>2019-04-17T07:46:57.458Z</updated>
    
    <content type="html"><![CDATA[<ul><li><p>Hibernate</p><blockquote><p>在实体类与数据库表建立映射关系时添加 <strong><em>@Table</em></strong> 注解, 当表中不存在实体类中的某个属性的时候, 就需要用到 <strong>@Transient</strong> 注解</p></blockquote></li><li><p>用法: 添加在需要忽略的实体类属性上</p><blockquote><p><strong><em>@Transient</em></strong><br> private String columeName;</p></blockquote></li><li><p>实体类</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.<span class="keyword">annotation</span>.JsonIgnore;</span><br><span class="line"><span class="keyword">import</span> jdk.nashorn.<span class="keyword">internal</span>.ir.annotations.Ignore;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@lombok</span>.Data</span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserMonitorStationMapping</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> Integer monitorStationId;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Transient</span></span><br><span class="line">    <span class="keyword">private</span> String shortName;        <span class="comment">// TODO 数据库表中无此字段</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@ManyToOne</span></span><br><span class="line">    <span class="meta">@JsonIgnore</span></span><br><span class="line">    <span class="keyword">private</span> User user;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>数据库表结构<br><img src="https://img-blog.csdn.net/20180720163211969?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述"></p></li></ul><blockquote><p>org.hibernate.exception.SQLGrammarException: could not extract ResultSet<br>at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:82)<br>at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter<br>.java:49)at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:124)<br>at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)<br>at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.extract(ResultSetReturnImpl.java:88)<br>at org.hibernate.loader.Loader.getResultSet(Loader.java:2062)<br>at org.hibernate.loader.Loader.executeQueryStatement(Loader.java:1859)<br>at org.hibernate.loader.Loader.executeQueryStatement(Loader.java:1838)<br>at org.hibernate.loader.Loader.doQuery(Loader.java:906)<br>at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:348)<br>at org.hibernate.loader.Loader.doList(Loader.java:2550)<br>at org.hibernate.loader.Loader.doList(Loader.java:2536)<br>at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2366)<br>at org.hibernate.loader.Loader.list(Loader.java:2361)<br>at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:495)<br>at org.hibernate.hql.internal.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:357)<br>at org.hibernate.engine.query.spi.HQLQueryPlan.performList(HQLQueryPlan.java:198)<br>at org.hibernate.internal.SessionImpl.list(SessionImpl.java:1230)<br>at org.hibernate.internal.QueryImpl.list(QueryImpl.java:101)<br>at com.bbs.dao.BaseDao.list(BaseDao.java:82)<br>at com.bbs.dao.BaseDao.list(BaseDao.java:92)<br>at com.bbs.service.impl.OrderServiceImpl.selectOrdersByOne(OrderServiceImpl.java:35)<br>at com.bbs.service.impl.OrderServiceImpl</p></blockquote><ul><li>解决方法<blockquote><p>在实体类上添加 <strong><em>@Transient</em></strong> 注解</p></blockquote></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ul&gt;
&lt;li&gt;&lt;p&gt;Hibernate&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;在实体类与数据库表建立映射关系时添加 &lt;strong&gt;&lt;em&gt;@Table&lt;/em&gt;&lt;/strong&gt; 注解, 当表中不存在实体类中的某个属性的时候, 就需要用到 &lt;strong&gt;@Transie
      
    
    </summary>
    
      <category term="Java" scheme="https://qijianguo.com/categories/Java/"/>
    
    
      <category term="java, springboot" scheme="https://qijianguo.com/tags/java-springboot/"/>
    
  </entry>
  
  <entry>
    <title>kafka-入门</title>
    <link href="https://qijianguo.com/Kafka%E5%AD%A6%E4%B9%A0/2019/04/17/Kafka_%E5%85%A5%E9%97%A8.html"/>
    <id>https://qijianguo.com/Kafka学习/2019/04/17/Kafka_入门.html</id>
    <published>2019-04-17T06:18:14.623Z</published>
    <updated>2019-04-17T07:34:11.718Z</updated>
    
    <content type="html"><![CDATA[<h2 id="入门"><a href="#入门" class="headerlink" title="入门"></a>入门</h2><hr><h4 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h4><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> kafka是一种消息中间件（生产者把消息放到队列里，消费者到'指定'队列消费）</span><br><span class="line"><span class="number">2.</span> producer：生产者、consumer：消费者、topic：队列（消息标签）、broker：kafka：扩容</span><br><span class="line"><span class="number">3.</span> kafka作为一个集群运行在一个或多个服务器上， 集群存储的消息是以topic为类别存储的</span><br><span class="line"><span class="number">4.</span> 一个消息（record）是由<span class="type">key</span>、value、时间戳构成</span><br></pre></td></tr></table></figure><h4 id="基本术语"><a href="#基本术语" class="headerlink" title="基本术语"></a>基本术语</h4><h5 id="Topic（主题）"><a href="#Topic（主题）" class="headerlink" title="Topic（主题）"></a>Topic（主题）</h5><ul><li>将消息或种子Feed分门别类，每一类消息就是一个Topic<blockquote><p>每个分区都是一个顺序的，不可变的消息队列，并且可以持续的添加，分区中的消息都被分了一个序列号，成为偏移量（offset），每个分区中的偏移量都是唯一的。对于每一个Topic， kafka集群维护这一个分区的log，如下图<br><img src="1524625989644.png" alt="Broker（多分区）"><br>kafka集群无论消息是否被消费都会保存所有的消息，直到过期！实际上Consumer持有的仅仅是消息的偏移量，Consumer既可以读取新消息，也可以重新读取旧消息。且Consumer之间互不干扰。这样做为了处理更多的消息而不被限制在单台服务器上。Topic拥有多个分区意味着它可以处理更多的数据。分区可以作为并行处理的单元。<br><img src="1524625961392.png" alt="Alt text"></p></blockquote><h5 id="Producer"><a href="#Producer" class="headerlink" title="Producer"></a>Producer</h5></li><li>发布消息的对象<blockquote><p>生产者往某个Topic上发布消息，生产者也负责选择发布到Topic上的哪一分区，最简单的方式是重分区列表中轮流选择，也可以根据某种算法依照权重进行选择分区，开发者负责如何选择分区的算法。 </p></blockquote><h5 id="Consumer"><a href="#Consumer" class="headerlink" title="Consumer"></a>Consumer</h5></li><li>订阅消息，并处理发布的消息<blockquote><p>通常消费模型分为队列和发布-订阅模式</p></blockquote></li><li>队列： 一条消息只有一个消费者可以处理</li><li>发布-订阅：消息被广播给所有的消费者，接收到消息的消费者都可以处理这条消息。<blockquote><blockquote><p>kafka为这两种模型提供了单一的消费者抽象模型: 消费者组（Consumer group）。消费者用一个消费者组名标记自己，一个发布在Topic上的消息被分发给消费者，如果所有的消费者都在一个组里，那么就成了queue 模型， 如果所有消费者都不在同一组中，那么就变成了发布-订阅模型。更通用的，我们可以创建一个消费者组作为逻辑上的订阅者，每个字包含数目不等的消费者，一个组内的消费者可以用来扩展和容错。<img src="1524633231026.png" alt="Alt text"><br>正像传统的消息系统一样，Kafka保证消息的顺序不变。 再详细扯几句。传统的队列模型保持消息，并且保证它们的先后顺序不变。但是， 尽管服务器保证了消息的顺序，消息还是异步的发送给各个消费者，消费者收到消息的先后顺序不能保证了。这也意味着并行消费将不能保证消息的先后顺序。用过传统的消息系统的同学肯定清楚，消息的顺序处理很让人头痛。如果只让一个消费者处理消息，又违背了并行处理的初衷。 在这一点上Kafka做的更好，尽管并没有完全解决上述问题。 Kafka采用了一种分而治之的策略：分区。 因为Topic分区中消息只能由消费者组中的唯一一个消费者处理，所以消息肯定是按照先后顺序进行处理的。但是它也仅仅是保证Topic的一个分区顺序处理，不能保证跨分区的消息先后处理顺序。 所以，如果你想要顺序的处理Topic的所有消息，那就只提供一个分区。</p></blockquote></blockquote></li></ul><h5 id="Broker（代理）"><a href="#Broker（代理）" class="headerlink" title="Broker（代理）"></a>Broker（代理）</h5><ul><li>已发布的消息保存在一组服务器中， 称为kafka集群，集群中的每个服务器就是一个Broker，Consumer可以订阅一个或多个Topic，并从Broker上拉数据，从而消费这些已发布的消息<h5 id="分布式（Distribution）"><a href="#分布式（Distribution）" class="headerlink" title="分布式（Distribution）"></a>分布式（Distribution）</h5></li><li>Log被分配到多个服务器上，每个服务器处理它分到的分区。根据配置每个分区还可以备份到其他服务器作为容错备份。每个分区有一个Leader，有零或多个Follower，Leader处理此分区的所有读写请求，而Follower则被动的复制数据，如果Leader宕机，则从Follower中选举一个作为新Leader。一个分区的Leader可能还是其他分区的Follower。这样可以负载均衡，避免所有请求只由一台或某几台服务器处理<h5 id="Geo-Replication-异地数据同步技术"><a href="#Geo-Replication-异地数据同步技术" class="headerlink" title="Geo-Replication(异地数据同步技术)"></a>Geo-Replication(异地数据同步技术)</h5></li><li>Kafka MirrorMaker为集群提供了Geo-Replication支持。借助MirrorMaker，消息可以跨多个数据中心或云区域进行备份。可以在active/passive场景中用于备份和恢复; 或者在active/passive方案中将数据置于更接近用户的位置，或数据本地化。</li></ul><hr><hr><h4 id="流平台（kafka作为一个分布式的流平台）"><a href="#流平台（kafka作为一个分布式的流平台）" class="headerlink" title="流平台（kafka作为一个分布式的流平台）"></a>流平台（kafka作为一个分布式的流平台）</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">流平台具有三个关键能力：</span><br><span class="line"><span class="bullet">1. </span>发布和订阅</span><br><span class="line"><span class="bullet">2. </span>以容错的方式存储消息（流）</span><br><span class="line"><span class="bullet">3. </span>在消息流发生时处理</span><br></pre></td></tr></table></figure><h4 id="核心API"><a href="#核心API" class="headerlink" title="核心API"></a>核心API</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1. </span>Producer API: <span class="code">`发布一个或多个Topic（主题）`</span></span><br><span class="line"><span class="bullet">2. </span>Consumer API: <span class="code">`订阅一个或多个Topic，并处理产生的消息`</span></span><br><span class="line"><span class="bullet">3. </span>Streams API: <span class="code">`消费topic，同时生产topic，将输入流转换为输出流`</span></span><br><span class="line"><span class="bullet">4. </span>Connector API： </span><br><span class="line">![<span class="string">关系图</span>](<span class="link">http://img.orchome.com:8888/group1/M00/00/01/KmCudlf7DXiAVXBMAAFScKNS-Og538.png</span>)</span><br></pre></td></tr></table></figure><h4 id="学习完应该掌握哪些内容"><a href="#学习完应该掌握哪些内容" class="headerlink" title="学习完应该掌握哪些内容"></a>学习完应该掌握哪些内容</h4><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">kafka节点之间如何复制备份的？</span><br><span class="line">kafka消息是否会丢失？为什么？</span><br><span class="line">kafka最合理的配置是什么？</span><br><span class="line">kafka的leader选举机制是什么？</span><br><span class="line">kafka对硬件的配置有什么要求？</span><br><span class="line">kafka的消息保证有几种方式？</span><br><span class="line"></span><br><span class="line">后续补充...</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;入门&quot;&gt;&lt;a href=&quot;#入门&quot; class=&quot;headerlink&quot; title=&quot;入门&quot;&gt;&lt;/a&gt;入门&lt;/h2&gt;&lt;hr&gt;
&lt;h4 id=&quot;概念&quot;&gt;&lt;a href=&quot;#概念&quot; class=&quot;headerlink&quot; title=&quot;概念&quot;&gt;&lt;/a&gt;概念&lt;/h4&gt;&lt;
      
    
    </summary>
    
      <category term="Kafka学习" scheme="https://qijianguo.com/categories/Kafka%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="kafka" scheme="https://qijianguo.com/tags/kafka/"/>
    
  </entry>
  
  <entry>
    <title>自定义EditText设置图片文字居中</title>
    <link href="https://qijianguo.com/Android/2019/04/17/%E8%87%AA%E5%AE%9A%E4%B9%89EditText%E8%AE%BE%E7%BD%AE%E5%9B%BE%E7%89%87%E6%96%87%E5%AD%97%E5%B1%85%E4%B8%AD.html"/>
    <id>https://qijianguo.com/Android/2019/04/17/自定义EditText设置图片文字居中.html</id>
    <published>2019-04-17T06:05:01.347Z</published>
    <updated>2019-04-17T07:33:59.710Z</updated>
    
    <content type="html"><![CDATA[<ul><li><p>JAVA</p><blockquote><p>自定义类继承EditText or AppCompatEditText</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Paint;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Rect;</span><br><span class="line"><span class="keyword">import</span> android.graphics.drawable.Drawable;</span><br><span class="line"><span class="keyword">import</span> android.support.v7.widget.AppCompatEditText;</span><br><span class="line"><span class="keyword">import</span> android.util.AttributeSet;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SearchText</span> <span class="keyword">extends</span> <span class="title">AppCompatEditText</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Drawable searchDrawable;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> offset;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> searchWidth;</span><br><span class="line">    <span class="keyword">private</span> String hintString;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> w;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> flag = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SearchText</span><span class="params">(Context context)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(context);</span><br><span class="line">        init();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SearchText</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(context, attrs);</span><br><span class="line">        init();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SearchText</span><span class="params">(Context context, AttributeSet attrs, <span class="keyword">int</span> defStyleAttr)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(context, attrs, defStyleAttr);</span><br><span class="line">        init();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        setOnFocusChangeListener(<span class="keyword">new</span> OnFocusChangeListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onFocusChange</span><span class="params">(View v, <span class="keyword">boolean</span> hasFocus)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (hasFocus) &#123;</span><br><span class="line">                    <span class="comment">// 获得焦点</span></span><br><span class="line">                    setTextAlignment(TextView.TEXT_ALIGNMENT_VIEW_START);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">// 失去焦点</span></span><br><span class="line">                    setTextAlignment(TextView.TEXT_ALIGNMENT_CENTER);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        setTextAlignment(TextView.TEXT_ALIGNMENT_CENTER);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onLayout</span><span class="params">(<span class="keyword">boolean</span> changed, <span class="keyword">int</span> left, <span class="keyword">int</span> top, <span class="keyword">int</span> right, <span class="keyword">int</span> bottom)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onLayout(changed, left, top, right, bottom);</span><br><span class="line">        <span class="comment">//圈1</span></span><br><span class="line">        searchWidth = getMeasuredWidth();</span><br><span class="line">        hintString = getHint().toString();</span><br><span class="line">        <span class="comment">//圈2</span></span><br><span class="line">        Paint paint = <span class="keyword">new</span> Paint();</span><br><span class="line">        Rect rect = <span class="keyword">new</span> Rect();</span><br><span class="line">        paint.getTextBounds(hintString, <span class="number">0</span>, hintString.length(), rect);</span><br><span class="line">        w = dip2px(getContext(), rect.width());</span><br><span class="line">        offset = searchWidth / <span class="number">2</span> - w * <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span> (flag == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">//圈3  //圈4</span></span><br><span class="line">            setTextDrawable();</span><br><span class="line">        &#125;</span><br><span class="line">        flag++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">dip2px</span><span class="params">(Context context, <span class="keyword">float</span> dpValue)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">float</span> scale = context.getResources().getDisplayMetrics().density;</span><br><span class="line">        <span class="keyword">return</span> (<span class="keyword">int</span>) (dpValue * scale + <span class="number">0.5f</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onTextChanged</span><span class="params">(CharSequence text, <span class="keyword">int</span> start, <span class="keyword">int</span> lengthBefore, <span class="keyword">int</span> lengthAfter)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onTextChanged(text, start, lengthBefore, lengthAfter);</span><br><span class="line">        <span class="keyword">if</span> (searchDrawable == <span class="keyword">null</span>) &#123;</span><br><span class="line">            getDrawable();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (length() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            setTextAlignment(TextView.TEXT_ALIGNMENT_VIEW_START);</span><br><span class="line">            setCompoundDrawables(<span class="keyword">null</span>, <span class="keyword">null</span>, <span class="keyword">null</span>, <span class="keyword">null</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (length() == <span class="number">0</span>) &#123;</span><br><span class="line">            setTextAlignment(TextView.TEXT_ALIGNMENT_CENTER);</span><br><span class="line">            setTextDrawable();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">getDrawable</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//圈5</span></span><br><span class="line">        Drawable[] compoundDrawables = getCompoundDrawables();</span><br><span class="line">        searchDrawable = compoundDrawables[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setTextDrawable</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        searchDrawable.setBounds(offset, <span class="number">0</span>, offset + searchDrawable.getIntrinsicWidth(), searchDrawable.getIntrinsicHeight());</span><br><span class="line">        setCompoundDrawables(searchDrawable, <span class="keyword">null</span>, <span class="keyword">null</span>, <span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></blockquote></li><li><p>XML(包名改成自己的)</p></li></ul><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;com.*.*.SearchText</span><br><span class="line">       android:<span class="attribute">id</span>=<span class="string">"@+id/work_detail_deal_research"</span></span><br><span class="line">       android:<span class="attribute">layout_width</span>=<span class="string">"match_parent"</span></span><br><span class="line">       android:<span class="attribute">layout_height</span>=<span class="string">"30dp"</span></span><br><span class="line">       android:<span class="attribute">background</span>=<span class="string">"@color/white"</span></span><br><span class="line">       android:<span class="attribute">layout_marginBottom</span>=<span class="string">"2dp"</span></span><br><span class="line">       android:<span class="attribute">layout_gravity</span>=<span class="string">"center"</span></span><br><span class="line">       android:<span class="attribute">gravity</span>=<span class="string">"center"</span></span><br><span class="line">       android:<span class="attribute">drawableLeft</span>=<span class="string">"@drawable/research"</span></span><br><span class="line">       android:<span class="attribute">hint</span>=<span class="string">"搜索"</span></span><br><span class="line">       android:<span class="attribute">textSize</span>=<span class="string">"@dimen/txtSize_title"</span></span><br><span class="line">       android:<span class="attribute">textColor</span>=<span class="string">"@color/txt_color1"</span>/&gt;</span><br></pre></td></tr></table></figure><ul><li><p>图标</p><blockquote><p><img src="https://img-blog.csdn.net/20180716152058577?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="search"> <img src="https://img-blog.csdn.net/20180716152122751?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="search2x"><img src="https://img-blog.csdn.net/2018071615215058?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTc0NzU5/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述"></p></blockquote></li><li><p>dimon </p></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dimen</span> <span class="attr">name</span>=<span class="string">"txtSize_title"</span>&gt;</span>16dp<span class="tag">&lt;/<span class="name">dimen</span>&gt;</span></span><br></pre></td></tr></table></figure><p>原文: <a href="https://blog.csdn.net/qq_29951983/article/details/78248068" target="_blank" rel="noopener">https://blog.csdn.net/qq_29951983/article/details/78248068</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ul&gt;
&lt;li&gt;&lt;p&gt;JAVA&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;自定义类继承EditText or AppCompatEditText&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;p
      
    
    </summary>
    
      <category term="Android" scheme="https://qijianguo.com/categories/Android/"/>
    
    
      <category term="android" scheme="https://qijianguo.com/tags/android/"/>
    
  </entry>
  
</feed>
